{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Penfield Documentation","text":"<p>Persistent Memory for AI Assistants</p> <p>Penfield gives any AI assistant long-term memory through MCP. Knowledge graphs, semantic search, and document storage that persists across sessions.</p>"},{"location":"#getting-started","title":"Getting Started","text":"<p>New to Penfield? Start here:</p> <ul> <li>Setup Guide - Create your account and connect to Claude.ai</li> <li>Claude Code Setup - Connect in the terminal</li> <li>MCP Remote Setup - Windsurf, Cursor, Gemini, Perplexity, and more</li> <li>Quick Reference - Learn how to use Penfield effectively</li> </ul>"},{"location":"#how-it-works","title":"How It Works","text":"<p>Memories are individual pieces of knowledge that persist across sessions. Facts, insights, decisions, corrections, and context from your conversations.</p> <p>Relationships connect memories into a knowledge graph. Link related ideas, build evidence chains, and create a web of understanding that search can traverse.</p> <p>Documents you upload get chunked and embedded for search. Each chunk becomes searchable alongside your memories.</p> <p>Hybrid Search combines BM25 keyword matching, vector similarity, and graph expansion to find relevant memories even when your query doesn't match exact words.</p>"},{"location":"#api-reference","title":"API Reference","text":"<p>Building integrations? See the API Documentation for endpoints, guides, examples, and schemas.</p>"},{"location":"#mcp-integration","title":"MCP Integration","text":"<p>For AI assistants that connect via Model Context Protocol, see the MCP Integration Guide.</p>"},{"location":"#install-penfield","title":"Install Penfield","text":"<p>Want to set up Penfield right now? Copy the Install Prompt and paste it into your AI assistant.</p>"},{"location":"#support","title":"Support","text":"<ul> <li>Email: support@penfield.app</li> <li>Portal: portal.penfield.app</li> <li>Source: github.com/penfieldlabs/docs</li> </ul> <p>\u00a9 2026 Penfield\u2122. All Rights Reserved.</p>"},{"location":"install-prompt/","title":"Install Penfield","text":"<p>Copy the prompt below and paste it into your AI assistant to set up Penfield automatically.</p>"},{"location":"install-prompt/#meta-prompt","title":"Meta Prompt","text":"<p>Copy everything inside the box below:</p> <pre><code>Help me install Penfield, a persistent memory and knowledge graph system for AI assistants.\n\nPenfield connects via MCP (Model Context Protocol). Detect which platform you're running on and follow the appropriate setup:\n\n**If you're Claude Desktop / Claude.ai:**\nGo to Settings &gt; Connectors &gt; Add Custom Connector.\n- Name: Penfield\n- Remote MCP server URL: https://mcp.penfield.app\nClick Add, then Connect, then Authorize.\n\n**If you're Claude Code:**\nRun this command:\nclaude mcp add --transport http --scope user penfield https://mcp.penfield.app\n\n**If you're any other MCP-compatible platform (Cursor, Windsurf, Gemini CLI, Perplexity, Antigravity, LM Studio, etc.):**\nAdd this to the platform's MCP configuration file:\n\n{\n  \"mcpServers\": {\n    \"Penfield\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"mcp-remote\", \"https://mcp.penfield.app/\"]\n    }\n  }\n}\n\nCommon config file locations:\n- Windsurf: ~/.codeium/windsurf/mcp_config.json\n- Cursor: ~/.cursor/mcp.json\n- Gemini CLI: ~/.gemini/settings.json\n- Antigravity: ~/.gemini/antigravity/mcp_config.json\n- LM Studio: Program &gt; Install &gt; Edit mcp.json\n\nAfter adding the config, restart the application. A browser window will open for authorization. Complete the authorization flow.\n\n**To verify the connection works:** Type \"Awaken\" and Penfield should respond with a personalized briefing.\n\n**Optional next steps:**\n- Visit https://portal.penfield.app to customize your AI personality\n- See the full documentation at https://docs.penfield.app\n\nIf anything goes wrong, check:\n1. Node.js is installed (required for mcp-remote): node --version\n2. The JSON syntax is correct (no trailing commas, matching braces)\n3. You restarted the application after adding the config\n4. Try authorizing through a different application first if auth doesn't trigger\n\nSupport: support@penfield.app\n</code></pre> <p>Full setup guides with screenshots:</p> <ul> <li>Claude.ai Setup</li> <li>Claude Code Setup</li> <li>MCP Remote Setup (Cursor, Windsurf, etc.)</li> </ul>"},{"location":"api/","title":"Penfield API Documentation","text":"<p>Version: 2.0.0 Base URL: <code>https://api.penfield.app/api/v2</code></p> <p>Penfield is a persistent memory and knowledge graph system for AI assistants.</p> <p>New to Penfield? Start with the Quick Start Guide.</p>"},{"location":"api/#how-penfield-works","title":"How Penfield Works","text":"<p>Memories are individual pieces of knowledge\u2014facts, insights, decisions, or context from conversations. Think of them as thoughts that persist across sessions.</p> <p>Relationships connect memories into a knowledge graph. When you link \"Python uses asyncio\" to \"asyncio enables concurrent I/O\", you're building a web of understanding that search can traverse.</p> <p>Documents you upload get chunked and embedded for search. Each chunk becomes searchable alongside your memories.</p> <p>Artifacts are files you create and store\u2014notes, diagrams, code snippets. Unlike memories, they're organized by path (<code>/project/notes.md</code>) rather than searched semantically.</p> <p>Hybrid Search combines three methods: BM25 (keyword matching), vector similarity (semantic meaning), and graph expansion (following relationships). This finds relevant memories even when your query doesn't match exact words.</p>"},{"location":"api/#documentation-index","title":"Documentation Index","text":""},{"location":"api/#getting-started","title":"Getting Started","text":"<ul> <li>Quick Start - First memory in 5 minutes</li> <li>Authentication - OAuth flows, API keys, tokens</li> </ul>"},{"location":"api/#guides","title":"Guides","text":"<ul> <li>Best Practices - Effective usage patterns</li> <li>Common Patterns - Session handoffs, investigations, multi-agent</li> <li>Memory Types - The 11 memory types explained</li> <li>Relationship Types - The 24 relationship types</li> <li>Error Handling - Error codes and recovery</li> <li>Troubleshooting - Solutions to common issues</li> </ul>"},{"location":"api/#api-reference","title":"API Reference","text":"<ul> <li>Memories - Store and retrieve memories</li> <li>Search - Hybrid search (BM25 + vector + graph)</li> <li>Relationships - Connect memories</li> <li>Documents - Upload and process documents</li> <li>Artifacts - File storage</li> <li>Analysis - Memory analysis tools</li> <li>Tags - Tag management</li> </ul>"},{"location":"api/#integration","title":"Integration","text":"<ul> <li>MCP Integration - Model Context Protocol tools</li> <li>Python Examples - Complete Python client</li> <li>cURL Examples - Command-line examples</li> </ul>"},{"location":"api/#authentication","title":"Authentication","text":"<p>Penfield uses OAuth 2.1 with dynamic endpoint discovery.</p>"},{"location":"api/#step-1-discover-endpoints","title":"Step 1: Discover Endpoints","text":"<p>Always discover endpoints from <code>.well-known</code>:</p> <pre><code>DISCOVERY=$(curl -s https://api.penfield.app/.well-known/oauth-authorization-server)\n</code></pre>"},{"location":"api/#step-2-choose-your-auth-method","title":"Step 2: Choose Your Auth Method","text":"Use Case Method Quick start / testing API Key Exchange Server-to-server API Key Exchange CLI tools / headless Device Code Flow Desktop/web apps Authorization Code + PKCE <p>See Authentication for complete details.</p>"},{"location":"api/#api-key-exchange-simplest","title":"API Key Exchange (Simplest)","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/auth/token \\\n-H \"Authorization: Bearer YOUR_API_KEY\" \\\n-H \"Content-Type: application/json\"\n</code></pre> <p>Response: <pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"access_token\": \"eyJhbGciOiJIUzI1NiIs...\",\n    \"token_type\": \"Bearer\",\n    \"expires_in\": 259200,\n    \"refresh_token\": \"eyJhbGciOiJIUzI1NiIs...\"\n  }\n}\n</code></pre></p>"},{"location":"api/#use-token","title":"Use Token","text":"<pre><code>curl -X GET https://api.penfield.app/api/v2/memories \\\n-H \"Authorization: Bearer YOUR_ACCESS_TOKEN\"\n</code></pre>"},{"location":"api/#quick-start","title":"Quick Start","text":""},{"location":"api/#1-store-a-memory","title":"1. Store a Memory","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/memories \\\n-H \"Authorization: Bearer $TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"content\": \"Python async programming uses asyncio for concurrent operations\",\n  \"memory_type\": \"fact\",\n  \"importance\": 0.8,\n  \"tags\": [\"python\", \"async\", \"programming\"]\n}'\n</code></pre>"},{"location":"api/#2-search-memories","title":"2. Search Memories","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/search/hybrid \\\n-H \"Authorization: Bearer $TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\"query\": \"Python async programming\", \"limit\": 10}'\n</code></pre>"},{"location":"api/#3-connect-related-memories","title":"3. Connect Related Memories","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/relationships \\\n-H \"Authorization: Bearer $TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\"from_id\": \"uuid-1\", \"to_id\": \"uuid-2\", \"relationship_type\": \"supports\", \"strength\": 0.8}'\n</code></pre>"},{"location":"api/#core-concepts","title":"Core Concepts","text":""},{"location":"api/#memories","title":"Memories","text":"<p>The fundamental unit of storage:</p> <ul> <li>content: Text (max 10,000 characters)</li> <li>memory_type: Classification (fact, insight, conversation, etc.)</li> <li>importance: Score 0-1</li> <li>confidence: Score 0-1</li> <li>tags: Up to 10 tags</li> </ul>"},{"location":"api/#memory-types","title":"Memory Types","text":"Type Description <code>fact</code> Verified information <code>insight</code> Derived understanding <code>conversation</code> Conversational context <code>correction</code> Update to previous information <code>reference</code> External reference <code>task</code> Action item <code>checkpoint</code> State snapshot <code>identity_core</code> Core AI identity <code>personality_trait</code> AI personality <code>relationship</code> User-AI relationship <code>strategy</code> Learned behavior"},{"location":"api/#relationships","title":"Relationships","text":"<p>24 types across categories:</p> Category Types Knowledge Evolution <code>supersedes</code>, <code>updates</code>, <code>evolution_of</code> Evidence &amp; Support <code>supports</code>, <code>contradicts</code>, <code>disputes</code> Hierarchy <code>parent_of</code>, <code>child_of</code>, <code>sibling_of</code>, <code>composed_of</code>, <code>part_of</code> Causation <code>causes</code>, <code>influenced_by</code>, <code>prerequisite_for</code> Implementation <code>implements</code>, <code>documents</code>, <code>tests</code>, <code>example_of</code> Conversation <code>responds_to</code>, <code>references</code>, <code>inspired_by</code> Sequence <code>follows</code>, <code>precedes</code> Dependencies <code>depends_on</code>"},{"location":"api/#hybrid-search","title":"Hybrid Search","text":"<p>Combines via Reciprocal Rank Fusion (RRF): - BM25 text search (keywords) - Vector similarity (semantic) - Graph expansion (relationships)</p> <p>Default weights: BM25=0.4, Vector=0.4, Graph=0.2</p>"},{"location":"api/#rate-limits","title":"Rate Limits","text":"<p>Rate limits may be enforced.</p> <p>Headers:</p> Header Description <code>x-ratelimit-limit</code> Max requests per window <code>x-ratelimit-remaining</code> Requests remaining <code>x-ratelimit-reset</code> Unix timestamp when window resets <code>retry-after</code> Seconds to wait (on 429)"},{"location":"api/#error-handling","title":"Error Handling","text":"<pre><code>{\n  \"status\": \"error\",\n  \"error\": {\n    \"code\": \"RES_NOT_FOUND\",\n    \"message\": \"Memory not found\"\n  }\n}\n</code></pre> Code Status Description <code>AUTH_INVALID_CREDENTIALS</code> 401 Invalid credentials <code>AUTH_TOKEN_EXPIRED</code> 401 Token expired <code>AUTH_INSUFFICIENT_PERMISSIONS</code> 403 Missing required scope <code>VAL_VALIDATION_FAILED</code> 422 Validation failed <code>RES_NOT_FOUND</code> 404 Resource not found <code>BIZ_RATE_LIMIT_EXCEEDED</code> 429 Rate limited"},{"location":"api/#environments","title":"Environments","text":"Environment API Auth Portal Production <code>api.penfield.app</code> <code>auth.penfield.app</code> <code>portal.penfield.app</code> Development <code>api-dev.penfield.app</code> <code>auth-dev.penfield.app</code> <code>portal-dev.penfield.app</code> <p>Always use discovery. The <code>.well-known/oauth-authorization-server</code> endpoint returns the correct auth server URLs.</p>"},{"location":"api/#support","title":"Support","text":"<ul> <li>API Issues: support@penfield.app</li> <li>Documentation: https://github.com/penfieldlabs/docs</li> </ul> <p>\u00a9 2026 Penfield\u2122. All Rights Reserved.</p>"},{"location":"api/endpoints/analysis/","title":"Analysis Endpoints","text":"<p>Analyze patterns and insights from your memories.</p>"},{"location":"api/endpoints/analysis/#reflect","title":"Reflect","text":"<p>Analyze recent memories to identify patterns, topics, and insights.</p> <pre><code>POST https://api.penfield.app/api/v2/analysis/reflect\n</code></pre>"},{"location":"api/endpoints/analysis/#headers","title":"Headers","text":"Header Required Description <code>Authorization</code> Yes <code>Bearer YOUR_JWT_TOKEN</code> <code>Content-Type</code> Yes <code>application/json</code>"},{"location":"api/endpoints/analysis/#request-body","title":"Request Body","text":"<pre><code>{\n  \"time_window\": \"week\",\n  \"include_documents\": false,\n  \"include_patterns\": true,\n  \"include_relationships\": true,\n  \"include_clusters\": true,\n  \"max_memories\": 50,\n  \"start_date\": \"2025-01-01\",\n  \"end_date\": \"2025-01-31\",\n  \"recency_weight\": 0.4,\n  \"access_weight\": 0.3,\n  \"importance_weight\": 0.2,\n  \"relationship_weight\": 0.1\n}\n</code></pre>"},{"location":"api/endpoints/analysis/#request-fields","title":"Request Fields","text":"Field Type Default Description <code>time_window</code> string <code>\"recent\"</code> Time period to analyze (see Time Windows below) <code>include_documents</code> boolean <code>false</code> Include document chunks in analysis <code>include_patterns</code> boolean <code>true</code> Include emerging patterns analysis <code>include_relationships</code> boolean <code>true</code> Include relationship insights <code>include_clusters</code> boolean <code>true</code> Include memory clustering <code>max_memories</code> integer <code>50</code> Maximum memories to analyze (1-1000) <code>start_date</code> string - Filter memories created on/after this date (ISO 8601) - overrides time_window <code>end_date</code> string - Filter memories created on/before this date (ISO 8601) - overrides time_window <code>recency_weight</code> float <code>0.4</code> Weight for recency in ranking (0-1) <code>access_weight</code> float <code>0.3</code> Weight for access frequency in ranking (0-1) <code>importance_weight</code> float <code>0.2</code> Weight for importance score in ranking (0-1) <code>relationship_weight</code> float <code>0.1</code> Weight for relationship count in ranking (0-1) <p>Important: The four weight parameters must sum to 1.0.</p>"},{"location":"api/endpoints/analysis/#time-windows","title":"Time Windows","text":"Value Description <code>recent</code> Last 50 memories <code>today</code> Today's memories <code>week</code> Last 7 days <code>month</code> Last 30 days"},{"location":"api/endpoints/analysis/#response","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"time_window\": \"week\",\n    \"memories\": [\n      {\n        \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"content\": \"Python async programming uses asyncio...\",\n        \"memory_type\": \"fact\",\n        \"importance\": 0.9,\n        \"access_count\": 0,\n        \"created_at\": \"2025-01-06T12:00:00.000Z\",\n        \"age_hours\": 2.16,\n        \"score\": 0.597\n      }\n    ],\n    \"active_topics\": [\"python\", \"async\", \"programming\", \"api\"],\n    \"memory_clusters\": [\n      {\n        \"name\": \"Recent Focus\",\n        \"memory_count\": 50,\n        \"description\": \"Memories from the last 24 hours\"\n      }\n    ],\n    \"emerging_patterns\": [\n      {\n        \"pattern\": \"High Access Frequency\",\n        \"memory_count\": 5,\n        \"description\": \"Memories accessed more than 5 times\"\n      }\n    ],\n    \"relationship_insights\": [\n      {\n        \"type\": \"supports\",\n        \"count\": 12,\n        \"description\": \"12 supports relationships\"\n      }\n    ],\n    \"statistics\": {\n      \"total_memories_analyzed\": 150,\n      \"memories_returned\": 50,\n      \"average_age_hours\": 2.54,\n      \"average_importance\": 0.61,\n      \"total_access_count\": 0,\n      \"unique_topics\": 20\n    }\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/analysis/#response-fields","title":"Response Fields","text":"Field Description <code>time_window</code> The requested time window <code>memories</code> Array of memory objects with relevance scores <code>memories[].age_hours</code> Hours since memory creation <code>memories[].score</code> Relevance score for the time window <code>active_topics</code> Array of topic keywords extracted from memories <code>memory_clusters</code> Grouped memories by pattern <code>emerging_patterns</code> Detected behavioral patterns <code>relationship_insights</code> Summary of relationship types <code>statistics</code> Aggregate statistics for the analysis"},{"location":"api/endpoints/analysis/#use-cases","title":"Use Cases","text":""},{"location":"api/endpoints/analysis/#weekly-review","title":"Weekly Review","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/analysis/reflect \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\"time_window\": \"week\"}'\n</code></pre>"},{"location":"api/endpoints/analysis/#daily-reflection","title":"Daily Reflection","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/analysis/reflect \\\n-d '{\"time_window\": \"today\"}'\n</code></pre>"},{"location":"api/endpoints/analysis/#include-documents","title":"Include Documents","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/analysis/reflect \\\n-d '{\"time_window\": \"month\", \"include_documents\": true}'\n</code></pre>"},{"location":"api/endpoints/analysis/#summarize-memories","title":"Summarize Memories","text":"<p>Create a statistical summary of specific memories or recent activity.</p> <pre><code>POST https://api.penfield.app/api/v2/analysis/summarize\n</code></pre>"},{"location":"api/endpoints/analysis/#headers_1","title":"Headers","text":"Header Required Description <code>Authorization</code> Yes <code>Bearer YOUR_JWT_TOKEN</code> <code>Content-Type</code> Yes <code>application/json</code>"},{"location":"api/endpoints/analysis/#request-body_1","title":"Request Body","text":"<pre><code>{\n  \"memory_ids\": [\"550e8400-e29b-41d4-a716-446655440000\", \"...\"],\n  \"max_memories\": 50,\n  \"include_relationships\": true\n}\n</code></pre>"},{"location":"api/endpoints/analysis/#request-fields_1","title":"Request Fields","text":"Field Type Default Description <code>memory_ids</code> array - Specific memory UUIDs to summarize (optional) <code>max_memories</code> integer <code>50</code> Maximum memories to include <code>include_relationships</code> boolean <code>true</code> Include relationship statistics"},{"location":"api/endpoints/analysis/#behavior","title":"Behavior","text":"<ul> <li>If <code>memory_ids</code> provided: Summarizes those specific memories</li> <li>If <code>memory_ids</code> omitted: Summarizes recent memories (last 24 hours)</li> <li>Limited to <code>max_memories</code> results</li> </ul>"},{"location":"api/endpoints/analysis/#response_1","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"summary\": \"Analyzed 50 memories: 45 fact, 3 insight, 2 task. Key topics: python, async, api, testing, deployment. Relationships: 12 supports, 5 references. Average importance: 0.72.\",\n    \"memory_count\": 50,\n    \"memory_types\": {\n      \"fact\": 45,\n      \"insight\": 3,\n      \"task\": 2\n    },\n    \"relationships\": [\n      {\n        \"type\": \"supports\",\n        \"count\": 12,\n        \"description\": \"12 supports relationships\"\n      },\n      {\n        \"type\": \"references\",\n        \"count\": 5,\n        \"description\": \"5 references relationships\"\n      }\n    ],\n    \"time_range\": {\n      \"oldest\": \"2025-01-06T10:00:00.000Z\",\n      \"newest\": \"2025-01-06T14:30:00.000Z\",\n      \"span_hours\": 4.5\n    }\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/analysis/#response-fields_1","title":"Response Fields","text":"Field Description <code>summary</code> Human-readable text summary <code>memory_count</code> Number of memories analyzed <code>memory_types</code> Distribution of memory types (type \u2192 count) <code>relationships</code> Relationship statistics (type, count, description) <code>time_range</code> Time span of analyzed memories (oldest, newest, span_hours)"},{"location":"api/endpoints/analysis/#use-cases_1","title":"Use Cases","text":"<p>Summarize specific memories: <pre><code>curl -X POST https://api.penfield.app/api/v2/analysis/summarize \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"memory_ids\": [\"uuid-1\", \"uuid-2\", \"uuid-3\"],\n  \"include_relationships\": true\n}'\n</code></pre></p> <p>Summarize recent activity: <pre><code>curl -X POST https://api.penfield.app/api/v2/analysis/summarize \\\n-d '{\"max_memories\": 100}'\n</code></pre></p>"},{"location":"api/endpoints/analysis/#notes","title":"Notes","text":"<ul> <li>Summary text includes: memory type distribution, key topics (word frequency), relationship counts, average importance</li> <li>Topic extraction uses simple word frequency (words &gt; 5 characters from first 10 memories)</li> <li>Time range shows oldest/newest memory and span in hours</li> <li>Empty result returns \"No memories found to summarize.\"</li> </ul>"},{"location":"api/endpoints/analysis/#memory-insights","title":"Memory Insights","text":"<p>Get high-level insights and statistics about the memory system.</p> <pre><code>GET https://api.penfield.app/api/v2/analysis/insights\n</code></pre>"},{"location":"api/endpoints/analysis/#headers_2","title":"Headers","text":"Header Required Description <code>Authorization</code> Yes <code>Bearer YOUR_JWT_TOKEN</code>"},{"location":"api/endpoints/analysis/#query-parameters","title":"Query Parameters","text":"<p>None - returns insights for all active memories.</p>"},{"location":"api/endpoints/analysis/#response_2","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"memory_type_distribution\": {\n      \"fact\": 120,\n      \"insight\": 45,\n      \"task\": 12,\n      \"checkpoint\": 3\n    },\n    \"statistics\": {\n      \"total_memories\": 180,\n      \"memories_last_24h\": 15,\n      \"memories_last_week\": 67,\n      \"memories_last_month\": 156,\n      \"average_importance\": 0.68,\n      \"total_access_count\": 342\n    },\n    \"insights\": [\n      {\n        \"insight\": \"Memory Creation Rate\",\n        \"value\": \"15 memories/day\",\n        \"trend\": \"stable\"\n      },\n      {\n        \"insight\": \"Most Common Type\",\n        \"value\": \"fact\",\n        \"count\": 120\n      }\n    ]\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/analysis/#response-fields_2","title":"Response Fields","text":"Field Description <code>memory_type_distribution</code> Count of memories by type <code>statistics.total_memories</code> Total active memories <code>statistics.memories_last_24h</code> Memories created in last 24 hours <code>statistics.memories_last_week</code> Memories created in last 7 days <code>statistics.memories_last_month</code> Memories created in last 30 days <code>statistics.average_importance</code> Mean importance score across all memories <code>statistics.total_access_count</code> Sum of all memory access counts <code>insights</code> Array of calculated insights"},{"location":"api/endpoints/analysis/#insights-provided","title":"Insights Provided","text":"Insight Description Memory Creation Rate Memories created per day (last 24h) Most Common Type Memory type with highest count"},{"location":"api/endpoints/analysis/#example","title":"Example","text":"<pre><code>curl -X GET https://api.penfield.app/api/v2/analysis/insights \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/endpoints/analysis/#use-cases_2","title":"Use Cases","text":"<ul> <li>Dashboard statistics</li> <li>Memory system health monitoring</li> <li>Usage pattern analysis</li> <li>Planning memory organization</li> </ul>"},{"location":"api/endpoints/analysis/#memory-evolution-history","title":"Memory Evolution History","text":"<p>Track how a memory has evolved over time.</p> <pre><code>GET https://api.penfield.app/api/v2/memories/{memory_id}/history\n</code></pre>"},{"location":"api/endpoints/analysis/#response_3","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"current\": {\n      \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n      \"content\": \"Current memory content...\",\n      \"memory_type\": \"fact\",\n      \"importance\": 0.8,\n      \"confidence\": 0.9,\n      \"created_at\": \"2025-01-06T12:00:00.000Z\",\n      \"updated_at\": \"2025-01-06T12:00:00.000Z\"\n    },\n    \"history\": [\n      {\n        \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"version\": 1,\n        \"content\": \"Original content...\",\n        \"created_at\": \"2025-01-01T00:00:00.000Z\",\n        \"lifecycle_state\": \"active\",\n        \"is_active\": true\n      }\n    ],\n    \"total_versions\": 1\n  },\n  \"metadata\": {\n    \"memory_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"versions_count\": 1\n  }\n}\n</code></pre>"},{"location":"api/endpoints/analysis/#response-fields_3","title":"Response Fields","text":"Field Description <code>current</code> Full memory object for the current version <code>history</code> Array of version records <code>history[].version</code> Version number <code>history[].lifecycle_state</code> State: <code>active</code>, <code>evolved</code>, <code>deprecated</code> <code>history[].is_active</code> Whether this version is current <code>total_versions</code> Total number of versions"},{"location":"api/endpoints/analysis/#evolution-types","title":"Evolution Types","text":"Type Description <code>correction</code> Fixed an error <code>update</code> Added new information <code>expansion</code> Expanded with more detail <code>contradiction</code> Conflicting information <code>deprecation</code> Marked as outdated"},{"location":"api/endpoints/analysis/#report-contradiction","title":"Report Contradiction","text":"<p>Report a contradiction between two memories.</p> <pre><code>POST https://api.penfield.app/api/v2/memories/contradictions\n</code></pre>"},{"location":"api/endpoints/analysis/#status","title":"Status","text":"<p>~~Not Yet Available~~ - This endpoint is now AVAILABLE. Use it to report contradictions between memories:</p> <pre><code>POST /api/v2/relationships\n{\n  \"from_id\": \"memory-1\",\n  \"to_id\": \"memory-2\",\n  \"relationship_type\": \"contradicts\"\n}\n</code></pre>"},{"location":"api/endpoints/analysis/#request-body_2","title":"Request Body","text":"<pre><code>{\n  \"source_memory_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"target_memory_id\": \"conflicting-memory-uuid\",\n  \"contradiction_type\": \"direct\",\n  \"confidence\": 0.8,\n  \"metadata\": {\n    \"description\": \"These memories state opposite facts\"\n  }\n}\n</code></pre>"},{"location":"api/endpoints/analysis/#contradiction-types","title":"Contradiction Types","text":"Type Description <code>direct</code> Completely contradictory statements <code>partial</code> Partially conflicting information <code>contextual</code> Contradictory in specific contexts"},{"location":"api/endpoints/analysis/#response_4","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"contradiction-uuid\",\n    \"source_memory_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"target_memory_id\": \"conflicting-memory-uuid\",\n    \"contradiction_type\": \"direct\",\n    \"resolution_status\": \"unresolved\",\n    \"detected_at\": \"2025-01-06T12:00:00.000Z\",\n    \"detected_by\": \"user\"\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/analysis/#list-contradictions","title":"List Contradictions","text":"<p>Get contradictions for a memory.</p> <pre><code>GET https://api.penfield.app/api/v2/memories/{memory_id}/contradictions\n</code></pre>"},{"location":"api/endpoints/analysis/#response_5","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"contradictions\": [\n      {\n        \"id\": \"contradiction-uuid\",\n        \"target_memory_id\": \"conflicting-memory-uuid\",\n        \"contradiction_type\": \"direct\",\n        \"resolution_status\": \"unresolved\",\n        \"confidence\": 0.85,\n        \"detected_at\": \"2025-01-06T12:00:00.000Z\"\n      }\n    ]\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/analysis/#resolve-contradiction","title":"Resolve Contradiction","text":"<p>Mark a contradiction as resolved.</p> <pre><code>POST https://api.penfield.app/api/v2/memories/contradictions/{contradiction_id}/resolve\n</code></pre>"},{"location":"api/endpoints/analysis/#status_1","title":"Status","text":"<p>This endpoint is now AVAILABLE. Use it to resolve reported contradictions.</p>"},{"location":"api/endpoints/analysis/#request-body_3","title":"Request Body","text":"<pre><code>{\n  \"resolution\": \"choose_memory_1\",\n  \"new_content\": \"The corrected information\",\n  \"reason\": \"Target memory was more accurate\"\n}\n</code></pre>"},{"location":"api/endpoints/analysis/#resolution-options","title":"Resolution Options","text":"Resolution Description <code>create_new</code> Create a new memory with corrected information (requires <code>new_content</code>) <code>choose_memory_1</code> Accept source memory as correct <code>choose_memory_2</code> Accept target memory as correct <code>keep_both</code> Keep both memories (mark as contextual)"},{"location":"api/endpoints/analysis/#resolution-status","title":"Resolution Status","text":"Status Description <code>unresolved</code> Contradiction not yet addressed <code>resolved</code> Contradiction resolved with new information <code>accepted</code> One version accepted as correct"},{"location":"api/endpoints/analysis/#evolve-memory","title":"Evolve Memory","text":"<p>Create a new version of a memory.</p> <pre><code>POST https://api.penfield.app/api/v2/memories/{memory_id}/evolve\n</code></pre>"},{"location":"api/endpoints/analysis/#request-body_4","title":"Request Body","text":"<pre><code>{\n  \"new_content\": \"Updated and corrected content...\",\n  \"evolution_type\": \"correction\",\n  \"reason\": \"Fixed factual error based on new information\"\n}\n</code></pre>"},{"location":"api/endpoints/analysis/#request-fields_2","title":"Request Fields","text":"Field Type Required Description <code>new_content</code> string Yes New memory content <code>evolution_type</code> string Yes Type of evolution <code>reason</code> string No Explanation for change"},{"location":"api/endpoints/analysis/#response_6","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"original_memory_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"new_memory_id\": \"new-version-uuid\",\n    \"evolution_id\": \"evolution-uuid\",\n    \"evolution_type\": \"correction\",\n    \"version\": 2,\n    \"created_at\": \"2025-01-06T12:00:00.000Z\"\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/analysis/#notes_1","title":"Notes","text":"<ul> <li>Creates a new memory linked to the original</li> <li>Original memory's <code>lifecycle_state</code> is updated</li> <li>Relationship created between versions</li> <li>Use <code>include_inactive=true</code> in list to see old versions</li> </ul>"},{"location":"api/endpoints/artifacts/","title":"Artifacts Endpoints","text":"<p>Store and retrieve user-created content (diagrams, notes, code) with path-based organization.</p>"},{"location":"api/endpoints/artifacts/#save-artifact","title":"Save Artifact","text":"<p>Save an artifact to storage.</p> <pre><code>POST https://api.penfield.app/api/v2/artifacts\n</code></pre>"},{"location":"api/endpoints/artifacts/#headers","title":"Headers","text":"Header Required Description <code>Authorization</code> Yes <code>Bearer YOUR_JWT_TOKEN</code> <code>Content-Type</code> Yes <code>application/json</code>"},{"location":"api/endpoints/artifacts/#request-body","title":"Request Body","text":"<pre><code>{\n  \"path\": \"/project/docs/api-notes.md\",\n  \"content\": \"# API Notes\\n\\nImportant information about the API...\"\n}\n</code></pre>"},{"location":"api/endpoints/artifacts/#request-fields","title":"Request Fields","text":"Field Type Required Description <code>path</code> string Yes Full path including filename <code>content</code> string Yes File content to save"},{"location":"api/endpoints/artifacts/#path-requirements","title":"Path Requirements","text":"<ul> <li>Must start with <code>/</code></li> <li>Must specify a filename (not just a directory)</li> <li>Maximum 10 levels deep</li> <li>Valid characters: alphanumeric, dash, underscore, dot, slash</li> <li>No <code>..</code> (path traversal)</li> <li>No hidden files (starting with <code>.</code>)</li> <li>No double slashes</li> </ul>"},{"location":"api/endpoints/artifacts/#valid-path-examples","title":"Valid Path Examples","text":"<pre><code>/readme.md\n/project/docs/api.md\n/diagrams/architecture.svg\n/notes/2025/january/meeting.md\n</code></pre>"},{"location":"api/endpoints/artifacts/#invalid-path-examples","title":"Invalid Path Examples","text":"<pre><code>readme.md          # Missing leading /\n/                  # Directory, not file\n/project/          # Directory, not file\n/../secrets.txt    # Path traversal\n/.hidden           # Hidden file\n//double.txt       # Double slash\n</code></pre>"},{"location":"api/endpoints/artifacts/#response","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"success\": true,\n    \"message\": \"Artifact saved successfully\",\n    \"path\": \"/project/docs/api-notes.md\",\n    \"artifact_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"content_type\": \"text/markdown\",\n    \"size\": 1024,\n    \"storage_path\": \"artifacts/project/docs/api-notes.md\"\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/artifacts/#response-fields","title":"Response Fields","text":"Field Description <code>success</code> Boolean indicating operation success <code>message</code> Human-readable status message <code>path</code> The artifact path <code>artifact_id</code> Unique identifier for the artifact <code>content_type</code> Detected MIME type <code>size</code> Content size in bytes <code>storage_path</code> Internal storage location"},{"location":"api/endpoints/artifacts/#size-limits","title":"Size Limits","text":"<ul> <li>Maximum artifact size: 10MB</li> </ul>"},{"location":"api/endpoints/artifacts/#errors","title":"Errors","text":"Status Code Description 400 - Invalid path format 409 - Artifact already exists at path 413 - Content exceeds 10MB limit"},{"location":"api/endpoints/artifacts/#example","title":"Example","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/artifacts \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"path\": \"/notes/python-tips.md\",\n  \"content\": \"# Python Tips\\n\\n- Use list comprehensions\\n- Prefer generators for large data\"\n}'\n</code></pre>"},{"location":"api/endpoints/artifacts/#retrieve-artifact","title":"Retrieve Artifact","text":"<p>Retrieve an artifact's content.</p> <pre><code>GET https://api.penfield.app/api/v2/artifacts?path={path}\n</code></pre>"},{"location":"api/endpoints/artifacts/#query-parameters","title":"Query Parameters","text":"Parameter Type Required Description <code>path</code> string Yes Full path of the artifact"},{"location":"api/endpoints/artifacts/#response_1","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"success\": true,\n    \"content\": \"# Python Tips\\n\\n- Use list comprehensions\\n- Prefer generators for large data\",\n    \"path\": \"/notes/python-tips.md\",\n    \"content_type\": \"text/markdown\",\n    \"size\": 78\n  },\n  \"meta\": {...}\n}\n</code></pre> <p>Note: Due to a known issue, <code>.md</code> files may currently return <code>text/plain</code> instead of <code>text/markdown</code>. See the known issue note below.</p>"},{"location":"api/endpoints/artifacts/#response-fields_1","title":"Response Fields","text":"Field Description <code>success</code> Boolean indicating operation success <code>content</code> The artifact content <code>path</code> The artifact path <code>content_type</code> MIME type of the content (see known issue below) <code>size</code> Content size in bytes <p>Known Issue: Some file extensions (including <code>.md</code>) may return an incorrect <code>content_type</code> on retrieve. For example, <code>.md</code> files may return <code>text/plain</code> instead of <code>text/markdown</code>. Use the file extension from the <code>path</code> field as a reliable alternative until this is resolved.</p>"},{"location":"api/endpoints/artifacts/#errors_1","title":"Errors","text":"Status Code Description 400 - Invalid path format 404 - Artifact not found"},{"location":"api/endpoints/artifacts/#example_1","title":"Example","text":"<pre><code>curl -X GET \"https://api.penfield.app/api/v2/artifacts?path=/notes/python-tips.md\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/endpoints/artifacts/#list-artifacts","title":"List Artifacts","text":"<p>List artifacts in a directory.</p> <pre><code>GET https://api.penfield.app/api/v2/artifacts/list?prefix={prefix}\n</code></pre>"},{"location":"api/endpoints/artifacts/#query-parameters_1","title":"Query Parameters","text":"Parameter Type Default Description <code>prefix</code> string <code>/</code> Directory path to list"},{"location":"api/endpoints/artifacts/#response_2","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"success\": true,\n    \"path\": \"/project\",\n    \"folders\": [\"docs\", \"diagrams\"],\n    \"files\": [\n      {\n        \"name\": \"readme.md\",\n        \"size\": 2048,\n        \"content_type\": \"text/markdown\",\n        \"last_modified\": \"2025-01-06T12:00:00.000Z\"\n      },\n      {\n        \"name\": \"notes.txt\",\n        \"size\": 512,\n        \"content_type\": \"text/plain\",\n        \"last_modified\": \"2025-01-05T10:00:00.000Z\"\n      }\n    ]\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/artifacts/#response-fields_2","title":"Response Fields","text":"Field Description <code>path</code> The directory path being listed <code>folders</code> Array of folder names (strings) <code>files[].name</code> File name <code>files[].size</code> File size in bytes <code>files[].content_type</code> MIME type <code>files[].last_modified</code> Last modification timestamp"},{"location":"api/endpoints/artifacts/#notes","title":"Notes","text":"<ul> <li>Returns immediate contents only (not recursive)</li> <li>Folders are returned as name strings; combine with <code>path</code> to get full paths</li> <li>Empty directories are not shown</li> </ul>"},{"location":"api/endpoints/artifacts/#example_2","title":"Example","text":"<pre><code># List root directory\ncurl -X GET \"https://api.penfield.app/api/v2/artifacts/list\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n\n# List specific directory\ncurl -X GET \"https://api.penfield.app/api/v2/artifacts/list?prefix=/project/docs\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/endpoints/artifacts/#delete-artifact","title":"Delete Artifact","text":"<p>Permanently delete an artifact.</p> <pre><code>DELETE https://api.penfield.app/api/v2/artifacts?path={path}\n</code></pre>"},{"location":"api/endpoints/artifacts/#query-parameters_2","title":"Query Parameters","text":"Parameter Type Required Description <code>path</code> string Yes Full path of the artifact"},{"location":"api/endpoints/artifacts/#response_3","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"message\": \"Artifact deleted: /notes/python-tips.md\"\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/artifacts/#notes_1","title":"Notes","text":"<ul> <li>This operation is permanent</li> <li>Associated memory record is also deleted</li> <li>Parent directories are not deleted (even if empty)</li> </ul>"},{"location":"api/endpoints/artifacts/#errors_2","title":"Errors","text":"Status Code Description 400 - Invalid path format 404 - Artifact not found"},{"location":"api/endpoints/artifacts/#content-type-detection","title":"Content Type Detection","text":"<p>Content types are automatically detected based on file extension:</p> Extension Content Type <code>.md</code> <code>text/markdown</code> <code>.txt</code> <code>text/plain</code> <code>.json</code> <code>application/json</code> <code>.html</code> <code>text/html</code> <code>.css</code> <code>text/css</code> <code>.js</code> <code>application/javascript</code> <code>.py</code> <code>text/x-python</code> <code>.svg</code> <code>image/svg+xml</code> <code>.xml</code> <code>application/xml</code> <code>.yaml</code>, <code>.yml</code> <code>application/x-yaml</code> <code>.csv</code> <code>text/csv</code> Other <code>application/octet-stream</code> <p>Known Issue: Some file extensions (including <code>.md</code>) may return an incorrect <code>content_type</code> when retrieving artifacts. The table above shows the intended behavior. As a workaround, use the file extension from the <code>path</code> field to determine the file type.</p>"},{"location":"api/endpoints/artifacts/#use-cases","title":"Use Cases","text":""},{"location":"api/endpoints/artifacts/#documentation-storage","title":"Documentation Storage","text":"<pre><code>{\n  \"path\": \"/docs/api/authentication.md\",\n  \"content\": \"# Authentication\\n\\nAPI authentication uses JWT tokens...\"\n}\n</code></pre>"},{"location":"api/endpoints/artifacts/#code-snippets","title":"Code Snippets","text":"<pre><code>{\n  \"path\": \"/snippets/python/async-example.py\",\n  \"content\": \"import asyncio\\n\\nasync def main():\\n    await asyncio.sleep(1)\"\n}\n</code></pre>"},{"location":"api/endpoints/artifacts/#diagrams-svg","title":"Diagrams (SVG)","text":"<pre><code>{\n  \"path\": \"/diagrams/architecture.svg\",\n  \"content\": \"&lt;svg xmlns=\\\"http://www.w3.org/2000/svg\\\"&gt;...&lt;/svg&gt;\"\n}\n</code></pre>"},{"location":"api/endpoints/artifacts/#configuration-files","title":"Configuration Files","text":"<pre><code>{\n  \"path\": \"/config/settings.json\",\n  \"content\": \"{\\\"debug\\\": false, \\\"log_level\\\": \\\"info\\\"}\"\n}\n</code></pre>"},{"location":"api/endpoints/artifacts/#artifacts-vs-memories","title":"Artifacts vs Memories","text":"Feature Artifacts Memories Organization Path-based hierarchy Flat with tags Content Files (text, code, diagrams) Knowledge snippets Searchable No (planned) Yes (hybrid search) Relationships No Yes (knowledge graph) Use Case Store outputs Store knowledge"},{"location":"api/endpoints/authentication/","title":"Authentication","text":"<p>Penfield uses OAuth 2.1 for authentication, compliant with the MCP 2025-11-25 Authorization Specification.</p>"},{"location":"api/endpoints/authentication/#quick-reference-which-method","title":"Quick Reference: Which Method?","text":"Use Case Method Complexity Getting started / testing API Key Exchange Simple Server-to-server automation API Key Exchange Simple CLI tool / headless device Device Code Flow Medium Desktop/web app with browser Authorization Code + PKCE Standard <p>All methods produce the same JWT tokens. Choose based on your use case.</p>"},{"location":"api/endpoints/authentication/#discovery-endpoints-mcp-compliant","title":"Discovery Endpoints (MCP Compliant)","text":"<p>Penfield implements OAuth 2.0 metadata discovery per RFC 8414 and RFC 9728.</p>"},{"location":"api/endpoints/authentication/#authorization-server-metadata","title":"Authorization Server Metadata","text":"<pre><code>curl https://api.penfield.app/.well-known/oauth-authorization-server\n</code></pre> <p>Response: <pre><code>{\n  \"issuer\": \"https://auth.penfield.app\",\n  \"authorization_endpoint\": \"https://auth.penfield.app/oauth/authorize\",\n  \"token_endpoint\": \"https://auth.penfield.app/oauth/token\",\n  \"device_authorization_endpoint\": \"https://auth.penfield.app/oauth/device_authorization\",\n  \"registration_endpoint\": \"https://auth.penfield.app/oauth/register\",\n  \"token_endpoint_auth_methods_supported\": [\"none\"],\n  \"response_types_supported\": [\"code\"],\n  \"grant_types_supported\": [\n    \"authorization_code\",\n    \"client_credentials\",\n    \"refresh_token\",\n    \"urn:ietf:params:oauth:grant-type:device_code\"\n  ],\n  \"code_challenge_methods_supported\": [\"S256\"],\n  \"scopes_supported\": [\"read\", \"write\", \"profile\", \"offline_access\"],\n  \"response_modes_supported\": [\"query\"],\n  \"authorization_response_iss_parameter_supported\": true,\n  \"service_documentation\": \"https://www.penfield.app/docs\",\n  \"dpop_signing_alg_values_supported\": [\"RS256\", \"ES256\"]\n}\n</code></pre></p> <p>Note on <code>token_endpoint_auth_methods_supported: [\"none\"]</code>: This is standard OAuth 2.1 for public clients. The value <code>\"none\"</code> means no client secret is required at the token endpoint. Security is provided by PKCE (Proof Key for Code Exchange) - the <code>code_verifier</code> proves client identity without a shared secret. This is the recommended approach for native apps, SPAs, and CLI tools per OAuth 2.1 and RFC 7636.</p>"},{"location":"api/endpoints/authentication/#protected-resource-metadata-rfc-9728","title":"Protected Resource Metadata (RFC 9728)","text":"<pre><code>curl https://api.penfield.app/.well-known/oauth-protected-resource\n</code></pre> <p>Response: <pre><code>{\n  \"resource\": \"https://auth.penfield.app\",\n  \"authorization_servers\": [\"https://auth.penfield.app\"],\n  \"resource_name\": \"Penfield Memory System\",\n  \"scopes_supported\": [\"read\", \"write\", \"openid\", \"profile\", \"offline_access\"],\n  \"bearer_methods_supported\": [\"header\"],\n  \"resource_signing_alg_values_supported\": [\"HS256\"],\n  \"resource_documentation\": \"https://github.com/penfieldlabs/docs\",\n  \"resource_policy_uri\": \"https://portal.penfield.app/privacy\",\n  \"resource_tos_uri\": \"https://portal.penfield.app/terms\"\n}\n</code></pre></p> <p>Key Point: Always discover endpoints dynamically. Never hardcode OAuth URLs.</p>"},{"location":"api/endpoints/authentication/#scopes","title":"Scopes","text":"<p>Discover available scopes from the metadata endpoints:</p> <pre><code># Get scopes from authorization server metadata\ncurl -s https://api.penfield.app/.well-known/oauth-authorization-server | \\\n  python3 -c \"import sys,json; print(json.load(sys.stdin)['scopes_supported'])\"\n</code></pre> <p>Scopes:</p> Scope Description <code>read</code> Read memories, search <code>write</code> Create, update, delete memories <code>profile</code> Access user profile information <code>offline_access</code> Receive refresh tokens <p>Note: Always check the discovery endpoint for the current list of supported scopes. The Protected Resource Metadata may list additional scopes like <code>openid</code>.</p>"},{"location":"api/endpoints/authentication/#api-key-exchange","title":"API Key Exchange","text":"<p>The simplest authentication method. Exchange an API key for JWT tokens.</p> <p>When to use: - Getting started quickly - Server-to-server integrations - Scripts and automation</p>"},{"location":"api/endpoints/authentication/#exchange-api-key-for-jwt","title":"Exchange API Key for JWT","text":"<pre><code>POST https://api.penfield.app/api/v2/auth/token\n</code></pre> <pre><code>curl -X POST https://api.penfield.app/api/v2/auth/token \\\n-H \"Authorization: Bearer tm_your_tenant_ak_your_key\" \\\n-H \"Content-Type: application/json\"\n</code></pre> <p>Response: <pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"access_token\": \"eyJhbGciOiJIUzI1NiIs...\",\n    \"token_type\": \"Bearer\",\n    \"expires_in\": 259200,\n    \"tenant_id\": \"pf_...\",\n    \"refresh_token\": \"eyJhbGciOiJIUzI1NiIs...\"\n  },\n  \"meta\": {\n    \"timestamp\": \"2026-01-30T12:00:00Z\",\n    \"version\": \"2.0.0\",\n    \"request_id\": \"...\"\n  }\n}\n</code></pre></p> <p>Note: <code>tenant_id</code> is your account/workspace identifier. All memories and data are scoped to this tenant.</p> <p>Note: The response includes a <code>refresh_token</code>. Use it to obtain new tokens without re-exchanging your API key. See Refresh Tokens.</p>"},{"location":"api/endpoints/authentication/#verify-token","title":"Verify Token","text":"<pre><code>GET https://api.penfield.app/api/v2/auth/verify\n</code></pre> <pre><code>curl -X GET https://api.penfield.app/api/v2/auth/verify \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/endpoints/authentication/#device-code-flow-rfc-8628","title":"Device Code Flow (RFC 8628)","text":"<p>For CLI tools, headless applications, and devices without a browser.</p> <p>When to use: - CLI tools - IoT devices - Any headless environment</p> <p>Benefits: - Supports refresh tokens with <code>offline_access</code> scope - User authorizes on a separate device - Follows RFC 8628 standard</p>"},{"location":"api/endpoints/authentication/#step-1-discover-endpoints","title":"Step 1: Discover Endpoints","text":"<pre><code>DISCOVERY=$(curl -s https://api.penfield.app/.well-known/oauth-authorization-server)\nDEVICE_AUTH_URL=$(echo $DISCOVERY | python3 -c \"import sys,json; print(json.load(sys.stdin)['device_authorization_endpoint'])\")\nTOKEN_URL=$(echo $DISCOVERY | python3 -c \"import sys,json; print(json.load(sys.stdin)['token_endpoint'])\")\n</code></pre>"},{"location":"api/endpoints/authentication/#step-2-register-client-optional","title":"Step 2: Register Client (Optional)","text":"<p>If you don't have a <code>client_id</code>, use Dynamic Client Registration:</p> <pre><code>REG_URL=$(echo $DISCOVERY | python3 -c \"import sys,json; print(json.load(sys.stdin)['registration_endpoint'])\")\n\ncurl -X POST \"$REG_URL\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"client_name\": \"my-cli-tool\",\n  \"redirect_uris\": [\"http://localhost:8080/callback\"],\n  \"grant_types\": [\"urn:ietf:params:oauth:grant-type:device_code\", \"refresh_token\"],\n  \"token_endpoint_auth_method\": \"none\",\n  \"scope\": \"read write offline_access\"\n}'\n</code></pre> <p>Response: <pre><code>{\n  \"client_id\": \"dyn_abc123...\",\n  \"client_id_issued_at\": 1704542400\n}\n</code></pre></p>"},{"location":"api/endpoints/authentication/#step-3-request-device-code","title":"Step 3: Request Device Code","text":"<pre><code>curl -X POST \"$DEVICE_AUTH_URL\" \\\n-H \"Content-Type: application/x-www-form-urlencoded\" \\\n-d \"client_id=YOUR_CLIENT_ID\" \\\n-d \"scope=read write offline_access\"\n</code></pre> <p>Response: <pre><code>{\n  \"device_code\": \"GmRhmhcxhwAzkoRubiFzegLbSwE4SBAAqEOwmI2NODBxINzONPUBAQl7PUPSDIw\",\n  \"user_code\": \"WDJB-MJHT\",\n  \"verification_uri\": \"https://portal.penfield.app/device\",\n  \"verification_uri_complete\": \"https://portal.penfield.app/device?user_code=WDJB-MJHT\",\n  \"expires_in\": 900,\n  \"interval\": 5\n}\n</code></pre></p>"},{"location":"api/endpoints/authentication/#step-4-user-authorization","title":"Step 4: User Authorization","text":"<p>Direct the user to: <code>https://portal.penfield.app/device?user_code=WDJB-MJHT</code></p>"},{"location":"api/endpoints/authentication/#step-5-poll-for-token","title":"Step 5: Poll for Token","text":"<p>Poll until user authorizes:</p> <pre><code>curl -X POST \"$TOKEN_URL\" \\\n-H \"Content-Type: application/x-www-form-urlencoded\" \\\n-d \"grant_type=urn:ietf:params:oauth:grant-type:device_code\" \\\n-d \"device_code=YOUR_DEVICE_CODE\" \\\n-d \"client_id=YOUR_CLIENT_ID\"\n</code></pre> <p>Polling Responses:</p> Error Action <code>authorization_pending</code> Continue polling at <code>interval</code> seconds <code>slow_down</code> Increase poll interval by 5 seconds <code>access_denied</code> User denied - stop polling <code>expired_token</code> Device code expired - restart flow <p>Success Response: <pre><code>{\n  \"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"token_type\": \"Bearer\",\n  \"expires_in\": 259200,\n  \"refresh_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"scope\": \"read write offline_access\"\n}\n</code></pre></p> <p>Note: <code>refresh_token</code> is only included if <code>offline_access</code> scope was requested. Check <code>expires_in</code> for actual token lifetime.</p>"},{"location":"api/endpoints/authentication/#authorization-code-pkce","title":"Authorization Code + PKCE","text":"<p>For desktop/web applications with browser redirect capability.</p> <p>When to use: - Desktop applications - Web applications - Any app that can open a browser and handle redirects</p>"},{"location":"api/endpoints/authentication/#step-1-discover-endpoints_1","title":"Step 1: Discover Endpoints","text":"<pre><code>DISCOVERY=$(curl -s https://api.penfield.app/.well-known/oauth-authorization-server)\nAUTH_URL=$(echo $DISCOVERY | python3 -c \"import sys,json; print(json.load(sys.stdin)['authorization_endpoint'])\")\nTOKEN_URL=$(echo $DISCOVERY | python3 -c \"import sys,json; print(json.load(sys.stdin)['token_endpoint'])\")\n</code></pre>"},{"location":"api/endpoints/authentication/#step-2-generate-pkce-parameters","title":"Step 2: Generate PKCE Parameters","text":"<pre><code># Generate code_verifier (43-128 characters, URL-safe)\nCODE_VERIFIER=$(openssl rand -hex 32)\n\n# Generate code_challenge (S256)\nCODE_CHALLENGE=$(printf '%s' \"$CODE_VERIFIER\" | openssl dgst -sha256 -binary | openssl base64 -A | tr '+/' '-_' | tr -d '=')\n\n# Generate state\nSTATE=$(openssl rand -hex 16)\n</code></pre>"},{"location":"api/endpoints/authentication/#step-3-authorization-request","title":"Step 3: Authorization Request","text":"<p>Open browser to:</p> <pre><code>$AUTH_URL?response_type=code&amp;client_id=YOUR_CLIENT_ID&amp;redirect_uri=http://localhost:8080/callback&amp;scope=read+write+offline_access&amp;code_challenge=$CODE_CHALLENGE&amp;code_challenge_method=S256&amp;state=$STATE\n</code></pre> <p>MCP Compliance: Include the <code>resource</code> parameter to bind tokens to the target:</p> <pre><code>&amp;resource=https://api.penfield.app\n</code></pre>"},{"location":"api/endpoints/authentication/#step-4-handle-callback","title":"Step 4: Handle Callback","text":"<p>After user authorizes, browser redirects to: <pre><code>http://localhost:8080/callback?code=AUTH_CODE&amp;state=YOUR_STATE\n</code></pre></p> <p>Always verify <code>state</code> matches your original value.</p>"},{"location":"api/endpoints/authentication/#step-5-exchange-code-for-tokens","title":"Step 5: Exchange Code for Tokens","text":"<pre><code>curl -X POST \"$TOKEN_URL\" \\\n-H \"Content-Type: application/x-www-form-urlencoded\" \\\n-d \"grant_type=authorization_code\" \\\n-d \"code=AUTH_CODE\" \\\n-d \"client_id=YOUR_CLIENT_ID\" \\\n-d \"redirect_uri=http://localhost:8080/callback\" \\\n-d \"code_verifier=$CODE_VERIFIER\"\n</code></pre> <p>Response: <pre><code>{\n  \"access_token\": \"eyJhbGciOiJIUzI1NiIs...\",\n  \"token_type\": \"Bearer\",\n  \"expires_in\": 259200,\n  \"refresh_token\": \"eyJhbGciOiJIUzI1NiIs...\",\n  \"scope\": \"read write offline_access\"\n}\n</code></pre></p>"},{"location":"api/endpoints/authentication/#refresh-tokens","title":"Refresh Tokens","text":"<p>Refresh tokens allow obtaining new access tokens without re-authentication.</p> <p>Requirements: - OAuth flows: Request <code>offline_access</code> scope during initial authorization - API Key Exchange: Returns refresh tokens automatically</p>"},{"location":"api/endpoints/authentication/#token-rotation-rfc-9700","title":"Token Rotation (RFC 9700)","text":"<p>Penfield implements refresh token rotation. Each refresh returns a new refresh token and invalidates the old one.</p> <p>Always store and use the latest refresh token.</p>"},{"location":"api/endpoints/authentication/#refresh-request-api-key-tokens","title":"Refresh Request (API Key Tokens)","text":"<p>For tokens obtained via API Key Exchange, use the API refresh endpoint:</p> <pre><code>curl -X POST https://api.penfield.app/api/v2/auth/refresh \\\n-H \"Content-Type: application/json\" \\\n-d '{\"refresh_token\": \"YOUR_REFRESH_TOKEN\"}'\n</code></pre> <p>Response: <pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"access_token\": \"eyJhbGciOiJIUzI1NiIs...\",\n    \"token_type\": \"Bearer\",\n    \"expires_in\": 259200,\n    \"tenant_id\": \"pf_...\",\n    \"refresh_token\": \"eyJhbGciOiJIUzI1NiIs...\"\n  },\n  \"meta\": {...}\n}\n</code></pre></p>"},{"location":"api/endpoints/authentication/#refresh-request-oauth-tokens","title":"Refresh Request (OAuth Tokens)","text":"<p>For tokens obtained via Device Code or Authorization Code flows, use the OAuth token endpoint:</p> <pre><code>TOKEN_URL=$(curl -s https://api.penfield.app/.well-known/oauth-authorization-server | python3 -c \"import sys,json; print(json.load(sys.stdin)['token_endpoint'])\")\n\ncurl -X POST \"$TOKEN_URL\" \\\n-H \"Content-Type: application/x-www-form-urlencoded\" \\\n-d \"grant_type=refresh_token\" \\\n-d \"refresh_token=YOUR_REFRESH_TOKEN\" \\\n-d \"client_id=YOUR_CLIENT_ID\"\n</code></pre> <p>Response: <pre><code>{\n  \"access_token\": \"eyJhbGciOiJIUzI1NiIs...\",\n  \"token_type\": \"Bearer\",\n  \"expires_in\": 259200,\n  \"refresh_token\": \"eyJhbGciOiJIUzI1NiIs...\",\n  \"scope\": \"read write offline_access\"\n}\n</code></pre></p>"},{"location":"api/endpoints/authentication/#token-lifetimes","title":"Token Lifetimes","text":"<p>Token lifetimes are configured by Penfield and may vary by environment.</p> <p>To check your actual token lifetime:</p> <ol> <li> <p>Decode the JWT (access token):    <pre><code># Decode the payload (middle section between dots)\necho \"YOUR_ACCESS_TOKEN\" | cut -d'.' -f2 | base64 -d | python3 -m json.tool\n</code></pre></p> </li> <li> <p>Check the <code>exp</code> claim - expiration timestamp (Unix epoch)</p> </li> <li>Or use the <code>expires_in</code> value from the token response (seconds until expiration)</li> </ol> <p>Typical values (subject to change):</p> Token Typical Lifetime Access token 24-72 hours Refresh token 7-30 days Device code 15 minutes <p>Important: Do not hardcode these values. Always check <code>expires_in</code> in the response or decode the JWT to get the actual expiration.</p>"},{"location":"api/endpoints/authentication/#using-tokens","title":"Using Tokens","text":"<p>Include the access token in the <code>Authorization</code> header:</p> <pre><code>curl -X GET https://api.penfield.app/api/v2/memories \\\n-H \"Authorization: Bearer YOUR_ACCESS_TOKEN\"\n</code></pre> <p>Never include tokens in URLs or query parameters.</p>"},{"location":"api/endpoints/authentication/#error-handling","title":"Error Handling","text":"Status Error Description 401 <code>invalid_token</code> Token expired or invalid 401 <code>invalid_credentials</code> Bad API key 400 <code>invalid_grant</code> Invalid authorization code or refresh token 400 <code>invalid_request</code> Missing required parameters"},{"location":"api/endpoints/authentication/#token-refresh-example","title":"Token Refresh Example","text":"<pre><code>def make_request(url, token, refresh_token, client_id):\n    response = requests.get(url, headers={\"Authorization\": f\"Bearer {token}\"})\n\n    if response.status_code == 401:\n        # Token expired, refresh it\n        new_tokens = refresh_access_token(refresh_token, client_id)\n        token = new_tokens[\"access_token\"]\n        refresh_token = new_tokens[\"refresh_token\"]  # Save the new refresh token!\n\n        # Retry request\n        response = requests.get(url, headers={\"Authorization\": f\"Bearer {token}\"})\n\n    return response, token, refresh_token\n</code></pre>"},{"location":"api/endpoints/authentication/#environments","title":"Environments","text":"Environment API URL Auth Server Portal Production <code>api.penfield.app</code> <code>auth.penfield.app</code> <code>portal.penfield.app</code> Development <code>api-dev.penfield.app</code> <code>auth-dev.penfield.app</code> <code>portal-dev.penfield.app</code> <p>Important: Always use the same environment consistently. Discovery from <code>api.penfield.app</code> returns <code>auth.penfield.app</code> endpoints.</p>"},{"location":"api/endpoints/authentication/#security-best-practices","title":"Security Best Practices","text":"<ol> <li>Never log tokens - Truncate in logs: <code>token[:10]...</code></li> <li>Store tokens securely - Use encrypted storage, not plain files</li> <li>Refresh proactively - Refresh tokens before they expire (e.g., 5 min buffer)</li> <li>Validate state - Always verify the <code>state</code> parameter in PKCE flow</li> <li>Use HTTPS only - All endpoints require HTTPS</li> <li>Rotate refresh tokens - Always use the newest refresh token</li> </ol>"},{"location":"api/endpoints/awakening/","title":"Awaken Tool","text":"<p>Load the user's personality briefing - used by AI assistants to orient themselves at the start of a conversation.</p> <p>Endpoint: <code>GET /api/v2/personality/awakening</code></p>"},{"location":"api/endpoints/awakening/#request","title":"Request","text":"<pre><code>curl -X GET https://api.penfield.app/api/v2/personality/awakening \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/endpoints/awakening/#response","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"briefing\": \"=== AWAKENING BRIEFING ===\\n\\nPENFIELD MEMORY SYSTEM\\n\\nYou have something most AI doesn't: continuity...\"\n  },\n  \"meta\": {\n    \"timestamp\": \"2026-01-20T12:30:20.268805+00:00\",\n    \"version\": \"2.0.0\",\n    \"request_id\": \"cbbafde6-bb1e-464d-a419-92669be644d2\"\n  }\n}\n</code></pre>"},{"location":"api/endpoints/awakening/#briefing-contents","title":"Briefing Contents","text":"<p>The briefing contains three sections:</p> <ol> <li>Penfield System Philosophy - Memory continuity, knowledge graph concepts, workflow guidelines</li> <li>Base Persona - Core assistant personality (e.g., \"Classic Assistant\")</li> <li>Custom Instructions - User-defined behavioral overrides</li> </ol>"},{"location":"api/endpoints/awakening/#notes","title":"Notes","text":"<ul> <li>The briefing is formatted with section markers (<code>=== SECTION NAME ===</code>)</li> <li>Custom instructions override base persona settings</li> <li>Response is tenant-specific to the authenticated user</li> </ul>"},{"location":"api/endpoints/documents/","title":"Documents Endpoints","text":"<p>Upload and manage documents that are automatically chunked, indexed, and made searchable.</p>"},{"location":"api/endpoints/documents/#upload-document","title":"Upload Document","text":"<p>Upload and process a document.</p> <pre><code>POST https://api.penfield.app/api/v2/documents/upload\n</code></pre>"},{"location":"api/endpoints/documents/#headers","title":"Headers","text":"Header Required Description <code>Authorization</code> Yes <code>Bearer YOUR_JWT_TOKEN</code> <code>Content-Type</code> Yes <code>multipart/form-data</code>"},{"location":"api/endpoints/documents/#request-body-multipartform-data","title":"Request Body (multipart/form-data)","text":"Field Type Required Description <code>file</code> file Yes Document file to upload <code>metadata</code> string No JSON string with additional metadata"},{"location":"api/endpoints/documents/#supported-file-types","title":"Supported File Types","text":"Type Extensions Max Size Text <code>.txt</code> 20MB Markdown <code>.md</code> 20MB PDF <code>.pdf</code> 20MB EPUB <code>.epub</code> 20MB Word <code>.doc</code>, <code>.docx</code> 20MB HTML <code>.html</code>, <code>.htm</code> 20MB JSON <code>.json</code> 20MB YAML <code>.yaml</code>, <code>.yml</code> 20MB Code <code>.py</code>, <code>.js</code>, <code>.ts</code> 20MB"},{"location":"api/endpoints/documents/#chunking-strategy","title":"Chunking Strategy","text":"<p>Documents are automatically split into searchable chunks. Approximate behavior:</p> Parameter Value Target chunk size ~400 characters Maximum chunk size ~450 characters Chunk overlap ~50 characters <p>Different file types use optimized chunking strategies:</p> File Type Strategy Notes Text Sentence-based Splits at sentence boundaries Markdown Structure-aware Respects headers, code blocks, tables PDF Page/section-aware Uses TOC when available EPUB Chapter-aware Preserves chapter boundaries Code Markdown-style Keeps code blocks together"},{"location":"api/endpoints/documents/#response","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"filename\": \"python-guide.pdf\",\n    \"content_type\": \"application/pdf\",\n    \"size\": 1048576,\n    \"chunk_count\": 45,\n    \"processing_status\": \"completed\",\n    \"embedding_progress\": {\n      \"total\": 45,\n      \"completed\": 45,\n      \"pending\": 0,\n      \"failed\": 0,\n      \"percent_complete\": 100.0\n    },\n    \"metadata\": {\n      \"chunk_ids\": [\"uuid1\", \"uuid2\", \"...\"],\n      \"message\": \"Document processed into 45 chunks. Embeddings are being generated.\",\n      \"processing_time\": 2.34\n    },\n    \"created_at\": \"2025-01-06T12:00:00.000Z\",\n    \"updated_at\": \"2025-01-06T12:00:00.000Z\"\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/documents/#processing-status","title":"Processing Status","text":"Status Description <code>uploading</code> File is being uploaded <code>processing</code> Document is being chunked <code>active</code> Ready for search <code>completed</code> All embeddings generated <code>failed</code> Processing failed"},{"location":"api/endpoints/documents/#embedding-progress","title":"Embedding Progress","text":"<p>Documents are chunked synchronously, but embeddings are generated asynchronously. The <code>embedding_progress</code> field shows:</p> <ul> <li><code>total</code>: Total chunks created</li> <li><code>completed</code>: Chunks with embeddings</li> <li><code>pending</code>: Chunks awaiting embedding</li> <li><code>failed</code>: Chunks that failed embedding</li> <li><code>percent_complete</code>: Completion percentage</li> </ul>"},{"location":"api/endpoints/documents/#duplicate-detection","title":"Duplicate Detection","text":"<p>If you upload a file with identical content (matching hash), the existing document is returned:</p> <pre><code>{\n  \"metadata\": {\n    \"duplicate_upload\": true,\n    \"message\": \"Document already exists. Returning existing document with 45 chunks.\"\n  }\n}\n</code></pre>"},{"location":"api/endpoints/documents/#errors","title":"Errors","text":"Status Code Description 413 - File too large (max 20MB) 422 <code>VAL_VALIDATION_FAILED</code> Unsupported file type 501 <code>NOT_IMPLEMENTED</code> File type not yet supported"},{"location":"api/endpoints/documents/#example","title":"Example","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/documents/upload \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-F \"file=@/path/to/document.pdf\" \\\n-F 'metadata={\"project\": \"documentation\", \"version\": \"2.0\"}'\n</code></pre>"},{"location":"api/endpoints/documents/#get-document","title":"Get Document","text":"<p>Retrieve document metadata and optionally its chunks.</p> <pre><code>GET https://api.penfield.app/api/v2/documents/{document_id}\n</code></pre>"},{"location":"api/endpoints/documents/#path-parameters","title":"Path Parameters","text":"Parameter Type Description <code>document_id</code> UUID Document identifier"},{"location":"api/endpoints/documents/#query-parameters","title":"Query Parameters","text":"Parameter Type Default Description <code>include_chunks</code> boolean <code>false</code> Include document chunks in response"},{"location":"api/endpoints/documents/#response-without-chunks","title":"Response (without chunks)","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"filename\": \"python-guide.pdf\",\n    \"content_type\": \"application/pdf\",\n    \"size\": 1048576,\n    \"chunk_count\": 45,\n    \"processing_status\": \"completed\",\n    \"embedding_progress\": {\n      \"total\": 45,\n      \"completed\": 45,\n      \"pending\": 0,\n      \"failed\": 0,\n      \"percent_complete\": 100.0\n    },\n    \"metadata\": {},\n    \"created_at\": \"2025-01-06T12:00:00.000Z\",\n    \"updated_at\": \"2025-01-06T12:00:00.000Z\"\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/documents/#response-with-chunks","title":"Response (with chunks)","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"filename\": \"python-guide.pdf\",\n    \"content_type\": \"application/pdf\",\n    \"size\": 1048576,\n    \"chunk_count\": 45,\n    \"processing_status\": \"completed\",\n    \"metadata\": {},\n    \"created_at\": \"2025-01-06T12:00:00.000Z\",\n    \"updated_at\": \"2025-01-06T12:00:00.000Z\",\n    \"chunks\": [\n      {\n        \"id\": \"chunk-uuid-1\",\n        \"document_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"chunk_index\": 0,\n        \"content\": \"Chapter 1: Introduction to Python...\",\n        \"start_char\": 0,\n        \"end_char\": 1500,\n        \"metadata\": {\n          \"page\": 1,\n          \"section\": \"Introduction\"\n        },\n        \"embedding_status\": \"completed\",\n        \"created_at\": \"2025-01-06T12:00:00.000Z\"\n      },\n      {\n        \"id\": \"chunk-uuid-2\",\n        \"document_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"chunk_index\": 1,\n        \"content\": \"Python is a versatile programming language...\",\n        \"start_char\": 1500,\n        \"end_char\": 3000,\n        \"metadata\": {},\n        \"embedding_status\": \"completed\",\n        \"created_at\": \"2025-01-06T12:00:00.000Z\"\n      }\n    ]\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/documents/#errors_1","title":"Errors","text":"Status Code Description 404 <code>RES_NOT_FOUND</code> Document not found"},{"location":"api/endpoints/documents/#list-documents","title":"List Documents","text":"<p>List all documents for the tenant.</p> <pre><code>GET https://api.penfield.app/api/v2/documents\n</code></pre>"},{"location":"api/endpoints/documents/#query-parameters_1","title":"Query Parameters","text":"Parameter Type Default Description <code>page</code> integer <code>1</code> Page number <code>per_page</code> integer <code>20</code> Items per page (max 100)"},{"location":"api/endpoints/documents/#response_1","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"items\": [\n      {\n        \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"filename\": \"python-guide.pdf\",\n        \"content_type\": \"application/pdf\",\n        \"size\": 1048576,\n        \"chunk_count\": 45,\n        \"processing_status\": \"completed\",\n        \"embedding_progress\": {\n          \"total\": 45,\n          \"completed\": 45,\n          \"pending\": 0,\n          \"failed\": 0,\n          \"percent_complete\": 100.0\n        },\n        \"metadata\": {},\n        \"created_at\": \"2025-01-06T12:00:00.000Z\",\n        \"updated_at\": \"2025-01-06T12:00:00.000Z\"\n      }\n    ],\n    \"pagination\": {\n      \"page\": 1,\n      \"per_page\": 20,\n      \"total\": 5,\n      \"pages\": 1,\n      \"has_next\": false,\n      \"has_prev\": false\n    }\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/documents/#download-document","title":"Download Document","text":"<p>Download the original uploaded document file.</p> <pre><code>GET https://api.penfield.app/api/v2/documents/{document_id}/download\n</code></pre>"},{"location":"api/endpoints/documents/#path-parameters_1","title":"Path Parameters","text":"Parameter Type Description <code>document_id</code> UUID Document identifier"},{"location":"api/endpoints/documents/#response_2","title":"Response","text":"<p>Returns the raw file content with appropriate headers:</p> <pre><code>Content-Type: application/pdf\nContent-Disposition: attachment; filename=\"python-guide.pdf\"\n</code></pre>"},{"location":"api/endpoints/documents/#errors_2","title":"Errors","text":"Status Code Description 404 <code>RES_NOT_FOUND</code> Document not found or file missing from storage"},{"location":"api/endpoints/documents/#example_1","title":"Example","text":"<pre><code>curl -X GET https://api.penfield.app/api/v2/documents/550e8400-e29b-41d4-a716-446655440000/download \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-o downloaded-file.pdf\n</code></pre>"},{"location":"api/endpoints/documents/#delete-document","title":"Delete Document","text":"<p>Permanently delete a document and all its chunks.</p> <pre><code>DELETE https://api.penfield.app/api/v2/documents/{document_id}\n</code></pre>"},{"location":"api/endpoints/documents/#path-parameters_2","title":"Path Parameters","text":"Parameter Type Description <code>document_id</code> UUID Document identifier"},{"location":"api/endpoints/documents/#response_3","title":"Response","text":"<pre><code>HTTP 204 No Content\n</code></pre>"},{"location":"api/endpoints/documents/#notes","title":"Notes","text":"<ul> <li>This operation is permanent and cannot be undone</li> <li>All associated chunks are deleted</li> <li>The original file is removed from storage</li> <li>Embeddings are also removed</li> </ul>"},{"location":"api/endpoints/documents/#errors_3","title":"Errors","text":"Status Code Description 404 <code>RES_NOT_FOUND</code> Document not found"},{"location":"api/endpoints/documents/#reprocess-document","title":"Reprocess Document","text":"<p>Re-chunk and re-embed a document. Useful when chunking algorithms are updated.</p> <pre><code>POST https://api.penfield.app/api/v2/documents/{document_id}/reprocess\n</code></pre>"},{"location":"api/endpoints/documents/#status","title":"Status","text":"<p>Not Yet Implemented - Returns 501</p>"},{"location":"api/endpoints/documents/#future-behavior","title":"Future Behavior","text":"<p>When implemented, this will: 1. Retrieve the original document from storage 2. Re-run chunking with current algorithms 3. Replace existing chunks 4. Generate new embeddings</p>"},{"location":"api/endpoints/documents/#document-search","title":"Document Search","text":"<p>Document chunks are automatically searchable via the hybrid search endpoint:</p> <pre><code>curl -X POST https://api.penfield.app/api/v2/search/hybrid \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"query\": \"python async programming\",\n  \"source_types\": [\"document_upload\"],\n  \"include_neighbors\": 2\n}'\n</code></pre>"},{"location":"api/endpoints/documents/#context-expansion","title":"Context Expansion","text":"<p>When searching documents, use <code>include_neighbors</code> to get surrounding context:</p> <pre><code>{\n  \"query\": \"specific topic\",\n  \"include_neighbors\": 2\n}\n</code></pre> <p>This includes 2 chunks before and after each matching chunk, providing better context.</p>"},{"location":"api/endpoints/memories/","title":"Memories Endpoints","text":"<p>Memories are the core data unit in Penfield.</p>"},{"location":"api/endpoints/memories/#create-memory","title":"Create Memory","text":"<pre><code>POST https://api.penfield.app/api/v2/memories\n</code></pre>"},{"location":"api/endpoints/memories/#headers","title":"Headers","text":"Header Required Description <code>Authorization</code> Yes <code>Bearer YOUR_JWT_TOKEN</code> <code>Content-Type</code> Yes <code>application/json</code>"},{"location":"api/endpoints/memories/#request-body","title":"Request Body","text":"<pre><code>{\n  \"content\": \"Python async programming uses asyncio\",\n  \"memory_type\": \"fact\",\n  \"importance\": 0.8,\n  \"tags\": [\"python\", \"async\"]\n}\n</code></pre>"},{"location":"api/endpoints/memories/#request-fields","title":"Request Fields","text":"Field Type Required Description <code>content</code> string Yes Memory content (1-10,000 chars) <code>memory_type</code> string No Type (fact, insight, etc.) <code>importance</code> float No 0.0-1.0 <code>confidence</code> float No 0.0-1.0 <code>tags</code> array No Up to 10 tags"},{"location":"api/endpoints/memories/#response","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"content\": \"Python async programming uses asyncio for concurrent operations\",\n    \"memory_type\": \"fact\",\n    \"importance\": 0.8,\n    \"confidence\": 0.9,\n    \"surprise_score\": 0.5,\n    \"source_type\": \"direct_input\",\n    \"user_id\": \"user_123\",\n    \"access_count\": 0,\n    \"last_accessed\": null,\n    \"created_at\": \"2025-01-06T12:00:00.000Z\",\n    \"updated_at\": \"2025-01-06T12:00:00.000Z\",\n    \"metadata\": {\n      \"category\": \"programming\",\n      \"language\": \"python\"\n    },\n    \"embedding_status\": \"pending\",\n    \"relationships\": []\n  },\n  \"meta\": {\n    \"timestamp\": \"2025-01-06T12:00:00.000Z\",\n    \"version\": \"2.0.0\",\n    \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\"\n  }\n}\n</code></pre>"},{"location":"api/endpoints/memories/#notes","title":"Notes","text":"<ul> <li>Embeddings are generated asynchronously in the background</li> <li><code>embedding_status</code> will be <code>\"pending\"</code> initially, then <code>\"completed\"</code> or <code>\"failed\"</code></li> <li>Tags are normalized (lowercase, hyphens replace spaces/underscores)</li> <li>Invalid tags are silently skipped</li> </ul>"},{"location":"api/endpoints/memories/#errors","title":"Errors","text":"Status Code Description 401 <code>AUTH_UNAUTHORIZED</code> Missing or invalid token 403 <code>AUTH_FORBIDDEN</code> <code>memory_type</code> is <code>identity_core</code> or <code>personality_trait</code> (use <code>/api/v2/personality</code> endpoints) 422 <code>VAL_VALIDATION_FAILED</code> Invalid request body 422 <code>VAL_FIELD_TOO_LONG</code> Content exceeds 10,000 characters"},{"location":"api/endpoints/memories/#get-memory","title":"Get Memory","text":"<p>Retrieve a specific memory by ID.</p> <pre><code>GET https://api.penfield.app/api/v2/memories/{memory_id}\n</code></pre>"},{"location":"api/endpoints/memories/#path-parameters","title":"Path Parameters","text":"Parameter Type Description <code>memory_id</code> UUID Memory identifier"},{"location":"api/endpoints/memories/#response_1","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"content\": \"Python async programming uses asyncio for concurrent operations\",\n    \"memory_type\": \"fact\",\n    \"importance\": 0.8,\n    \"confidence\": 0.9,\n    \"surprise_score\": 0.5,\n    \"source_type\": \"direct_input\",\n    \"user_id\": \"user_123\",\n    \"access_count\": 5,\n    \"last_accessed\": \"2025-01-06T14:00:00.000Z\",\n    \"created_at\": \"2025-01-06T12:00:00.000Z\",\n    \"updated_at\": \"2025-01-06T12:00:00.000Z\",\n    \"metadata\": {},\n    \"embedding_status\": \"completed\",\n    \"relationships\": []\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/memories/#notes_1","title":"Notes","text":"<ul> <li>The <code>access_count</code> and <code>last_accessed</code> fields reflect access patterns over time but are not guaranteed to update immediately on each read. Applications should not rely on these fields for real-time read-after-write consistency.</li> </ul>"},{"location":"api/endpoints/memories/#errors_1","title":"Errors","text":"Status Code Description 404 <code>RES_NOT_FOUND</code> Memory not found"},{"location":"api/endpoints/memories/#list-memories","title":"List Memories","text":"<p>List memories with pagination and filters.</p> <pre><code>GET https://api.penfield.app/api/v2/memories\n</code></pre>"},{"location":"api/endpoints/memories/#query-parameters","title":"Query Parameters","text":"Parameter Type Default Description <code>page</code> integer <code>1</code> Page number (1-based) <code>per_page</code> integer <code>20</code> Items per page (max 100) <code>memory_type</code> string - Filter by memory type <code>user_id</code> string - Filter by creator <code>importance_threshold</code> float - Minimum importance (0.0-1.0) <code>date_from</code> datetime - Filter memories created after this date <code>date_to</code> datetime - Filter memories created before this date <code>time_range</code> string - Relative time filter: <code>today</code>, <code>yesterday</code>, <code>week</code>, <code>month</code>, <code>quarter</code>, <code>year</code> <code>tags</code> string - Comma-separated tags (OR logic) <code>sort</code> string <code>-created_at</code> Sort field with optional <code>-</code> prefix for descending <code>include_inactive</code> boolean <code>false</code> Include evolved/deprecated memories"},{"location":"api/endpoints/memories/#response_2","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"items\": [\n      {\n        \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"content\": \"Python async programming...\",\n        \"memory_type\": \"fact\",\n        \"importance\": 0.8,\n        \"confidence\": 0.9,\n        \"surprise_score\": 0.5,\n        \"source_type\": \"direct_input\",\n        \"user_id\": \"user_123\",\n        \"access_count\": 5,\n        \"last_accessed\": \"2025-01-06T14:00:00.000Z\",\n        \"created_at\": \"2025-01-06T12:00:00.000Z\",\n        \"updated_at\": \"2025-01-06T12:00:00.000Z\",\n        \"metadata\": {},\n        \"embedding_status\": \"completed\",\n        \"relationships\": []\n      }\n    ],\n    \"pagination\": {\n      \"page\": 1,\n      \"per_page\": 20,\n      \"total\": 150,\n      \"pages\": 8,\n      \"has_next\": true,\n      \"has_prev\": false\n    }\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/memories/#sort-options","title":"Sort Options","text":"Value Description <code>created_at</code> Sort by creation date (ascending) <code>-created_at</code> Sort by creation date (descending, default) <code>importance</code> Sort by importance (ascending) <code>-importance</code> Sort by importance (descending) <code>updated_at</code> Sort by update date (ascending) <code>-updated_at</code> Sort by update date (descending)"},{"location":"api/endpoints/memories/#example","title":"Example","text":"<pre><code># Get recent high-importance memories tagged with \"python\"\ncurl -X GET \"https://api.penfield.app/api/v2/memories?importance_threshold=0.7&amp;tags=python&amp;sort=-importance\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/endpoints/memories/#update-memory","title":"Update Memory","text":"<p>Update an existing memory.</p> <pre><code>PUT https://api.penfield.app/api/v2/memories/{memory_id}\n</code></pre>"},{"location":"api/endpoints/memories/#path-parameters_1","title":"Path Parameters","text":"Parameter Type Description <code>memory_id</code> UUID Memory identifier"},{"location":"api/endpoints/memories/#request-body_1","title":"Request Body","text":"<p>Only include fields you want to update:</p> <pre><code>{\n  \"content\": \"Updated content...\",\n  \"importance\": 0.9,\n  \"metadata\": {\n    \"updated\": true\n  }\n}\n</code></pre>"},{"location":"api/endpoints/memories/#request-fields_1","title":"Request Fields","text":"Field Type Description <code>content</code> string New content (1-10,000 characters) <code>memory_type</code> string New memory type <code>importance</code> float New importance (0.0-1.0) <code>confidence</code> float New confidence (0.0-1.0) <code>metadata</code> object New metadata (replaces existing) <code>tags</code> array New tags (replaces existing)"},{"location":"api/endpoints/memories/#update-behavior","title":"Update Behavior","text":"Field <code>null</code> Empty (<code>[]</code> or <code>{}</code>) <code>tags</code> No change Clears all tags <code>metadata</code> No change Clears metadata"},{"location":"api/endpoints/memories/#response_3","title":"Response","text":"<p>Returns the updated memory object.</p>"},{"location":"api/endpoints/memories/#notes_2","title":"Notes","text":"<ul> <li>Only provided fields are updated</li> <li>Updating <code>content</code> will regenerate embeddings</li> <li>The <code>updated_at</code> timestamp is automatically set</li> </ul>"},{"location":"api/endpoints/memories/#errors_2","title":"Errors","text":"Status Code Description 403 <code>AUTH_FORBIDDEN</code> <code>memory_type</code> is <code>identity_core</code> or <code>personality_trait</code> (use <code>/api/v2/personality</code> endpoints) 404 <code>RES_NOT_FOUND</code> Memory not found 422 <code>VAL_VALIDATION_FAILED</code> Invalid update data"},{"location":"api/endpoints/memories/#delete-memory","title":"Delete Memory","text":"<p>Permanently delete a memory.</p> <pre><code>DELETE https://api.penfield.app/api/v2/memories/{memory_id}\n</code></pre>"},{"location":"api/endpoints/memories/#path-parameters_2","title":"Path Parameters","text":"Parameter Type Description <code>memory_id</code> UUID Memory identifier"},{"location":"api/endpoints/memories/#response_4","title":"Response","text":"<pre><code>HTTP 204 No Content\n</code></pre>"},{"location":"api/endpoints/memories/#notes_3","title":"Notes","text":"<ul> <li>This operation is permanent and cannot be undone</li> <li>Associated relationships are also deleted</li> <li>Tags are not deleted (they may be used by other memories)</li> <li>Reserved for Portal/API Use: This endpoint requires <code>write</code> scope and is not available via standard MCP access. It is intended for administrative use through the Penfield Portal or API keys with elevated permissions.</li> </ul>"},{"location":"api/endpoints/memories/#errors_3","title":"Errors","text":"Status Code Description 404 <code>RES_NOT_FOUND</code> Memory not found"},{"location":"api/endpoints/memories/#response-fields","title":"Response Fields","text":"<p>All memory responses include these fields:</p> Field Type Description <code>id</code> UUID Unique memory identifier <code>content</code> string The memory content <code>memory_type</code> string Type classification <code>importance</code> float Significance score (0.0-1.0) <code>confidence</code> float Certainty score (0.0-1.0) <code>surprise_score</code> float Novelty indicator (0.0-1.0). Higher values indicate more unexpected or novel content. Default: 0.5. Currently set at creation; future versions may update dynamically. <code>source_type</code> string Origin of the memory <code>user_id</code> string User who created the memory <code>access_count</code> integer Number of times accessed (not real-time; see note below) <code>last_accessed</code> datetime When last accessed, or null (not real-time; see note below) <code>embedding_status</code> string <code>\"pending\"</code>, <code>\"completed\"</code>, or <code>\"failed\"</code> <code>created_at</code> datetime Creation timestamp <code>updated_at</code> datetime Last modification timestamp"},{"location":"api/endpoints/memories/#access-tracking-note","title":"Access Tracking Note","text":"<p>The <code>access_count</code> and <code>last_accessed</code> fields track access patterns over time. These fields are not updated synchronously on every read request. Applications should not depend on these values for immediate read-after-write consistency. Use <code>created_at</code> or <code>updated_at</code> if you need reliable timestamps for ordering or change detection.</p>"},{"location":"api/endpoints/memories/#memory-types","title":"Memory Types","text":"Type Value Description Fact <code>fact</code> Verified information Insight <code>insight</code> Derived understanding or pattern Conversation <code>conversation</code> Conversational context Correction <code>correction</code> Update to previous information Reference <code>reference</code> External reference or citation Task <code>task</code> Action item or todo Checkpoint <code>checkpoint</code> Conversation state snapshot Identity Core <code>identity_core</code> Immutable AI identity Personality Trait <code>personality_trait</code> Evolvable AI traits Relationship <code>relationship</code> User-AI relationship info Strategy <code>strategy</code> Learned behavior pattern"},{"location":"api/endpoints/memories/#source-types","title":"Source Types","text":"Type Value Description Direct Input <code>direct_input</code> Manually entered Document Upload <code>document_upload</code> Extracted from uploaded document Web Scrape <code>web_scrape</code> Scraped from web page API Import <code>api_import</code> Imported via API Conversation <code>conversation</code> From conversation context Reflection <code>reflection</code> Generated from analysis Checkpoint <code>checkpoint</code> From checkpoint operation Checkpoint Recall <code>checkpoint_recall</code> Restored from checkpoint"},{"location":"api/endpoints/relationships/","title":"Relationships Endpoints","text":"<p>Create and traverse relationships between memories to build a knowledge graph.</p>"},{"location":"api/endpoints/relationships/#create-relationship","title":"Create Relationship","text":"<p>Create a relationship between two memories.</p> <pre><code>POST https://api.penfield.app/api/v2/relationships\n</code></pre>"},{"location":"api/endpoints/relationships/#headers","title":"Headers","text":"Header Required Description <code>Authorization</code> Yes <code>Bearer YOUR_JWT_TOKEN</code> <code>Content-Type</code> Yes <code>application/json</code>"},{"location":"api/endpoints/relationships/#request-body","title":"Request Body","text":"<pre><code>{\n  \"from_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"to_id\": \"660f9500-f30c-52e5-b827-557766551111\",\n  \"relationship_type\": \"supports\",\n  \"direction_type\": \"DIRECTED\",\n  \"strength\": 0.8,\n  \"confidence\": 0.9,\n  \"evidence\": {\n    \"reason\": \"Both discuss async patterns\",\n    \"source\": \"manual_connection\"\n  }\n}\n</code></pre>"},{"location":"api/endpoints/relationships/#request-fields","title":"Request Fields","text":"Field Type Required Default Description <code>from_id</code> UUID Yes - Source memory ID <code>to_id</code> UUID Yes - Target memory ID <code>relationship_type</code> string Yes - Type of relationship (see Relationship Types) <code>direction_type</code> string No <code>\"DIRECTED\"</code> Direction handling (see Direction Types) <code>inverse_type</code> string No - Inverse relationship type (for <code>INVERSE_PAIRED</code>) <code>strength</code> float No <code>0.5</code> Relationship strength (0.0-1.0) <code>confidence</code> float No <code>0.8</code> Confidence in relationship (0.0-1.0) <code>evidence</code> object No <code>{}</code> Supporting evidence/reasoning <code>traversal_properties</code> object No <code>{}</code> Properties for graph algorithms"},{"location":"api/endpoints/relationships/#direction-types","title":"Direction Types","text":"Type Description <code>DIRECTED</code> One-way relationship (A \u2192 B) <code>BIDIRECTIONAL</code> Single relationship queryable both ways <code>INVERSE_PAIRED</code> Creates two relationships with inverse types (requires <code>inverse_type</code>)"},{"location":"api/endpoints/relationships/#response","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"from_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"to_id\": \"660f9500-f30c-52e5-b827-557766551111\",\n    \"relationship_type\": \"supports\",\n    \"direction_type\": \"DIRECTED\",\n    \"strength\": 0.8,\n    \"confidence\": 0.9,\n    \"evidence\": {\"reason\": \"Both discuss async patterns\"},\n    \"metadata\": {},\n    \"created_at\": \"2025-01-06T12:00:00.000Z\",\n    \"updated_at\": \"2025-01-06T12:00:00.000Z\"\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/relationships/#errors","title":"Errors","text":"Status Code Description 422 <code>VAL_VALIDATION_FAILED</code> Invalid relationship data 422 <code>VAL_FIELD_REQUIRED</code> <code>inverse_type</code> required for <code>INVERSE_PAIRED</code> 404 <code>RES_NOT_FOUND</code> Source or target memory not found 409 <code>RES_ALREADY_EXISTS</code> Relationship already exists"},{"location":"api/endpoints/relationships/#example","title":"Example","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/relationships \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"from_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"to_id\": \"660f9500-f30c-52e5-b827-557766551111\",\n  \"relationship_type\": \"supports\",\n  \"strength\": 0.8\n}'\n</code></pre>"},{"location":"api/endpoints/relationships/#get-relationship","title":"Get Relationship","text":"<p>Retrieve a specific relationship by ID.</p> <pre><code>GET https://api.penfield.app/api/v2/relationships/{relationship_id}\n</code></pre>"},{"location":"api/endpoints/relationships/#path-parameters","title":"Path Parameters","text":"Parameter Type Description <code>relationship_id</code> UUID Relationship identifier"},{"location":"api/endpoints/relationships/#response_1","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"from_id\": \"memory-uuid-1\",\n    \"to_id\": \"memory-uuid-2\",\n    \"relationship_type\": \"supports\",\n    \"direction_type\": \"DIRECTED\",\n    \"strength\": 0.8,\n    \"confidence\": 0.9,\n    \"evidence\": {},\n    \"metadata\": {},\n    \"created_at\": \"2025-01-06T12:00:00.000Z\",\n    \"updated_at\": \"2025-01-06T12:00:00.000Z\"\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/relationships/#list-relationships","title":"List Relationships","text":"<p>List relationships with optional filters.</p> <pre><code>GET https://api.penfield.app/api/v2/relationships\n</code></pre>"},{"location":"api/endpoints/relationships/#query-parameters","title":"Query Parameters","text":"Parameter Type Description <code>from_id</code> UUID Filter by source memory <code>to_id</code> UUID Filter by target memory <code>memory_id</code> UUID Filter by either source or target <code>relationship_type</code> string Filter by type <code>page</code> integer Page number (default 1) <code>per_page</code> integer Items per page (default 20, max 100)"},{"location":"api/endpoints/relationships/#response_2","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"items\": [\n      {\n        \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"from_id\": \"memory-uuid-1\",\n        \"to_id\": \"memory-uuid-2\",\n        \"relationship_type\": \"supports\",\n        \"strength\": 0.8,\n        \"confidence\": 0.9,\n        \"evidence\": {},\n        \"metadata\": {},\n        \"created_at\": \"2025-01-06T12:00:00.000Z\",\n        \"updated_at\": \"2025-01-06T12:00:00.000Z\"\n      }\n    ],\n    \"pagination\": {\n      \"page\": 1,\n      \"per_page\": 20,\n      \"total\": 45,\n      \"pages\": 3,\n      \"has_next\": true,\n      \"has_prev\": false\n    }\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/relationships/#example_1","title":"Example","text":"<pre><code># Get all relationships for a specific memory\ncurl -X GET \"https://api.penfield.app/api/v2/relationships?memory_id=550e8400-e29b-41d4-a716-446655440000\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/endpoints/relationships/#update-relationship","title":"Update Relationship","text":"<p>Update relationship properties.</p> <pre><code>PATCH /api/v2/relationships/{relationship_id}\n</code></pre>"},{"location":"api/endpoints/relationships/#request-body_1","title":"Request Body","text":"<pre><code>{\n  \"strength\": 0.9,\n  \"confidence\": 0.95,\n  \"evidence\": {\n    \"reason\": \"Updated based on new findings\"\n  }\n}\n</code></pre>"},{"location":"api/endpoints/relationships/#updatable-fields","title":"Updatable Fields","text":"Field Type Description <code>strength</code> float New strength (0.0-1.0) <code>confidence</code> float New confidence (0.0-1.0) <code>evidence</code> object New evidence"},{"location":"api/endpoints/relationships/#response_3","title":"Response","text":"<p>Returns the updated relationship.</p>"},{"location":"api/endpoints/relationships/#delete-relationship","title":"Delete Relationship","text":"<p>Delete a relationship by ID.</p> <pre><code>DELETE https://api.penfield.app/api/v2/relationships/{relationship_id}\n</code></pre>"},{"location":"api/endpoints/relationships/#response_4","title":"Response","text":"<pre><code>HTTP 204 No Content\n</code></pre>"},{"location":"api/endpoints/relationships/#notes","title":"Notes","text":"<ul> <li>For <code>INVERSE_PAIRED</code> relationships, you need to delete both relationships separately</li> <li>Deleting a relationship does not affect the connected memories</li> </ul>"},{"location":"api/endpoints/relationships/#delete-relationship-between-memories","title":"Delete Relationship Between Memories","text":"<p>Delete the relationship between two specific memories.</p> <pre><code>DELETE https://api.penfield.app/api/v2/relationships/between?from_id={from_id}&amp;to_id={to_id}\n</code></pre>"},{"location":"api/endpoints/relationships/#query-parameters_1","title":"Query Parameters","text":"Parameter Type Required Description <code>from_id</code> UUID Yes Source memory ID <code>to_id</code> UUID Yes Target memory ID"},{"location":"api/endpoints/relationships/#response_5","title":"Response","text":"<pre><code>HTTP 204 No Content\n</code></pre>"},{"location":"api/endpoints/relationships/#errors_1","title":"Errors","text":"Status Code Description 404 <code>RES_NOT_FOUND</code> No relationship exists between these memories"},{"location":"api/endpoints/relationships/#bulk-create-relationships","title":"Bulk Create Relationships","text":"<p>Create multiple relationships in a single transaction.</p> <pre><code>POST https://api.penfield.app/api/v2/relationships/bulk\n</code></pre>"},{"location":"api/endpoints/relationships/#request-body_2","title":"Request Body","text":"<pre><code>[\n  {\n    \"from_id\": \"memory-uuid-1\",\n    \"to_id\": \"memory-uuid-2\",\n    \"relationship_type\": \"supports\",\n    \"strength\": 0.8\n  },\n  {\n    \"from_id\": \"memory-uuid-2\",\n    \"to_id\": \"memory-uuid-3\",\n    \"relationship_type\": \"follows\",\n    \"strength\": 0.9\n  }\n]\n</code></pre>"},{"location":"api/endpoints/relationships/#response_6","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"created\": [\n      {\"id\": \"550e8400-e29b-41d4-a716-446655440000\", ...},\n      {\"id\": \"660f9500-f30c-52e5-b827-557766551111\", ...}\n    ],\n    \"updated\": [],\n    \"deleted\": [],\n    \"errors\": []\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/relationships/#notes_1","title":"Notes","text":"<ul> <li>All relationships must succeed or all are rolled back</li> <li>Use for creating complex relationship patterns efficiently</li> </ul>"},{"location":"api/endpoints/relationships/#graph-traversal","title":"Graph Traversal","text":"<p>Traverse the knowledge graph starting from a memory.</p> <pre><code>POST https://api.penfield.app/api/v2/relationships/traverse\n</code></pre>"},{"location":"api/endpoints/relationships/#request-body_3","title":"Request Body","text":"<pre><code>{\n  \"start_memory_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"max_depth\": 3,\n  \"direction\": \"OUTBOUND\",\n  \"relationship_types\": [\"supports\", \"references\"],\n  \"include_scores\": true\n}\n</code></pre>"},{"location":"api/endpoints/relationships/#request-fields_1","title":"Request Fields","text":"Field Type Default Description <code>start_memory_id</code> UUID required Starting memory for traversal <code>max_depth</code> integer <code>3</code> Maximum traversal depth (1-10) <code>direction</code> string <code>\"ANY\"</code> Traversal direction: <code>OUTBOUND</code>, <code>INBOUND</code>, <code>ANY</code> <code>relationship_types</code> array - Filter by relationship types <code>include_scores</code> boolean <code>true</code> Include path scores"},{"location":"api/endpoints/relationships/#response_7","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"paths\": [\n      {\n        \"nodes\": [\n          \"550e8400-e29b-41d4-a716-446655440000\",\n          \"660f9500-f30c-52e5-b827-557766551111\"\n        ],\n        \"relationships\": [\n          \"770e8400-e29b-41d4-a716-446655440002\"\n        ],\n        \"total_score\": 0.4,\n        \"path_metadata\": {\n          \"depth\": 1,\n          \"start_node\": \"550e8400-e29b-41d4-a716-446655440000\",\n          \"direction\": \"ANY\"\n        }\n      }\n    ],\n    \"visited_chunks\": [\n      \"550e8400-e29b-41d4-a716-446655440000\",\n      \"660f9500-f30c-52e5-b827-557766551111\"\n    ],\n    \"max_depth_reached\": 2,\n    \"total_paths_found\": 8\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/relationships/#response-fields","title":"Response Fields","text":"Field Description <code>paths</code> Array of paths found during traversal <code>paths[].nodes</code> Array of memory UUIDs in the path <code>paths[].relationships</code> Array of relationship UUIDs connecting the nodes <code>paths[].total_score</code> Combined score for the path <code>paths[].path_metadata</code> Metadata about the path <code>visited_chunks</code> Array of all memory UUIDs visited during traversal <code>max_depth_reached</code> Actual maximum depth traversed <code>total_paths_found</code> Total number of paths discovered"},{"location":"api/endpoints/relationships/#traversal-directions","title":"Traversal Directions","text":"Direction Description <code>OUTBOUND</code> Follow relationships from source to target <code>INBOUND</code> Follow relationships from target to source <code>ANY</code> Follow relationships in either direction"},{"location":"api/endpoints/relationships/#relationship-types","title":"Relationship Types","text":"<p>All 24 relationship types are working as of 2026-01-22.</p>"},{"location":"api/endpoints/relationships/#knowledge-evolution","title":"Knowledge Evolution","text":"Type Description Example <code>supersedes</code> Completely replaces old understanding \"New policy supersedes old\" <code>updates</code> Partially modifies existing knowledge \"Correction updates fact\" <code>evolution_of</code> Developed from earlier concept \"V2 is evolution of V1\""},{"location":"api/endpoints/relationships/#evidence-support","title":"Evidence &amp; Support","text":"Type Description Example <code>supports</code> Provides evidence for claim/hypothesis \"Study supports hypothesis\" <code>contradicts</code> Challenges existing belief \"New finding contradicts theory\" <code>disputes</code> Disagrees with perspective \"Alternative view disputes claim\""},{"location":"api/endpoints/relationships/#hierarchy-structure","title":"Hierarchy &amp; Structure","text":"Type Description Example <code>parent_of</code> Encompasses more specific concept \"Category parent of item\" <code>child_of</code> Is subset of broader concept \"Specific child of general\" <code>sibling_of</code> Parallels related concept at same level \"Option A sibling of Option B\" <code>composed_of</code> Contains component parts \"System composed of modules\" <code>part_of</code> Belongs to larger structure \"Module part of system\""},{"location":"api/endpoints/relationships/#cause-prerequisites","title":"Cause &amp; Prerequisites","text":"Type Description Example <code>causes</code> Leads to effect/outcome \"Action causes result\" <code>influenced_by</code> Shaped by contributing factor \"Decision influenced by factor\" <code>prerequisite_for</code> Required for next concept \"Step A prerequisite for Step B\""},{"location":"api/endpoints/relationships/#implementation-testing","title":"Implementation &amp; Testing","text":"Type Description Example <code>implements</code> Applies theoretical concept \"Code implements algorithm\" <code>documents</code> Describes system/process \"Doc documents API\" <code>tests</code> Verifies or validates \"Test suite tests implementation\" <code>example_of</code> Demonstrates general principle \"Case example of pattern\""},{"location":"api/endpoints/relationships/#conversation-attribution","title":"Conversation &amp; Attribution","text":"Type Description Example <code>responds_to</code> Response to previous statement \"Reply responds to question\" <code>references</code> Refers to or cites \"Doc references specification\" <code>inspired_by</code> Inspired or motivated by \"Design inspired by nature\""},{"location":"api/endpoints/relationships/#sequence-flow","title":"Sequence &amp; Flow","text":"Type Description Example <code>follows</code> Comes after previous step \"Step 2 follows Step 1\" <code>precedes</code> Comes before next step \"Setup precedes execution\""},{"location":"api/endpoints/relationships/#dependencies","title":"Dependencies","text":"Type Description Example <code>depends_on</code> Requires prerequisite \"Feature depends on library\""},{"location":"api/endpoints/relationships/#complete-list-24","title":"Complete List (24)","text":"<ol> <li>supersedes | 7. parent_of | 13. implements | 19. inspired_by</li> <li>updates | 8. child_of | 14. documents | 20. follows</li> <li>evolution_of | 9. sibling_of | 15. tests | 21. precedes</li> <li>supports | 10. causes | 16. example_of | 22. depends_on</li> <li>contradicts | 11. influenced_by | 17. responds_to | 23. composed_of</li> <li>disputes | 12. prerequisite_for | 18. references | 24. part_of</li> </ol>"},{"location":"api/endpoints/search/","title":"Search Endpoints","text":"<p>Penfield provides powerful hybrid search combining text matching, semantic similarity, and knowledge graph traversal.</p>"},{"location":"api/endpoints/search/#hybrid-search","title":"Hybrid Search","text":"<p>Perform comprehensive search combining BM25, vector similarity, and graph expansion.</p> <pre><code>POST https://api.penfield.app/api/v2/search/hybrid\n</code></pre>"},{"location":"api/endpoints/search/#headers","title":"Headers","text":"Header Required Description <code>Authorization</code> Yes <code>Bearer YOUR_JWT_TOKEN</code> <code>Content-Type</code> Yes <code>application/json</code>"},{"location":"api/endpoints/search/#request-body","title":"Request Body","text":"<pre><code>{\n  \"query\": \"Python async programming best practices\",\n  \"limit\": 20,\n  \"bm25_weight\": 0.4,\n  \"vector_weight\": 0.4,\n  \"graph_weight\": 0.2,\n  \"memory_types\": [\"fact\", \"insight\"],\n  \"importance_threshold\": 0.5,\n  \"enable_graph_expansion\": true,\n  \"graph_max_depth\": 2,\n  \"include_neighbors\": 2\n}\n</code></pre>"},{"location":"api/endpoints/search/#request-fields","title":"Request Fields","text":"Field Type Default Description <code>query</code> string required Search query (1-4,000 characters) <code>limit</code> integer <code>20</code> Maximum results (1-100) <code>bm25_weight</code> float <code>0.4</code> BM25 text search weight (0-1) <code>vector_weight</code> float <code>0.4</code> Vector similarity weight (0-1) <code>graph_weight</code> float <code>0.2</code> Graph expansion weight (0-1) <code>memory_types</code> array - Filter by memory types <code>source_types</code> array - Filter by source types: <code>[\"direct_input\"]</code>, <code>[\"document_upload\"]</code>, etc. (See SourceType values) <code>importance_threshold</code> float - Minimum importance (0-1) <code>enable_graph_expansion</code> boolean <code>true</code> Enable knowledge graph expansion <code>graph_max_depth</code> integer <code>2</code> Max graph traversal depth (1-5) <code>graph_seed_limit</code> integer <code>10</code> Top results for graph seeds (1-50) <code>rrf_k</code> integer <code>60</code> RRF (Reciprocal Rank Fusion) constant (1-100). RRF is the algorithm that combines BM25, vector, and graph scores into a single ranking. Higher values produce more balanced fusion across search types; lower values favor top-ranked results more aggressively. <code>min_score_threshold</code> float - Minimum final score <code>include_neighbors</code> integer <code>2</code> Neighboring chunks for document results (0-20) <code>tags</code> string - Comma-separated tags to filter by (OR logic - memories with ANY of these tags). Example: <code>\"python,async,programming\"</code> <code>start_date</code> string - Filter memories created on or after this date (ISO 8601: <code>\"2025-01-01\"</code> or <code>\"2025-01-01T00:00:00Z\"</code>) <code>end_date</code> string - Filter memories created on or before this date (ISO 8601: <code>\"2025-01-09\"</code> or <code>\"2025-01-09T23:59:59Z\"</code>)"},{"location":"api/endpoints/search/#weight-constraint","title":"Weight Constraint","text":"<p>Weights must sum to 1.0: <code>bm25_weight + vector_weight + graph_weight = 1.0</code></p>"},{"location":"api/endpoints/search/#sourcetype-values","title":"SourceType Values","text":"<p>The <code>source_types</code> field accepts an array of source type strings:</p> Value Description <code>direct_input</code> Memories created directly via API or MCP <code>document_upload</code> Content from uploaded documents <code>web_scrape</code> Content scraped from web sources <code>api_import</code> Imported via API integration <code>conversation</code> Captured from conversations <code>reflection</code> Generated through reflection/analysis <code>checkpoint</code> Created as session checkpoints <code>checkpoint_recall</code> Restored from checkpoints <p>Example: <pre><code>{\n  \"query\": \"search text\",\n  \"source_types\": [\"direct_input\", \"conversation\"]\n}\n</code></pre></p>"},{"location":"api/endpoints/search/#response","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"items\": [\n      {\n        \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"content\": \"Python async programming uses asyncio...\",\n        \"snippet\": \"Python async programming uses asyncio for concurrent...\",\n        \"score\": 0.95,\n        \"score_breakdown\": {\n          \"final_score\": 0.95,\n          \"bm25_score\": 0.85,\n          \"vector_score\": 0.92,\n          \"graph_score\": 0.7,\n          \"rank_bm25\": 1.0,\n          \"rank_vector\": 2.0\n        },\n        \"metadata\": {\n          \"memory_type\": \"fact\",\n          \"importance\": 0.8,\n          \"highlight\": null,\n          \"graph_context\": {\n            \"relationships\": [\n              {\n                \"to_id\": \"...\",\n                \"type\": \"supports\",\n                \"strength\": 0.8\n              }\n            ],\n            \"relationship_count\": 3\n          }\n        },\n        \"source_type\": \"direct_input\",\n        \"created_at\": \"2025-01-06T12:00:00.000Z\",\n        \"content_with_context\": \"...\",\n        \"chunk_index\": 0,\n        \"total_chunks\": 1\n      }\n    ],\n    \"query\": \"Python async programming best practices\",\n    \"analyzed_query\": {\n      \"original\": \"Python async programming best practices\",\n      \"search_type\": \"hybrid\",\n      \"weights\": {\n        \"bm25\": 0.4,\n        \"vector\": 0.4,\n        \"graph\": 0.2\n      },\n      \"graph_expansion_enabled\": true\n    },\n    \"search_metadata\": {\n      \"search_method\": \"hybrid\",\n      \"results_count\": 20,\n      \"stats\": {\n        \"search_time_ms\": 45,\n        \"bm25_time_ms\": 12,\n        \"vector_time_ms\": 15,\n        \"graph_time_ms\": 10,\n        \"fusion_time_ms\": 3,\n        \"bm25_count\": 40,\n        \"vector_count\": 40,\n        \"graph_count\": 15,\n        \"final_count\": 20\n      },\n      \"knowledge_cloud\": {\n        \"nodes\": [...],\n        \"edges\": [...],\n        \"stats\": {\n          \"seed_count\": 5,\n          \"cloud_count\": 12,\n          \"edge_count\": 15\n        }\n      }\n    }\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/search/#response-fields","title":"Response Fields","text":"Field Description <code>items[].id</code> Memory UUID <code>items[].content</code> Full memory content <code>items[].snippet</code> Truncated content (~200 chars) <code>items[].score</code> Combined relevance score <code>items[].score_breakdown</code> Individual component scores <code>items[].content_with_context</code> Document chunks with neighbors (if applicable) <code>items[].chunk_index</code> Position in parent document (if from document) <code>items[].total_chunks</code> Total chunks in parent document <code>search_metadata.stats</code> Performance timing data <code>search_metadata.knowledge_cloud</code> Graph visualization data"},{"location":"api/endpoints/search/#knowledge-cloud","title":"Knowledge Cloud","text":"<p>When <code>enable_graph_expansion</code> is true, the response includes <code>knowledge_cloud</code> data for building graph visualizations. See the response example above for the structure.</p>"},{"location":"api/endpoints/search/#errors","title":"Errors","text":"Status Code Description 422 <code>VAL_VALIDATION_FAILED</code> Weights don't sum to 1.0 422 <code>VAL_FIELD_REQUIRED</code> Missing query"},{"location":"api/endpoints/search/#examples","title":"Examples","text":"<p>Basic search with filters: <pre><code>curl -X POST https://api.penfield.app/api/v2/search/hybrid \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"query\": \"machine learning best practices\",\n  \"limit\": 10,\n  \"memory_types\": [\"fact\", \"insight\"],\n  \"importance_threshold\": 0.6\n}'\n</code></pre></p> <p>Search with tags and date range: <pre><code>curl -X POST https://api.penfield.app/api/v2/search/hybrid \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"query\": \"API development\",\n  \"limit\": 20,\n  \"tags\": \"python,api,backend\",\n  \"start_date\": \"2025-01-01\",\n  \"end_date\": \"2025-01-31\"\n}'\n</code></pre></p> <p>Note: Tags use OR logic - returns memories with ANY of the specified tags.</p>"},{"location":"api/endpoints/search/#vector-search","title":"Vector Search","text":"<p>Perform pure vector similarity search (for advanced use cases).</p> <pre><code>POST https://api.penfield.app/api/v2/search/vector\n</code></pre>"},{"location":"api/endpoints/search/#headers_1","title":"Headers","text":"Header Required Description <code>Authorization</code> Yes <code>Bearer YOUR_JWT_TOKEN</code> <code>Content-Type</code> Yes <code>application/json</code>"},{"location":"api/endpoints/search/#request-body_1","title":"Request Body","text":"<pre><code>{\n  \"query\": \"semantic meaning of async programming\",\n  \"limit\": 20,\n  \"filters\": {\n    \"memory_types\": [\"fact\"],\n    \"min_importance\": 0.5\n  },\n  \"include_neighbors\": 2,\n  \"tags\": \"python,async\"\n}\n</code></pre>"},{"location":"api/endpoints/search/#request-fields_1","title":"Request Fields","text":"Field Type Default Description <code>query</code> string required Search query (1-4,000 characters) <code>limit</code> integer <code>20</code> Maximum results (1-100) <code>filters</code> object - Search filters (see below) <code>include_neighbors</code> integer <code>2</code> Neighboring chunks for document results (0-20) <code>tags</code> string - Comma-separated tags (OR logic)"},{"location":"api/endpoints/search/#filters-object","title":"Filters Object","text":"Field Type Description <code>memory_types</code> array Filter by memory types <code>min_importance</code> float Minimum importance (0-1) <code>user_id</code> UUID Filter by user ID"},{"location":"api/endpoints/search/#response_1","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"items\": [\n      {\n        \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"content\": \"Python async programming uses asyncio...\",\n        \"snippet\": \"Python async programming uses asyncio for concurrent...\",\n        \"score\": 0.95,\n        \"score_breakdown\": {\n          \"vector_similarity\": 0.95\n        },\n        \"metadata\": {\n          \"memory_type\": \"fact\",\n          \"importance\": 0.8,\n          \"confidence\": 0.9,\n          \"source_type\": \"direct_input\",\n          \"user_id\": \"user-uuid\",\n          \"created_at\": \"2025-01-06T12:00:00.000Z\",\n          \"updated_at\": \"2025-01-06T12:00:00.000Z\"\n        },\n        \"source_type\": \"direct_input\",\n        \"created_at\": \"2025-01-06T12:00:00.000Z\",\n        \"tags\": [\"python\", \"async\"],\n        \"content_with_context\": \"...\",\n        \"chunk_index\": 0,\n        \"total_chunks\": 1\n      }\n    ],\n    \"query\": \"semantic meaning of async programming\",\n    \"analyzed_query\": {\n      \"original\": \"semantic meaning of async programming\",\n      \"embedding_generated\": true,\n      \"filters_applied\": true,\n      \"search_type\": \"vector_similarity\",\n      \"include_neighbors\": 2\n    },\n    \"search_metadata\": {\n      \"search_method\": \"vector_similarity\",\n      \"results_count\": 20,\n      \"max_results\": 20,\n      \"include_neighbors\": 2\n    }\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/search/#response-fields_1","title":"Response Fields","text":"Field Description <code>items[].id</code> Memory UUID <code>items[].content</code> Full memory content <code>items[].snippet</code> Truncated content (~200 chars) <code>items[].score</code> Vector similarity score (0-1) <code>items[].score_breakdown.vector_similarity</code> Same as score (for consistency) <code>items[].metadata</code> Memory metadata (type, importance, etc.) <code>items[].tags</code> Array of tag names <code>items[].content_with_context</code> Document chunks with neighbors (if applicable) <code>items[].chunk_index</code> Position in parent document <code>items[].total_chunks</code> Total chunks in parent document <code>analyzed_query.embedding_generated</code> Whether query was embedded <code>analyzed_query.filters_applied</code> Whether filters were used <code>analyzed_query.search_type</code> Always \"vector_similarity\" <code>search_metadata.search_method</code> Always \"vector_similarity\" <code>search_metadata.include_neighbors</code> Number of neighbors included"},{"location":"api/endpoints/search/#comparison-hybrid-vs-vector-search","title":"Comparison: Hybrid vs Vector Search","text":"<p>Understanding when to use each search type:</p> Feature Hybrid Search Vector Search Search Methods BM25 + Vector + Graph Vector only Use Case General search, best quality Semantic similarity Latency Higher (3 methods + fusion) Lower (1 method) score_breakdown <code>bm25_score</code>, <code>vector_score</code>, <code>graph_score</code>, <code>final_score</code>, <code>rank_vector</code> <code>vector_similarity</code> only Graph Expansion Optional (enabled by default) Not available Knowledge Cloud Included in response Not included Timing Stats Detailed breakdown Simple count Best For Finding relevant context Finding similar concepts"},{"location":"api/endpoints/search/#score_breakdown-field-differences","title":"score_breakdown Field Differences","text":"<p>Hybrid Search: <pre><code>{\n  \"final_score\": 0.95,\n  \"bm25_score\": 0.85,\n  \"vector_score\": 0.92,\n  \"graph_score\": 0.7,\n  \"rank_vector\": 2.0\n}\n</code></pre></p> <p>Vector Search: <pre><code>{\n  \"vector_similarity\": 0.95\n}\n</code></pre></p> <p>Vector search returns only the similarity score since it uses a single search method (no fusion needed).</p>"},{"location":"api/endpoints/search/#examples_1","title":"Examples","text":"<p>Basic vector search: <pre><code>curl -X POST https://api.penfield.app/api/v2/search/vector \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"query\": \"machine learning concepts\",\n  \"limit\": 10\n}'\n</code></pre></p> <p>Vector search with filters: <pre><code>curl -X POST https://api.penfield.app/api/v2/search/vector \\\n-d '{\n  \"query\": \"async patterns\",\n  \"limit\": 20,\n  \"filters\": {\n    \"memory_types\": [\"fact\", \"insight\"],\n    \"min_importance\": 0.6\n  },\n  \"tags\": \"python,async\"\n}'\n</code></pre></p>"},{"location":"api/endpoints/search/#notes","title":"Notes","text":"<ul> <li>Uses semantic similarity only (no BM25 or graph)</li> <li>Best for finding conceptually similar content</li> <li>Lower latency than hybrid search</li> <li>No RRF fusion needed (single ranking method)</li> <li>Returns simpler score_breakdown structure</li> </ul>"},{"location":"api/endpoints/search/#search-stats","title":"Search Stats","text":"<p>Get statistics about your searchable content. Returns counts of memories, documents, and relationships, along with embedding coverage.</p> <pre><code>GET https://api.penfield.app/api/v2/search/stats\n</code></pre>"},{"location":"api/endpoints/search/#headers_2","title":"Headers","text":"Header Required Description <code>Authorization</code> Yes <code>Bearer YOUR_JWT_TOKEN</code>"},{"location":"api/endpoints/search/#response_2","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"total_memories\": 73,\n    \"total_documents\": 1,\n    \"total_relationships\": 54,\n    \"embedding_coverage\": 0.92,\n    \"last_indexed\": \"2025-01-06T12:00:00.000Z\"\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/search/#response-fields_2","title":"Response Fields","text":"Field Type Description <code>total_memories</code> integer Total number of memories stored <code>total_documents</code> integer Total number of uploaded documents <code>total_relationships</code> integer Total number of relationships between memories <code>embedding_coverage</code> float Fraction of memories with completed embeddings (0-1) <code>last_indexed</code> string ISO 8601 timestamp of the most recently indexed memory"},{"location":"api/endpoints/search/#example","title":"Example","text":"<pre><code>curl -X GET https://api.penfield.app/api/v2/search/stats \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/endpoints/search/#notes_1","title":"Notes","text":"<ul> <li>All counts are scoped to your tenant</li> <li><code>embedding_coverage</code> indicates what percentage of your memories are searchable via vector similarity</li> <li>A coverage below 1.0 means some memories are still pending embedding or had embedding failures</li> </ul>"},{"location":"api/endpoints/search/#search-tips","title":"Search Tips","text":""},{"location":"api/endpoints/search/#optimize-for-speed","title":"Optimize for Speed","text":"<ul> <li>Reduce <code>limit</code> to minimum needed</li> <li>Disable graph expansion for simple queries: <code>\"enable_graph_expansion\": false</code></li> <li>Use filters to narrow search space</li> <li>Lower <code>graph_max_depth</code> (1-2 is usually sufficient)</li> </ul>"},{"location":"api/endpoints/search/#optimize-for-quality","title":"Optimize for Quality","text":"<ul> <li>Use hybrid search (default) for best results</li> <li>Increase <code>graph_seed_limit</code> for more graph context</li> <li>Set appropriate <code>importance_threshold</code> to filter low-quality matches</li> <li>Use <code>memory_types</code> filter when you know what you're looking for</li> </ul>"},{"location":"api/endpoints/search/#query-writing","title":"Query Writing","text":"<ul> <li>Be specific: \"Python asyncio error handling\" &gt; \"Python errors\"</li> <li>Include context: \"machine learning for image classification\"</li> <li>Use natural language: The vector search understands semantics</li> </ul>"},{"location":"api/endpoints/tags/","title":"Tags Endpoints","text":"<p>Organize memories with tags for easier discovery and filtering.</p>"},{"location":"api/endpoints/tags/#add-tags-to-memory","title":"Add Tags to Memory","text":"<p>Add one or more tags to a memory.</p> <pre><code>POST https://api.penfield.app/api/v2/memories/{memory_id}/tags\n</code></pre>"},{"location":"api/endpoints/tags/#headers","title":"Headers","text":"Header Required Description <code>Authorization</code> Yes <code>Bearer YOUR_JWT_TOKEN</code> <code>Content-Type</code> Yes <code>application/json</code>"},{"location":"api/endpoints/tags/#path-parameters","title":"Path Parameters","text":"Parameter Type Description <code>memory_id</code> UUID Memory identifier"},{"location":"api/endpoints/tags/#request-body","title":"Request Body","text":"<pre><code>{\n  \"tags\": [\"python\", \"async\", \"best-practices\"]\n}\n</code></pre>"},{"location":"api/endpoints/tags/#request-fields","title":"Request Fields","text":"Field Type Required Description <code>tags</code> array Yes Tags to add (max 10 total per memory)"},{"location":"api/endpoints/tags/#tag-normalization","title":"Tag Normalization","text":"<p>Tags are automatically normalized: - Converted to lowercase - Spaces and underscores replaced with hyphens - Invalid characters removed</p> Input Normalized <code>\"Python\"</code> <code>\"python\"</code> <code>\"Best Practices\"</code> <code>\"best-practices\"</code> <code>\"async_await\"</code> <code>\"async-await\"</code>"},{"location":"api/endpoints/tags/#response","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"memory_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"tags\": [\"python\", \"async\", \"best-practices\"],\n    \"warnings\": null\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/tags/#response-fields","title":"Response Fields","text":"Field Description <code>memory_id</code> The memory identifier <code>tags</code> Complete list of tags now on the memory <code>warnings</code> Array of warning messages, or null if none"},{"location":"api/endpoints/tags/#errors","title":"Errors","text":"Status Code Description 404 <code>RES_NOT_FOUND</code> Memory not found 422 <code>VAL_VALIDATION_FAILED</code> Would exceed 10 tags per memory"},{"location":"api/endpoints/tags/#remove-tags-from-memory","title":"Remove Tags from Memory","text":"<p>Remove specific tags from a memory.</p> <pre><code>DELETE https://api.penfield.app/api/v2/memories/{memory_id}/tags\n</code></pre>"},{"location":"api/endpoints/tags/#request-body_1","title":"Request Body","text":"<pre><code>{\n  \"tags\": [\"best-practices\"]\n}\n</code></pre>"},{"location":"api/endpoints/tags/#response_1","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"memory_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"tags\": [\"python\", \"async\"],\n    \"warnings\": null\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/tags/#response-fields_1","title":"Response Fields","text":"Field Description <code>memory_id</code> The memory identifier <code>tags</code> Remaining tags after removal <code>warnings</code> Array of warning messages, or null"},{"location":"api/endpoints/tags/#get-memory-tags","title":"Get Memory Tags","text":"<p>Get all tags for a specific memory.</p> <pre><code>GET https://api.penfield.app/api/v2/memories/{memory_id}/tags\n</code></pre>"},{"location":"api/endpoints/tags/#response_2","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": [\"python\", \"async\", \"best-practices\"],\n  \"meta\": {...}\n}\n</code></pre> <p>Returns an array of tag names. Empty array if the memory has no tags.</p>"},{"location":"api/endpoints/tags/#list-all-tags","title":"List All Tags","text":"<p>List all tags with usage counts.</p> <pre><code>GET https://api.penfield.app/api/v2/tags\n</code></pre>"},{"location":"api/endpoints/tags/#response_3","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"items\": [\n      {\n        \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"name\": \"python\",\n        \"usage_count\": 45,\n        \"created_at\": \"2025-01-01T00:00:00.000Z\"\n      },\n      {\n        \"id\": \"660f9500-f30c-52e5-b827-557766551111\",\n        \"name\": \"javascript\",\n        \"usage_count\": 32,\n        \"created_at\": \"2025-01-02T00:00:00.000Z\"\n      },\n      {\n        \"id\": \"770e8400-e29b-41d4-a716-446655440002\",\n        \"name\": \"machine-learning\",\n        \"usage_count\": 28,\n        \"created_at\": \"2025-01-03T00:00:00.000Z\"\n      }\n    ],\n    \"total\": 156\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/tags/#notes","title":"Notes","text":"<ul> <li>Tags are sorted by usage count (most used first)</li> <li><code>usage_count</code> shows how many memories use each tag</li> <li>Tags with zero usage may be cleaned up periodically</li> </ul>"},{"location":"api/endpoints/tags/#get-memories-by-tag","title":"Get Memories by Tag","text":"<p>Get all memories with a specific tag (paginated).</p> <pre><code>GET https://api.penfield.app/api/v2/tags/{tag}/memories\n</code></pre>"},{"location":"api/endpoints/tags/#path-parameters_1","title":"Path Parameters","text":"Parameter Type Description <code>tag</code> string Tag name (normalized)"},{"location":"api/endpoints/tags/#query-parameters","title":"Query Parameters","text":"Parameter Type Default Description <code>page</code> integer <code>1</code> Page number (minimum 1) <code>per_page</code> integer <code>20</code> Results per page (1-100)"},{"location":"api/endpoints/tags/#response_4","title":"Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"items\": [\n      {\n        \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"content\": \"Python async programming uses asyncio...\",\n        \"memory_type\": \"fact\",\n        \"importance\": 0.8,\n        \"confidence\": 0.9,\n        \"created_at\": \"2025-01-01T00:00:00.000Z\",\n        \"tags\": [\"python\", \"async\"],\n        ...\n      }\n    ],\n    \"pagination\": {\n      \"page\": 1,\n      \"per_page\": 20,\n      \"total\": 45,\n      \"pages\": 3\n    }\n  },\n  \"meta\": {...}\n}\n</code></pre>"},{"location":"api/endpoints/tags/#response-fields_2","title":"Response Fields","text":"Field Description <code>items</code> Array of Memory objects with the specified tag <code>pagination</code> Pagination metadata (page, per_page, total, pages)"},{"location":"api/endpoints/tags/#notes_1","title":"Notes","text":"<ul> <li>Tag name is normalized before matching (lowercase, hyphens)</li> <li>Returns empty results (<code>items: []</code>, <code>total: 0</code>) for non-existent tags</li> <li>Memories are returned with full Memory schema</li> <li>Use pagination for large result sets</li> </ul>"},{"location":"api/endpoints/tags/#example","title":"Example","text":"<pre><code># Get first 10 memories tagged with \"python\"\ncurl -X GET \"https://api.penfield.app/api/v2/tags/python/memories?page=1&amp;per_page=10\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n\n# Get second page\ncurl -X GET \"https://api.penfield.app/api/v2/tags/python/memories?page=2&amp;per_page=10\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/endpoints/tags/#filtering-memories-by-tags","title":"Filtering Memories by Tags","text":"<p>Alternative: Use the memories list endpoint to filter by multiple tags:</p> <pre><code>GET https://api.penfield.app/api/v2/memories?tags=python,async\n</code></pre>"},{"location":"api/endpoints/tags/#tag-filter-behavior","title":"Tag Filter Behavior","text":"<ul> <li>Multiple tags use OR logic (memories matching ANY tag)</li> <li>Tags are normalized before matching</li> <li>Case-insensitive matching</li> </ul>"},{"location":"api/endpoints/tags/#example_1","title":"Example","text":"<pre><code># Get memories tagged with either \"python\" or \"javascript\"\ncurl -X GET \"https://api.penfield.app/api/v2/memories?tags=python,javascript\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/endpoints/tags/#best-practices","title":"Best Practices","text":""},{"location":"api/endpoints/tags/#tag-naming","title":"Tag Naming","text":"<ul> <li>Use lowercase and hyphens: <code>machine-learning</code> not <code>Machine Learning</code></li> <li>Be consistent: decide between <code>ml</code> and <code>machine-learning</code></li> <li>Use hierarchical tags: <code>python-async</code>, <code>python-testing</code></li> <li>Avoid overly specific tags: <code>my-project-v2-feature-x</code></li> </ul>"},{"location":"api/endpoints/tags/#tag-organization","title":"Tag Organization","text":"Category Example Tags Language <code>python</code>, <code>javascript</code>, <code>rust</code> Topic <code>machine-learning</code>, <code>web-dev</code>, <code>devops</code> Type <code>tutorial</code>, <code>reference</code>, <code>snippet</code> Status <code>verified</code>, <code>needs-review</code>, <code>deprecated</code> Project <code>project-alpha</code>, <code>project-beta</code>"},{"location":"api/endpoints/tags/#tag-limits","title":"Tag Limits","text":"Limit Value Max tags per memory 10 Max tag length 100 characters Allowed characters <code>a-z</code>, <code>0-9</code>, <code>-</code>"},{"location":"api/examples/curl/","title":"cURL Examples","text":"<p>Complete cURL examples for the Penfield API.</p>"},{"location":"api/examples/curl/#authentication","title":"Authentication","text":""},{"location":"api/examples/curl/#get-jwt-token","title":"Get JWT Token","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/auth/token \\\n-H \"Authorization: Bearer tm_your_tenant_ak_your_key\" \\\n-H \"Content-Type: application/json\"\n</code></pre>"},{"location":"api/examples/curl/#set-token-variable","title":"Set Token Variable","text":"<pre><code># Get token and save to variable (using python3 for JSON parsing)\nexport JWT_TOKEN=$(curl -s -X POST https://api.penfield.app/api/v2/auth/token \\\n-H \"Authorization: Bearer tm_your_tenant_ak_your_key\" \\\n-H \"Content-Type: application/json\" | python3 -c \"import sys,json; print(json.load(sys.stdin)['data']['access_token'])\")\n\necho \"Token: ${JWT_TOKEN:0:20}...\"\n\n# Alternative with jq (if installed)\n# export JWT_TOKEN=$(curl -s ... | jq -r '.data.access_token')\n</code></pre>"},{"location":"api/examples/curl/#verify-token","title":"Verify Token","text":"<pre><code>curl -X GET https://api.penfield.app/api/v2/auth/verify \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/examples/curl/#memories","title":"Memories","text":""},{"location":"api/examples/curl/#create-memory","title":"Create Memory","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/memories \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"content\": \"Python asyncio provides async/await syntax for concurrent programming\",\n  \"memory_type\": \"fact\",\n  \"importance\": 0.8,\n  \"tags\": [\"python\", \"async\", \"concurrency\"]\n}'\n</code></pre>"},{"location":"api/examples/curl/#get-memory","title":"Get Memory","text":"<pre><code>curl -X GET https://api.penfield.app/api/v2/memories/550e8400-e29b-41d4-a716-446655440000 \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/examples/curl/#list-memories","title":"List Memories","text":"<pre><code># Basic list\ncurl -X GET \"https://api.penfield.app/api/v2/memories\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n\n# With filters\ncurl -X GET \"https://api.penfield.app/api/v2/memories?memory_type=fact&amp;importance_threshold=0.7&amp;tags=python&amp;sort=-importance\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n\n# Pagination\ncurl -X GET \"https://api.penfield.app/api/v2/memories?page=2&amp;per_page=50\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/examples/curl/#update-memory","title":"Update Memory","text":"<pre><code>curl -X PUT https://api.penfield.app/api/v2/memories/550e8400-e29b-41d4-a716-446655440000 \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"importance\": 0.9,\n  \"metadata\": {\"verified\": true}\n}'\n</code></pre>"},{"location":"api/examples/curl/#delete-memory","title":"Delete Memory","text":"<pre><code>curl -X DELETE https://api.penfield.app/api/v2/memories/550e8400-e29b-41d4-a716-446655440000 \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/examples/curl/#search","title":"Search","text":""},{"location":"api/examples/curl/#hybrid-search","title":"Hybrid Search","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/search/hybrid \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"query\": \"Python async programming patterns\",\n  \"limit\": 10,\n  \"bm25_weight\": 0.4,\n  \"vector_weight\": 0.4,\n  \"graph_weight\": 0.2\n}'\n</code></pre>"},{"location":"api/examples/curl/#search-with-filters","title":"Search with Filters","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/search/hybrid \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"query\": \"machine learning\",\n  \"limit\": 20,\n  \"memory_types\": [\"fact\", \"insight\"],\n  \"importance_threshold\": 0.6,\n  \"enable_graph_expansion\": true,\n  \"graph_max_depth\": 2\n}'\n</code></pre>"},{"location":"api/examples/curl/#search-stats","title":"Search Stats","text":"<pre><code>curl -X GET https://api.penfield.app/api/v2/search/stats \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/examples/curl/#relationships","title":"Relationships","text":""},{"location":"api/examples/curl/#create-relationship","title":"Create Relationship","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/relationships \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"from_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"to_id\": \"660f9500-f30c-52e5-b827-557766551111\",\n  \"relationship_type\": \"supports\",\n  \"strength\": 0.8\n}'\n</code></pre>"},{"location":"api/examples/curl/#list-relationships","title":"List Relationships","text":"<pre><code># All relationships for a memory\ncurl -X GET \"https://api.penfield.app/api/v2/relationships?memory_id=550e8400-e29b-41d4-a716-446655440000\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n\n# Filter by type\ncurl -X GET \"https://api.penfield.app/api/v2/relationships?relationship_type=supports\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/examples/curl/#traverse-graph","title":"Traverse Graph","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/relationships/traverse \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"start_memory_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"max_depth\": 3,\n  \"direction\": \"OUTBOUND\"\n}'\n</code></pre>"},{"location":"api/examples/curl/#delete-relationship","title":"Delete Relationship","text":"<pre><code># By relationship ID\ncurl -X DELETE https://api.penfield.app/api/v2/relationships/550e8400-e29b-41d4-a716-446655440000 \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n\n# Between two memories\ncurl -X DELETE \"https://api.penfield.app/api/v2/relationships/between?from_id=uuid1&amp;to_id=uuid2\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/examples/curl/#documents","title":"Documents","text":""},{"location":"api/examples/curl/#upload-document","title":"Upload Document","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/documents/upload \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-F \"file=@/path/to/document.pdf\" \\\n-F 'metadata={\"project\": \"research\"}'\n</code></pre>"},{"location":"api/examples/curl/#list-documents","title":"List Documents","text":"<pre><code>curl -X GET \"https://api.penfield.app/api/v2/documents\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/examples/curl/#get-document","title":"Get Document","text":"<pre><code># Metadata only\ncurl -X GET https://api.penfield.app/api/v2/documents/550e8400-e29b-41d4-a716-446655440000 \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n\n# With chunks\ncurl -X GET \"https://api.penfield.app/api/v2/documents/550e8400-e29b-41d4-a716-446655440000?include_chunks=true\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/examples/curl/#download-document","title":"Download Document","text":"<pre><code>curl -X GET https://api.penfield.app/api/v2/documents/550e8400-e29b-41d4-a716-446655440000/download \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-o downloaded-file.pdf\n</code></pre>"},{"location":"api/examples/curl/#delete-document","title":"Delete Document","text":"<pre><code>curl -X DELETE https://api.penfield.app/api/v2/documents/550e8400-e29b-41d4-a716-446655440000 \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/examples/curl/#artifacts","title":"Artifacts","text":""},{"location":"api/examples/curl/#save-artifact","title":"Save Artifact","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/artifacts \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"path\": \"/notes/python-tips.md\",\n  \"content\": \"# Python Tips\\n\\n- Use list comprehensions\\n- Prefer generators\"\n}'\n</code></pre>"},{"location":"api/examples/curl/#get-artifact","title":"Get Artifact","text":"<pre><code>curl -X GET \"https://api.penfield.app/api/v2/artifacts?path=/notes/python-tips.md\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/examples/curl/#list-artifacts","title":"List Artifacts","text":"<pre><code># Root directory\ncurl -X GET \"https://api.penfield.app/api/v2/artifacts/list\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n\n# Specific directory\ncurl -X GET \"https://api.penfield.app/api/v2/artifacts/list?prefix=/notes\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/examples/curl/#delete-artifact","title":"Delete Artifact","text":"<pre><code>curl -X DELETE \"https://api.penfield.app/api/v2/artifacts?path=/notes/python-tips.md\" \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/examples/curl/#tags","title":"Tags","text":""},{"location":"api/examples/curl/#add-tags","title":"Add Tags","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/memories/550e8400-e29b-41d4-a716-446655440000/tags \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\"tags\": [\"python\", \"important\"]}'\n</code></pre>"},{"location":"api/examples/curl/#remove-tags","title":"Remove Tags","text":"<pre><code>curl -X DELETE https://api.penfield.app/api/v2/memories/550e8400-e29b-41d4-a716-446655440000/tags \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\"tags\": [\"deprecated\"]}'\n</code></pre>"},{"location":"api/examples/curl/#list-all-tags","title":"List All Tags","text":"<pre><code>curl -X GET https://api.penfield.app/api/v2/tags \\\n-H \"Authorization: Bearer $JWT_TOKEN\"\n</code></pre>"},{"location":"api/examples/curl/#analysis","title":"Analysis","text":""},{"location":"api/examples/curl/#reflect","title":"Reflect","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/analysis/reflect \\\n-H \"Authorization: Bearer $JWT_TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"time_window\": \"week\",\n  \"include_documents\": false\n}'\n</code></pre>"},{"location":"api/examples/curl/#utility-scripts","title":"Utility Scripts","text":""},{"location":"api/examples/curl/#complete-workflow-script","title":"Complete Workflow Script","text":"<pre><code>#!/bin/bash\n# penfield-demo.sh - Complete API workflow\n\nAPI_KEY=\"tm_your_tenant_ak_your_key\"\nBASE_URL=\"https://api.penfield.app\"\n\n# Helper function to parse JSON (works without jq)\njson_get() {\n  python3 -c \"import sys,json; print(json.load(sys.stdin)$1)\"\n}\n\n# Get token\necho \"Authenticating...\"\nRESPONSE=$(curl -s -X POST \"$BASE_URL/api/v2/auth/token\" \\\n-H \"Authorization: Bearer $API_KEY\" \\\n-H \"Content-Type: application/json\")\nTOKEN=$(echo \"$RESPONSE\" | json_get \"['data']['access_token']\")\n\nif [ -z \"$TOKEN\" ] || [ \"$TOKEN\" == \"None\" ]; then\n  echo \"Authentication failed\"\n  echo \"$RESPONSE\"\n  exit 1\nfi\necho \"Authenticated successfully\"\n\n# Create memory\necho \"Creating memory...\"\nMEMORY=$(curl -s -X POST \"$BASE_URL/api/v2/memories\" \\\n-H \"Authorization: Bearer $TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\"content\": \"Test memory from script\", \"memory_type\": \"fact\"}')\nMEMORY_ID=$(echo \"$MEMORY\" | json_get \"['data']['id']\")\necho \"Created memory: $MEMORY_ID\"\n\n# Search\necho \"Searching...\"\nRESULTS=$(curl -s -X POST \"$BASE_URL/api/v2/search/hybrid\" \\\n-H \"Authorization: Bearer $TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\"query\": \"test\", \"limit\": 5}')\nCOUNT=$(echo \"$RESULTS\" | json_get \"len(['data']['items'])\")\necho \"Found $COUNT results\"\n\n# Cleanup\necho \"Cleaning up...\"\ncurl -s -X DELETE \"$BASE_URL/api/v2/memories/$MEMORY_ID\" \\\n-H \"Authorization: Bearer $TOKEN\"\necho \"Done\"\n</code></pre>"},{"location":"api/examples/curl/#token-refresh-script","title":"Token Refresh Script","text":"<pre><code>#!/bin/bash\n# refresh-token.sh - Refresh expired token\n# Note: Requires a valid refresh_token from OAuth flow with offline_access scope\n\nREFRESH_TOKEN=\"your_refresh_token\"\nBASE_URL=\"https://api.penfield.app\"\n\nRESPONSE=$(curl -s -X POST \"$BASE_URL/api/v2/auth/refresh\" \\\n-H \"Content-Type: application/json\" \\\n-d \"{\\\"refresh_token\\\": \\\"$REFRESH_TOKEN\\\"}\")\n\nNEW_TOKEN=$(echo \"$RESPONSE\" | python3 -c \"import sys,json; print(json.load(sys.stdin)['data']['access_token'])\")\nNEW_REFRESH=$(echo \"$RESPONSE\" | python3 -c \"import sys,json; print(json.load(sys.stdin)['data'].get('refresh_token', ''))\")\n\necho \"New access token: ${NEW_TOKEN:0:20}...\"\nexport JWT_TOKEN=$NEW_TOKEN\n\n# Important: Save the new refresh token (tokens rotate per RFC 9700)\nif [ -n \"$NEW_REFRESH\" ]; then\n  echo \"New refresh token received (old one is now invalid)\"\n  export REFRESH_TOKEN=$NEW_REFRESH\nfi\n</code></pre>"},{"location":"api/examples/python/","title":"Python Examples","text":"<p>Complete Python examples for interacting with the Penfield API.</p>"},{"location":"api/examples/python/#setup","title":"Setup","text":""},{"location":"api/examples/python/#installation","title":"Installation","text":"<pre><code>pip install httpx  # or requests\n</code></pre>"},{"location":"api/examples/python/#client-class","title":"Client Class","text":"<pre><code>import httpx\nfrom typing import Optional, List, Dict, Any\nfrom datetime import datetime\n\n\nclass PenfieldClient:\n    \"\"\"Penfield API client with automatic token management.\"\"\"\n\n    def __init__(self, api_key: str, base_url: str = \"https://api.penfield.app\"):\n        self.api_key = api_key\n        self.base_url = base_url\n        self._token: Optional[str] = None\n        self._token_expires: Optional[datetime] = None\n        self._client = httpx.Client(timeout=30.0)\n\n    @property\n    def token(self) -&gt; str:\n        \"\"\"Get valid JWT token, refreshing if needed.\"\"\"\n        if self._token is None or self._is_token_expired():\n            self._authenticate()\n        return self._token\n\n    def _is_token_expired(self) -&gt; bool:\n        if self._token_expires is None:\n            return True\n        # Refresh 5 minutes before expiry\n        return datetime.utcnow() &gt;= self._token_expires\n\n    def _authenticate(self) -&gt; None:\n        \"\"\"Exchange API key for JWT token.\"\"\"\n        response = self._client.post(\n            f\"{self.base_url}/api/v2/auth/token\",\n            headers={\"Authorization\": f\"Bearer {self.api_key}\"}\n        )\n        response.raise_for_status()\n        data = response.json()[\"data\"]\n        self._token = data[\"access_token\"]\n        # Parse expiry (expires_in is seconds)\n        from datetime import timedelta\n        self._token_expires = datetime.utcnow() + timedelta(\n            seconds=data[\"expires_in\"] - 300  # 5 min buffer\n        )\n\n    def _headers(self) -&gt; Dict[str, str]:\n        return {\n            \"Authorization\": f\"Bearer {self.token}\",\n            \"Content-Type\": \"application/json\"\n        }\n\n    def _request(self, method: str, endpoint: str, **kwargs) -&gt; Dict[str, Any]:\n        \"\"\"Make authenticated request.\"\"\"\n        url = f\"{self.base_url}/api/v2{endpoint}\"\n        response = self._client.request(\n            method, url, headers=self._headers(), **kwargs\n        )\n        response.raise_for_status()\n        return response.json()\n\n    # Memory operations\n    def create_memory(\n        self,\n        content: str,\n        memory_type: str = \"fact\",\n        importance: float = 0.5,\n        tags: Optional[List[str]] = None,\n        metadata: Optional[Dict] = None\n    ) -&gt; Dict[str, Any]:\n        \"\"\"Create a new memory.\"\"\"\n        payload = {\n            \"content\": content,\n            \"memory_type\": memory_type,\n            \"importance\": importance,\n        }\n        if tags:\n            payload[\"tags\"] = tags\n        if metadata:\n            payload[\"metadata\"] = metadata\n        return self._request(\"POST\", \"/memories\", json=payload)\n\n    def get_memory(self, memory_id: str) -&gt; Dict[str, Any]:\n        \"\"\"Get a memory by ID.\"\"\"\n        return self._request(\"GET\", f\"/memories/{memory_id}\")\n\n    def list_memories(\n        self,\n        page: int = 1,\n        per_page: int = 20,\n        memory_type: Optional[str] = None,\n        tags: Optional[List[str]] = None,\n        importance_threshold: Optional[float] = None\n    ) -&gt; Dict[str, Any]:\n        \"\"\"List memories with filters.\"\"\"\n        params = {\"page\": page, \"per_page\": per_page}\n        if memory_type:\n            params[\"memory_type\"] = memory_type\n        if tags:\n            params[\"tags\"] = \",\".join(tags)\n        if importance_threshold:\n            params[\"importance_threshold\"] = importance_threshold\n        return self._request(\"GET\", \"/memories\", params=params)\n\n    def update_memory(\n        self,\n        memory_id: str,\n        content: Optional[str] = None,\n        importance: Optional[float] = None,\n        metadata: Optional[Dict] = None\n    ) -&gt; Dict[str, Any]:\n        \"\"\"Update a memory.\"\"\"\n        payload = {}\n        if content is not None:\n            payload[\"content\"] = content\n        if importance is not None:\n            payload[\"importance\"] = importance\n        if metadata is not None:\n            payload[\"metadata\"] = metadata\n        return self._request(\"PUT\", f\"/memories/{memory_id}\", json=payload)\n\n    def delete_memory(self, memory_id: str) -&gt; None:\n        \"\"\"Delete a memory.\"\"\"\n        self._client.delete(\n            f\"{self.base_url}/api/v2/memories/{memory_id}\",\n            headers=self._headers()\n        )\n\n    # Search operations\n    def search(\n        self,\n        query: str,\n        limit: int = 20,\n        memory_types: Optional[List[str]] = None,\n        importance_threshold: Optional[float] = None\n    ) -&gt; Dict[str, Any]:\n        \"\"\"Perform hybrid search.\"\"\"\n        payload = {\n            \"query\": query,\n            \"limit\": limit,\n            \"bm25_weight\": 0.4,\n            \"vector_weight\": 0.4,\n            \"graph_weight\": 0.2,\n        }\n        if memory_types:\n            payload[\"memory_types\"] = memory_types\n        if importance_threshold:\n            payload[\"importance_threshold\"] = importance_threshold\n        return self._request(\"POST\", \"/search/hybrid\", json=payload)\n\n    # Relationship operations\n    def create_relationship(\n        self,\n        from_id: str,\n        to_id: str,\n        relationship_type: str,\n        strength: float = 0.5\n    ) -&gt; Dict[str, Any]:\n        \"\"\"Create a relationship between memories.\"\"\"\n        payload = {\n            \"from_id\": from_id,\n            \"to_id\": to_id,\n            \"relationship_type\": relationship_type,\n            \"strength\": strength\n        }\n        return self._request(\"POST\", \"/relationships\", json=payload)\n\n    def traverse_graph(\n        self,\n        start_memory_id: str,\n        max_depth: int = 3,\n        direction: str = \"ANY\"\n    ) -&gt; Dict[str, Any]:\n        \"\"\"Traverse the knowledge graph.\"\"\"\n        payload = {\n            \"start_memory_id\": start_memory_id,\n            \"max_depth\": max_depth,\n            \"direction\": direction\n        }\n        return self._request(\"POST\", \"/relationships/traverse\", json=payload)\n\n    # Document operations\n    def upload_document(\n        self,\n        file_path: str,\n        metadata: Optional[Dict] = None\n    ) -&gt; Dict[str, Any]:\n        \"\"\"Upload a document.\"\"\"\n        import json\n        with open(file_path, \"rb\") as f:\n            files = {\"file\": f}\n            data = {}\n            if metadata:\n                data[\"metadata\"] = json.dumps(metadata)\n            response = self._client.post(\n                f\"{self.base_url}/api/v2/documents/upload\",\n                headers={\"Authorization\": f\"Bearer {self.token}\"},\n                files=files,\n                data=data\n            )\n        response.raise_for_status()\n        return response.json()\n\n    def close(self):\n        \"\"\"Close the client connection.\"\"\"\n        self._client.close()\n\n    def __enter__(self):\n        return self\n\n    def __exit__(self, *args):\n        self.close()\n</code></pre>"},{"location":"api/examples/python/#usage-examples","title":"Usage Examples","text":""},{"location":"api/examples/python/#basic-memory-operations","title":"Basic Memory Operations","text":"<pre><code># Initialize client\nclient = PenfieldClient(api_key=\"tm_your_tenant_ak_your_key\")\n\n# Create a memory\nresult = client.create_memory(\n    content=\"Python's asyncio provides async/await syntax for concurrent programming\",\n    memory_type=\"fact\",\n    importance=0.8,\n    tags=[\"python\", \"async\", \"concurrency\"]\n)\nmemory_id = result[\"data\"][\"id\"]\nprint(f\"Created memory: {memory_id}\")\n\n# Get the memory\nmemory = client.get_memory(memory_id)\nprint(f\"Content: {memory['data']['content']}\")\n\n# Update the memory\nclient.update_memory(\n    memory_id,\n    importance=0.9,\n    metadata={\"verified\": True}\n)\n\n# List memories\nmemories = client.list_memories(\n    memory_type=\"fact\",\n    importance_threshold=0.7,\n    per_page=10\n)\nfor item in memories[\"data\"][\"items\"]:\n    print(f\"- {item['content'][:50]}...\")\n</code></pre>"},{"location":"api/examples/python/#search","title":"Search","text":"<pre><code># Hybrid search\nresults = client.search(\n    query=\"Python async programming patterns\",\n    limit=5,\n    memory_types=[\"fact\", \"insight\"]\n)\n\nfor item in results[\"data\"][\"items\"]:\n    print(f\"Score: {item['score']:.2f}\")\n    print(f\"Content: {item['snippet']}\")\n    print(\"---\")\n</code></pre>"},{"location":"api/examples/python/#building-knowledge-graph","title":"Building Knowledge Graph","text":"<pre><code># Create memories\npy_async = client.create_memory(\n    content=\"Python asyncio uses an event loop to manage async operations\",\n    memory_type=\"fact\",\n    tags=[\"python\", \"asyncio\"]\n)\n\npy_await = client.create_memory(\n    content=\"await keyword suspends execution until the awaited coroutine completes\",\n    memory_type=\"fact\",\n    tags=[\"python\", \"asyncio\"]\n)\n\n# Connect them\nclient.create_relationship(\n    from_id=py_async[\"data\"][\"id\"],\n    to_id=py_await[\"data\"][\"id\"],\n    relationship_type=\"supports\",\n    strength=0.9\n)\n\n# Traverse the graph\ngraph = client.traverse_graph(\n    start_memory_id=py_async[\"data\"][\"id\"],\n    max_depth=2,\n    direction=\"OUTBOUND\"\n)\n\nfor path in graph[\"data\"][\"paths\"]:\n    print(f\"Path score: {path['total_score']}\")\n    for node in path[\"nodes\"]:\n        print(f\"  - {node['content'][:40]}...\")\n</code></pre>"},{"location":"api/examples/python/#document-upload","title":"Document Upload","text":"<pre><code># Upload a document\nresult = client.upload_document(\n    file_path=\"/path/to/document.pdf\",\n    metadata={\"project\": \"research\", \"topic\": \"AI\"}\n)\ndoc_id = result[\"data\"][\"id\"]\nprint(f\"Uploaded document: {doc_id}\")\nprint(f\"Chunks created: {result['data']['chunk_count']}\")\n\n# Search document content\nresults = client.search(\n    query=\"specific topic from document\",\n    source_types=[\"document_upload\"]\n)\n</code></pre>"},{"location":"api/examples/python/#async-client","title":"Async Client","text":"<p>For async applications:</p> <pre><code>import httpx\nimport asyncio\nfrom typing import Optional, List, Dict, Any\n\n\nclass AsyncPenfieldClient:\n    \"\"\"Async Penfield API client.\"\"\"\n\n    def __init__(self, api_key: str, base_url: str = \"https://api.penfield.app\"):\n        self.api_key = api_key\n        self.base_url = base_url\n        self._token: Optional[str] = None\n        self._client = httpx.AsyncClient(timeout=30.0)\n\n    async def _authenticate(self) -&gt; None:\n        response = await self._client.post(\n            f\"{self.base_url}/api/v2/auth/token\",\n            headers={\"Authorization\": f\"Bearer {self.api_key}\"}\n        )\n        response.raise_for_status()\n        self._token = response.json()[\"data\"][\"access_token\"]\n\n    async def _request(self, method: str, endpoint: str, **kwargs) -&gt; Dict:\n        if self._token is None:\n            await self._authenticate()\n\n        url = f\"{self.base_url}/api/v2{endpoint}\"\n        response = await self._client.request(\n            method, url,\n            headers={\n                \"Authorization\": f\"Bearer {self._token}\",\n                \"Content-Type\": \"application/json\"\n            },\n            **kwargs\n        )\n        response.raise_for_status()\n        return response.json()\n\n    async def create_memory(self, content: str, **kwargs) -&gt; Dict:\n        return await self._request(\"POST\", \"/memories\", json={\"content\": content, **kwargs})\n\n    async def search(self, query: str, limit: int = 20) -&gt; Dict:\n        return await self._request(\"POST\", \"/search/hybrid\", json={\"query\": query, \"limit\": limit})\n\n    async def close(self):\n        await self._client.aclose()\n\n    async def __aenter__(self):\n        return self\n\n    async def __aexit__(self, *args):\n        await self.close()\n\n\n# Usage\nasync def main():\n    async with AsyncPenfieldClient(\"your_api_key\") as client:\n        # Create memories concurrently\n        tasks = [\n            client.create_memory(f\"Memory {i}\", memory_type=\"fact\")\n            for i in range(5)\n        ]\n        results = await asyncio.gather(*tasks)\n        print(f\"Created {len(results)} memories\")\n\n        # Search\n        search_results = await client.search(\"Memory\")\n        print(f\"Found {len(search_results['data']['items'])} results\")\n\n\nasyncio.run(main())\n</code></pre>"},{"location":"api/examples/python/#error-handling","title":"Error Handling","text":"<pre><code>import httpx\n\n\ndef safe_api_call(client: PenfieldClient, memory_id: str):\n    \"\"\"Example with error handling.\"\"\"\n    try:\n        memory = client.get_memory(memory_id)\n        return memory[\"data\"]\n\n    except httpx.HTTPStatusError as e:\n        if e.response.status_code == 404:\n            print(f\"Memory {memory_id} not found\")\n            return None\n        elif e.response.status_code == 401:\n            print(\"Authentication failed - check your API key\")\n            raise\n        elif e.response.status_code == 429:\n            # Rate limited - get retry time\n            retry_after = e.response.headers.get(\"Retry-After\", \"60\")\n            print(f\"Rate limited. Retry after {retry_after} seconds\")\n            raise\n        else:\n            error_data = e.response.json()\n            print(f\"API Error: {error_data['error']['code']}\")\n            print(f\"Message: {error_data['error']['message']}\")\n            raise\n\n    except httpx.RequestError as e:\n        print(f\"Network error: {e}\")\n        raise\n</code></pre>"},{"location":"api/guides/best-practices/","title":"Best Practices Guide","text":"<p>How to get the most out of Penfield's memory system.</p>"},{"location":"api/guides/best-practices/#memory-storage","title":"Memory Storage","text":""},{"location":"api/guides/best-practices/#write-rich-contextual-memories","title":"Write Rich, Contextual Memories","text":"<p>Good: <pre><code>{\n  \"content\": \"[API Investigation] FACT: The /users endpoint returns 401 when the JWT token lacks the 'read:users' scope. Verified by comparing headers between working and failing requests. Error message: 'Insufficient scope'. Solution: Request 'read:users' scope during OAuth flow.\",\n  \"memory_type\": \"fact\",\n  \"importance\": 0.8,\n  \"tags\": [\"api\", \"auth\", \"debugging\"]\n}\n</code></pre></p> <p>Poor: <pre><code>{\n  \"content\": \"API returns 401\",\n  \"memory_type\": \"fact\"\n}\n</code></pre></p> <p>The rich memory includes: - Context (what you were doing) - Evidence (how you verified it) - Solution (what to do about it)</p>"},{"location":"api/guides/best-practices/#use-appropriate-memory-types","title":"Use Appropriate Memory Types","text":"If you're storing... Use type... Verified information <code>fact</code> Pattern or realization <code>insight</code> Bug fix or update <code>correction</code> Link to documentation <code>reference</code> Something to do later <code>task</code> Session handoff data <code>checkpoint</code> <p>See Memory Types Guide for all 11 types.</p>"},{"location":"api/guides/best-practices/#set-meaningful-importance","title":"Set Meaningful Importance","text":"<pre><code>0.9-1.0: Critical facts, key decisions, major insights\n0.7-0.8: Important findings, useful patterns\n0.5-0.6: General notes, context\n0.3-0.4: Minor details, background info\n0.1-0.2: Ephemeral data, temporary notes\n</code></pre> <p>Higher importance = more likely to appear in search results.</p>"},{"location":"api/guides/best-practices/#use-tags-consistently","title":"Use Tags Consistently","text":"<p>Create a tag taxonomy and stick to it:</p> <pre><code># Project tags\nproject:penfield, project:webapp\n\n# Type tags\nbug, feature, research, meeting\n\n# Status tags\nresolved, pending, blocked\n\n# Technology tags\npython, api, database\n</code></pre>"},{"location":"api/guides/best-practices/#knowledge-graph","title":"Knowledge Graph","text":""},{"location":"api/guides/best-practices/#always-connect-related-memories","title":"Always Connect Related Memories","text":"<p>After storing a memory, ask yourself: 1. Does this update or correct something? \u2192 <code>supersedes</code>, <code>updates</code>, <code>correction</code> 2. Does this provide evidence? \u2192 <code>supports</code>, <code>contradicts</code> 3. Is this an example of something? \u2192 <code>example_of</code>, <code>implements</code> 4. What came before/after? \u2192 <code>follows</code>, <code>precedes</code></p>"},{"location":"api/guides/best-practices/#build-evidence-chains","title":"Build Evidence Chains","text":"<pre><code>Hypothesis \u2192 Evidence 1 (supports) \u2192 Evidence 2 (supports) \u2192 Conclusion (supersedes)\n</code></pre> <p>This creates traversable paths in your knowledge graph.</p>"},{"location":"api/guides/best-practices/#use-appropriate-relationship-strength","title":"Use Appropriate Relationship Strength","text":"<pre><code>0.9-1.0: Direct, strong connection\n0.7-0.8: Clear relationship\n0.5-0.6: Related but indirect\n0.3-0.4: Weak association\n</code></pre>"},{"location":"api/guides/best-practices/#avoid-orphan-memories","title":"Avoid Orphan Memories","text":"<p>Every memory should connect to at least one other memory. Orphans are harder to find through graph traversal.</p>"},{"location":"api/guides/best-practices/#search-optimization","title":"Search Optimization","text":""},{"location":"api/guides/best-practices/#write-searchable-content","title":"Write Searchable Content","text":"<p>Include keywords naturally: <pre><code>{\n  \"content\": \"The authentication flow uses OAuth 2.0 with PKCE for security. Tokens can be refreshed using the refresh_token grant type.\"\n}\n</code></pre></p> <p>This memory will match searches for: \"authentication\", \"OAuth\", \"PKCE\", \"tokens\", \"refresh\".</p>"},{"location":"api/guides/best-practices/#use-source-type-filters","title":"Use Source Type Filters","text":"<pre><code>{\n  \"query\": \"API documentation\",\n  \"source_type\": \"document\"  // Only search uploaded documents\n}\n</code></pre> <pre><code>{\n  \"query\": \"debugging notes\",\n  \"source_type\": \"memory\"  // Only search memories, not documents\n}\n</code></pre>"},{"location":"api/guides/best-practices/#use-date-filters-for-time-sensitive-queries","title":"Use Date Filters for Time-Sensitive Queries","text":"<pre><code>{\n  \"query\": \"project updates\",\n  \"start_date\": \"2025-01-01\",\n  \"end_date\": \"2025-01-31\"\n}\n</code></pre>"},{"location":"api/guides/best-practices/#context-management","title":"Context Management","text":""},{"location":"api/guides/best-practices/#save-checkpoints-at-milestones","title":"Save Checkpoints at Milestones","text":"<p>Checkpoint names are unique per tenant \u2014 saving with a duplicate name will fail with an error. Use descriptive names that include context like dates or session identifiers (e.g., <code>\"Auth Investigation - 2026-02-11\"</code>, <code>\"Sprint 4 Handoff\"</code>).</p> <p>Good times to save context: - End of a debugging session - Before switching tasks - After making a key discovery - When handing off to another agent</p>"},{"location":"api/guides/best-practices/#write-detailed-checkpoint-descriptions","title":"Write Detailed Checkpoint Descriptions","text":"<pre><code>{\n  \"name\": \"Auth Bug Investigation - Jan 6\",\n  \"description\": \"[Session Summary] Investigated 401 errors on /users endpoint. Root cause: missing scope in OAuth request. Key memory: 'scope discovery' (uuid-123). Verified fix works in staging. TODO: Deploy to production. Blocked on: need prod access.\"\n}\n</code></pre> <p>Include: - What you investigated - What you found - Key memories to reference - What's next - Any blockers</p>"},{"location":"api/guides/best-practices/#use-awakening-for-personality","title":"Use Awakening for Personality","text":"<p>Always call <code>awaken</code> at the start of a conversation to load user preferences.</p>"},{"location":"api/guides/best-practices/#api-usage","title":"API Usage","text":""},{"location":"api/guides/best-practices/#handle-tokens-properly","title":"Handle Tokens Properly","text":"<pre><code># Store tokens securely\naccess_token = response[\"data\"][\"access_token\"]\nrefresh_token = response[\"data\"].get(\"refresh_token\")  # May be None\nexpires_at = time.time() + response[\"data\"][\"expires_in\"]\n\n# Refresh proactively (before expiry)\nif refresh_token and time.time() &gt; expires_at - 300:  # 5 min buffer\n    new_tokens = refresh_tokens(refresh_token)\n    access_token = new_tokens[\"access_token\"]\n    refresh_token = new_tokens.get(\"refresh_token\", refresh_token)\n</code></pre>"},{"location":"api/guides/best-practices/#implement-retry-logic","title":"Implement Retry Logic","text":"<pre><code>import time\nfrom tenacity import retry, stop_after_attempt, wait_exponential\n\n@retry(\n    stop=stop_after_attempt(3),\n    wait=wait_exponential(multiplier=1, min=1, max=60)\n)\ndef api_call(endpoint, data):\n    response = requests.post(endpoint, json=data, headers=headers)\n    if response.status_code == 429:\n        retry_after = int(response.headers.get(\"Retry-After\", 60))\n        time.sleep(retry_after)\n        raise Exception(\"Rate limited\")\n    response.raise_for_status()\n    return response.json()\n</code></pre>"},{"location":"api/guides/best-practices/#batch-operations-when-possible","title":"Batch Operations When Possible","text":"<p>Instead of: <pre><code>for item in items:\n    store_memory(item)  # 100 API calls\n</code></pre></p> <p>Consider: <pre><code># Group related items\nbatch_content = \"\\n\\n\".join(items)\nstore_memory(batch_content)  # 1 API call\n</code></pre></p>"},{"location":"api/guides/best-practices/#security","title":"Security","text":""},{"location":"api/guides/best-practices/#never-log-tokens","title":"Never Log Tokens","text":"<pre><code># BAD\nlogger.info(f\"Using token: {access_token}\")\n\n# GOOD\nlogger.info(f\"Using token: {access_token[:10]}...\")\n</code></pre>"},{"location":"api/guides/best-practices/#validate-inputs","title":"Validate Inputs","text":"<pre><code># Validate content length\nif len(content) &gt; 10000:\n    raise ValueError(\"Content too long\")\n\n# Validate importance\nif not 0 &lt;= importance &lt;= 1:\n    raise ValueError(\"Importance must be 0-1\")\n\n# Validate memory type\nVALID_TYPES = [\"fact\", \"insight\", \"conversation\", ...]\nif memory_type not in VALID_TYPES:\n    raise ValueError(f\"Invalid memory type: {memory_type}\")\n</code></pre>"},{"location":"api/guides/best-practices/#use-appropriate-scopes","title":"Use Appropriate Scopes","text":"<p>Request only the scopes you need: - <code>read</code> - Read memories, search - <code>write</code> - Create, update, delete memories - <code>profile</code> - Access user profile information - <code>offline_access</code> - Get refresh tokens (OAuth flows)</p> <p>Discover available scopes from <code>.well-known/oauth-authorization-server</code>.</p>"},{"location":"api/guides/best-practices/#performance","title":"Performance","text":""},{"location":"api/guides/best-practices/#limit-search-results","title":"Limit Search Results","text":"<pre><code>{\n  \"query\": \"debugging\",\n  \"limit\": 20  // Don't fetch more than needed\n}\n</code></pre>"},{"location":"api/guides/best-practices/#use-graph-depth-wisely","title":"Use Graph Depth Wisely","text":"<pre><code>{\n  \"start_memory\": \"uuid\",\n  \"max_depth\": 2  // Deep traversals are expensive\n}\n</code></pre>"},{"location":"api/guides/best-practices/#cache-frequently-accessed-data","title":"Cache Frequently Accessed Data","text":"<pre><code>from functools import lru_cache\n\n@lru_cache(maxsize=100)\ndef get_memory(memory_id):\n    return api.get_memory(memory_id)\n</code></pre>"},{"location":"api/guides/best-practices/#anti-patterns","title":"Anti-Patterns","text":""},{"location":"api/guides/best-practices/#dont-store-ephemeral-data","title":"Don't Store Ephemeral Data","text":"<p>Avoid storing: - Temporary calculations - Intermediate processing results - Data that changes every second</p>"},{"location":"api/guides/best-practices/#dont-create-circular-relationships","title":"Don't Create Circular Relationships","text":"<pre><code>A \u2192 supports \u2192 B \u2192 supports \u2192 A  // Circular!\n</code></pre>"},{"location":"api/guides/best-practices/#dont-ignore-errors","title":"Don't Ignore Errors","text":"<pre><code># BAD\ntry:\n    store_memory(data)\nexcept:\n    pass\n\n# GOOD\ntry:\n    store_memory(data)\nexcept ValidationError as e:\n    logger.error(f\"Invalid memory data: {e}\")\n    # Handle appropriately\nexcept RateLimitError:\n    time.sleep(60)\n    store_memory(data)  # Retry\n</code></pre>"},{"location":"api/guides/best-practices/#dont-hardcode-ids","title":"Don't Hardcode IDs","text":"<pre><code># BAD\nIMPORTANT_MEMORY = \"550e8400-e29b-41d4-a716-446655440000\"\n\n# GOOD\nresult = search(\"important finding about X\")\nimportant_memory = result[\"items\"][0][\"id\"]\n</code></pre>"},{"location":"api/guides/common-patterns/","title":"Common Patterns Guide","text":"<p>Practical patterns for using Penfield effectively.</p>"},{"location":"api/guides/common-patterns/#session-handoffs","title":"Session Handoffs","text":""},{"location":"api/guides/common-patterns/#pattern-save-and-restore-investigation-context","title":"Pattern: Save and Restore Investigation Context","text":"<p>When ending a session:</p> <pre><code>POST /api/v2/memories\n{\n  \"content\": \"{\\\"checkpoint_name\\\":\\\"Auth Bug Investigation\\\",\\\"description\\\":\\\"[Session] Found root cause: JWT scope missing...\\\",\\\"memory_ids\\\":[\\\"uuid-1\\\",\\\"uuid-2\\\"]}\",\n  \"memory_type\": \"checkpoint\",\n  \"importance\": 0.9,\n  \"tags\": [\"context\", \"checkpoint\", \"Auth Bug Investigation\"]\n}\n</code></pre> <p>When resuming:</p> <pre><code>GET /api/v2/memories?memory_type=checkpoint&amp;per_page=100\n</code></pre> <p>Then find the checkpoint by name and fetch referenced memories.</p>"},{"location":"api/guides/common-patterns/#pattern-structured-handoff-description","title":"Pattern: Structured Handoff Description","text":"<p>Include these sections in checkpoint descriptions:</p> <pre><code>[Session Name - Date]\n\nSITUATION: What you were investigating\nPROGRESS: What you discovered (with memory references)\nHYPOTHESIS: Your current theory\nEVIDENCE: What supports/contradicts it\nBLOCKED ON: What's preventing progress\nNEXT STEPS: What the next agent should do\nKEY MEMORIES: UUIDs or descriptions of critical memories\n</code></pre>"},{"location":"api/guides/common-patterns/#investigation-threads","title":"Investigation Threads","text":""},{"location":"api/guides/common-patterns/#pattern-track-an-investigation","title":"Pattern: Track an Investigation","text":"<ol> <li> <p>Create a root memory: <pre><code>{\n  \"content\": \"[Investigation: API Latency] Started investigating slow response times on /search endpoint. Initial hypothesis: database queries taking too long.\",\n  \"memory_type\": \"task\",\n  \"importance\": 0.9,\n  \"tags\": [\"investigation\", \"api-latency\"]\n}\n</code></pre></p> </li> <li> <p>Add findings as children: <pre><code>{\n  \"content\": \"[API Latency] FACT: Database query averages 45ms, within acceptable range. This contradicts the database hypothesis.\",\n  \"memory_type\": \"fact\",\n  \"importance\": 0.8,\n  \"tags\": [\"investigation\", \"api-latency\"]\n}\n</code></pre></p> </li> <li> <p>Connect with relationships: <pre><code>POST /api/v2/relationships\n{\n  \"from_id\": \"finding-uuid\",\n  \"to_id\": \"root-uuid\",\n  \"relationship_type\": \"child_of\",\n  \"strength\": 0.9\n}\n</code></pre></p> </li> <li> <p>Track corrections: <pre><code>{\n  \"content\": \"[API Latency] CORRECTION: Issue was not database but serialization. JSON encoding taking 200ms for large responses.\",\n  \"memory_type\": \"correction\",\n  \"importance\": 0.9\n}\n</code></pre></p> </li> </ol> <p>Then connect with <code>supersedes</code>: <pre><code>{\n  \"from_id\": \"correction-uuid\",\n  \"to_id\": \"hypothesis-uuid\",\n  \"relationship_type\": \"supersedes\"\n}\n</code></pre></p>"},{"location":"api/guides/common-patterns/#evidence-chains","title":"Evidence Chains","text":""},{"location":"api/guides/common-patterns/#pattern-build-argument-structures","title":"Pattern: Build Argument Structures","text":"<p>For claims that need evidence:</p> <pre><code>Claim (hypothesis)\n\u251c\u2500\u2500 Evidence 1 (supports)\n\u251c\u2500\u2500 Evidence 2 (supports)\n\u251c\u2500\u2500 Counter-evidence (contradicts)\n\u2514\u2500\u2500 Resolution (supersedes original claim)\n</code></pre> <p>Example:</p> <pre><code>// Claim\n{\n  \"content\": \"[Hypothesis] The memory leak is caused by unclosed database connections\",\n  \"memory_type\": \"insight\",\n  \"tags\": [\"memory-leak\", \"hypothesis\"]\n}\n\n// Evidence\n{\n  \"content\": \"[Evidence] Connection pool shows 47/50 connections in use after 10 minutes\",\n  \"memory_type\": \"fact\",\n  \"tags\": [\"memory-leak\", \"evidence\"]\n}\n\n// Relationship\n{\n  \"from_id\": \"evidence-uuid\",\n  \"to_id\": \"claim-uuid\",\n  \"relationship_type\": \"supports\",\n  \"strength\": 0.9\n}\n</code></pre>"},{"location":"api/guides/common-patterns/#learning-and-research","title":"Learning and Research","text":""},{"location":"api/guides/common-patterns/#pattern-study-session-notes","title":"Pattern: Study Session Notes","text":"<p>Structure learning notes with connections:</p> <pre><code>// Main concept\n{\n  \"content\": \"[ML Study] Transformers use self-attention mechanisms to weigh relationships between all tokens in a sequence\",\n  \"memory_type\": \"fact\",\n  \"importance\": 0.8,\n  \"tags\": [\"ml\", \"transformers\", \"study\"]\n}\n\n// Related insight\n{\n  \"content\": \"[ML Study] INSIGHT: Self-attention is like a soft lookup table where queries find relevant keys\",\n  \"memory_type\": \"insight\",\n  \"tags\": [\"ml\", \"transformers\", \"study\"]\n}\n\n// Connect\n{\n  \"from_id\": \"insight-uuid\",\n  \"to_id\": \"concept-uuid\",\n  \"relationship_type\": \"example_of\"\n}\n</code></pre>"},{"location":"api/guides/common-patterns/#pattern-question-and-answer-tracking","title":"Pattern: Question and Answer Tracking","text":"<pre><code>// Question\n{\n  \"content\": \"[Question] How does the embedding service handle rate limiting?\",\n  \"memory_type\": \"task\",\n  \"tags\": [\"question\", \"embeddings\"]\n}\n\n// Answer (later)\n{\n  \"content\": \"[Answer] Embedding service uses token bucket algorithm with 100 req/min burst and 20 req/min sustained\",\n  \"memory_type\": \"fact\",\n  \"tags\": [\"answer\", \"embeddings\"]\n}\n\n// Connect\n{\n  \"from_id\": \"answer-uuid\",\n  \"to_id\": \"question-uuid\",\n  \"relationship_type\": \"responds_to\"\n}\n</code></pre>"},{"location":"api/guides/common-patterns/#project-documentation","title":"Project Documentation","text":""},{"location":"api/guides/common-patterns/#pattern-living-architecture-docs","title":"Pattern: Living Architecture Docs","text":"<p>Store architecture decisions and keep them connected:</p> <pre><code>// Decision\n{\n  \"content\": \"[ADR-001] Decision: Use PostgreSQL for memory storage. Rationale: pgvector support for embeddings, mature ecosystem, ACID compliance.\",\n  \"memory_type\": \"reference\",\n  \"importance\": 0.9,\n  \"tags\": [\"adr\", \"architecture\", \"database\"]\n}\n\n// Implementation\n{\n  \"content\": \"[Implementation] PostgreSQL deployed with pgvector 0.6.0. Using HNSW indexes for similarity search.\",\n  \"memory_type\": \"fact\",\n  \"tags\": [\"implementation\", \"database\"]\n}\n\n// Connect\n{\n  \"from_id\": \"implementation-uuid\",\n  \"to_id\": \"decision-uuid\",\n  \"relationship_type\": \"implements\"\n}\n</code></pre>"},{"location":"api/guides/common-patterns/#multi-agent-workflows","title":"Multi-Agent Workflows","text":""},{"location":"api/guides/common-patterns/#pattern-agent-handoff-protocol","title":"Pattern: Agent Handoff Protocol","text":"<p>Agent A ending session: <pre><code>{\n  \"content\": \"{\\\"checkpoint_name\\\":\\\"task-handoff\\\",\\\"description\\\":\\\"Completed steps 1-3. Agent B should continue with step 4. Key finding: [uuid-123] shows the config issue.\\\",\\\"memory_ids\\\":[\\\"uuid-123\\\",\\\"uuid-456\\\"]}\",\n  \"memory_type\": \"checkpoint\",\n  \"importance\": 0.9,\n  \"tags\": [\"handoff\", \"task-handoff\"]\n}\n</code></pre></p> <p>Agent B resuming: 1. Search for handoff: <code>GET /api/v2/memories?memory_type=checkpoint</code> 2. Parse checkpoint content 3. Fetch referenced memories 4. Continue work</p>"},{"location":"api/guides/common-patterns/#pattern-shared-knowledge-base","title":"Pattern: Shared Knowledge Base","text":"<p>Multiple agents contributing to same project:</p> <pre><code>// Tag with project and agent\n{\n  \"content\": \"[Project: Dashboard] [Agent: Code Review] Found potential XSS vulnerability in user input handling\",\n  \"memory_type\": \"fact\",\n  \"tags\": [\"dashboard\", \"security\", \"code-review-agent\"]\n}\n</code></pre> <p>Other agents can search: <pre><code>{\n  \"query\": \"dashboard security\",\n  \"tags\": [\"dashboard\"]\n}\n</code></pre></p>"},{"location":"api/guides/common-patterns/#document-processing","title":"Document Processing","text":""},{"location":"api/guides/common-patterns/#pattern-extract-and-connect-insights-from-documents","title":"Pattern: Extract and Connect Insights from Documents","text":"<p>After uploading a document:</p> <ol> <li> <p>Search for key content: <pre><code>POST /api/v2/search/hybrid\n{\n  \"query\": \"main conclusions\",\n  \"source_type\": \"document\",\n  \"limit\": 5\n}\n</code></pre></p> </li> <li> <p>Create summary memory: <pre><code>{\n  \"content\": \"[Document Summary: Research Paper] Key findings: 1) X improves by 20%, 2) Y has no effect. See document chunks [uuid-1, uuid-2] for details.\",\n  \"memory_type\": \"insight\",\n  \"tags\": [\"document-summary\", \"research\"]\n}\n</code></pre></p> </li> <li> <p>Connect to document chunks: <pre><code>{\n  \"from_id\": \"summary-uuid\",\n  \"to_id\": \"chunk-uuid\",\n  \"relationship_type\": \"references\"\n}\n</code></pre></p> </li> </ol>"},{"location":"api/guides/common-patterns/#artifact-management","title":"Artifact Management","text":""},{"location":"api/guides/common-patterns/#pattern-organize-artifacts-by-project","title":"Pattern: Organize Artifacts by Project","text":"<pre><code>/project-a/\n  /docs/\n    architecture.md\n    api-spec.md\n  /diagrams/\n    flow.svg\n  /notes/\n    meeting-2025-01-06.md\n/project-b/\n  ...\n</code></pre> <p>Save: <pre><code>POST /api/v2/artifacts\n{\n  \"path\": \"/project-a/docs/architecture.md\",\n  \"content\": \"# Architecture\\n\\n...\"\n}\n</code></pre></p> <p>List: <pre><code>GET /api/v2/artifacts/list?prefix=/project-a/docs/\n</code></pre></p>"},{"location":"api/guides/common-patterns/#pattern-version-artifacts-with-timestamps","title":"Pattern: Version Artifacts with Timestamps","text":"<pre><code>/project/docs/architecture-2025-01-05.md\n/project/docs/architecture-2025-01-06.md\n</code></pre> <p>Or use memories to track artifact history: <pre><code>{\n  \"content\": \"[Artifact Update] Updated /project/docs/architecture.md - Added section on caching layer\",\n  \"memory_type\": \"fact\",\n  \"tags\": [\"artifact-history\", \"project\"]\n}\n</code></pre></p>"},{"location":"api/guides/common-patterns/#error-recovery","title":"Error Recovery","text":""},{"location":"api/guides/common-patterns/#pattern-graceful-degradation","title":"Pattern: Graceful Degradation","text":"<pre><code>def store_with_fallback(content, tags):\n    try:\n        # Try full operation\n        return api.store(content=content, tags=tags, importance=0.8)\n    except ValidationError as e:\n        # Fall back to minimal\n        return api.store(content=content[:5000])\n    except RateLimitError:\n        # Queue for later\n        queue.add({\"content\": content, \"tags\": tags})\n        return {\"status\": \"queued\"}\n</code></pre>"},{"location":"api/guides/common-patterns/#pattern-idempotent-operations","title":"Pattern: Idempotent Operations","text":"<p>Before creating, check if it exists:</p> <pre><code>def store_or_update(content, identifier):\n    # Search for existing\n    results = api.search(query=identifier, limit=1)\n\n    if results[\"items\"]:\n        # Update existing\n        return api.update_memory(\n            memory_id=results[\"items\"][0][\"id\"],\n            content=content\n        )\n    else:\n        # Create new\n        return api.store(content=content, tags=[identifier])\n</code></pre>"},{"location":"api/guides/error-handling/","title":"Error Handling Guide","text":"<p>How to handle API errors gracefully.</p>"},{"location":"api/guides/error-handling/#error-response-structure","title":"Error Response Structure","text":"<p>All errors follow this format:</p> <pre><code>{\n  \"status\": \"error\",\n  \"error\": {\n    \"code\": \"ERROR_CODE\",\n    \"message\": \"Human-readable message\",\n    \"details\": {}\n  },\n  \"meta\": {\n    \"timestamp\": \"2025-01-06T12:00:00.000Z\",\n    \"request_id\": \"uuid-for-debugging\"\n  }\n}\n</code></pre>"},{"location":"api/guides/error-handling/#error-code-reference","title":"Error Code Reference","text":""},{"location":"api/guides/error-handling/#authentication-errors-401","title":"Authentication Errors (401)","text":"Code Message Cause Solution <code>AUTH_INVALID_CREDENTIALS</code> Invalid credentials Wrong API key or token Check API key format <code>AUTH_TOKEN_EXPIRED</code> Token expired JWT past expiration Refresh token or re-authenticate <code>AUTH_TOKEN_INVALID</code> Invalid token Malformed or tampered JWT Re-authenticate <code>AUTH_UNAUTHORIZED</code> Unauthorized Missing Authorization header Add Bearer token <p>Handling: <pre><code>if response.status_code == 401:\n    error_code = response.json().get(\"error\", {}).get(\"code\")\n    if error_code == \"AUTH_TOKEN_EXPIRED\":\n        # Refresh token and retry\n        new_token = refresh_token(refresh_token)\n        retry_request(new_token)\n    else:\n        # Re-authenticate\n        authenticate()\n</code></pre></p>"},{"location":"api/guides/error-handling/#forbidden-errors-403","title":"Forbidden Errors (403)","text":"Code Message Cause Solution <code>AUTH_INSUFFICIENT_PERMISSIONS</code> Insufficient permissions Token lacks required scope Request token with correct scopes <code>AUTH_FORBIDDEN</code> Cannot create/set {type} via this endpoint Attempted to create or update a memory with a protected type (<code>identity_core</code>, <code>personality_trait</code>) Use <code>/api/v2/personality</code> endpoints instead <p>Protected Memory Types:</p> <p><code>identity_core</code> and <code>personality_trait</code> cannot be created or updated via <code>POST /api/v2/memories</code> or <code>PUT /api/v2/memories/{id}</code>. These types are managed exclusively through the <code>/api/v2/personality</code> endpoints.</p> <pre><code>{\n  \"status\": \"error\",\n  \"error\": {\n    \"code\": \"AUTH_FORBIDDEN\",\n    \"message\": \"Cannot create identity_core memories via this endpoint. Use /personality endpoints instead.\",\n    \"details\": null,\n    \"field_errors\": null\n  },\n  \"meta\": {\n    \"timestamp\": \"2026-02-11T10:13:32.467536+00:00\",\n    \"version\": \"2.0.0\",\n    \"request_id\": \"uuid-for-debugging\"\n  }\n}\n</code></pre> <p>Handling: <pre><code>if response.status_code == 403:\n    error_code = response.json().get(\"error\", {}).get(\"code\")\n    if error_code == \"AUTH_FORBIDDEN\":\n        # Protected memory type or insufficient permissions\n        # Use /personality endpoints for identity_core and personality_trait\n        pass\n    else:\n        # Token is valid but lacks required permissions\n        request_elevated_access()\n</code></pre></p>"},{"location":"api/guides/error-handling/#validation-errors-422","title":"Validation Errors (422)","text":"Code Message Cause Solution <code>VAL_VALIDATION_FAILED</code> Validation failed Request body invalid Check request format <code>VAL_FIELD_REQUIRED</code> Required field missing Missing required parameter Add required field <code>VAL_FIELD_TOO_LONG</code> Field too long Content exceeds max length Truncate content (max 10,000 chars) <code>VAL_FIELD_INVALID</code> Invalid field value Wrong type or format Check field type <code>VAL_UUID_INVALID</code> Invalid UUID format Malformed UUID Use valid UUID v4 <code>VAL_ENUM_INVALID</code> Invalid enum value Value not in allowed list Use valid enum value <p>Field-Level Errors:</p> <p>Validation errors include a <code>field_errors</code> object that identifies exactly which fields failed:</p> <pre><code>{\n  \"status\": \"error\",\n  \"error\": {\n    \"code\": \"VAL_VALIDATION_FAILED\",\n    \"message\": \"Request validation failed\",\n    \"details\": null,\n    \"field_errors\": {\n      \"content\": [\"Field required\"],\n      \"importance\": [\"Input should be a valid number, unable to parse string as a number\"]\n    }\n  },\n  \"meta\": {...}\n}\n</code></pre> <p>Each key in <code>field_errors</code> is the field name, and the value is an array of error messages for that field.</p> <p>Handling: <pre><code>if response.status_code == 422:\n    error = response.json().get(\"error\", {})\n    field_errors = error.get(\"field_errors\", {})\n\n    # Check specific field errors\n    if \"content\" in field_errors:\n        print(f\"Content error: {field_errors['content']}\")\n\n    # Or iterate all field errors\n    for field, messages in field_errors.items():\n        print(f\"{field}: {', '.join(messages)}\")\n</code></pre></p>"},{"location":"api/guides/error-handling/#not-found-errors-404","title":"Not Found Errors (404)","text":"Code Message Cause Solution <code>RES_NOT_FOUND</code> Resource not found Memory/document doesn't exist Verify resource ID <code>RES_MEMORY_NOT_FOUND</code> Memory not found Memory ID doesn't exist Check memory UUID <code>RES_DOCUMENT_NOT_FOUND</code> Document not found Document ID doesn't exist Check document UUID <p>Handling: <pre><code>if response.status_code == 404:\n    # Resource doesn't exist - may need to create or verify ID\n    pass\n</code></pre></p>"},{"location":"api/guides/error-handling/#conflict-errors-409","title":"Conflict Errors (409)","text":"Code Message Cause Solution <code>RES_ALREADY_EXISTS</code> Resource already exists Duplicate creation attempt Use existing resource <code>RES_RELATIONSHIP_EXISTS</code> Relationship exists Duplicate relationship Skip or update existing <p>Checkpoint Name Uniqueness:</p> <p>Checkpoint names are unique per tenant. Attempting to save a context with a name that already exists returns a 409 with <code>RES_ALREADY_EXISTS</code>:</p> <pre><code>{\n  \"status\": \"error\",\n  \"error\": {\n    \"code\": \"RES_ALREADY_EXISTS\",\n    \"message\": \"Context with identifier 'My Checkpoint' already exists\",\n    \"details\": {\n      \"resource_type\": \"Context\",\n      \"identifier\": \"My Checkpoint\"\n    },\n    \"field_errors\": null\n  },\n  \"meta\": {\n    \"timestamp\": \"2026-02-11T09:58:31.131531+00:00\",\n    \"version\": \"2.0.0\",\n    \"request_id\": \"uuid-for-debugging\"\n  }\n}\n</code></pre> <p>The MCP <code>save_context</code> tool surfaces this as a <code>DUPLICATE_NAME</code> error code. See the MCP Integration Guide for details.</p>"},{"location":"api/guides/error-handling/#rate-limit-errors-429","title":"Rate Limit Errors (429)","text":"Code Message Cause Solution <code>BIZ_RATE_LIMIT_EXCEEDED</code> Rate limit exceeded Too many requests Wait and retry <p>Headers on 429 responses:</p> Header Description <code>x-ratelimit-limit</code> Max requests per window <code>x-ratelimit-remaining</code> Requests left in window <code>x-ratelimit-reset</code> Unix timestamp when window resets <code>retry-after</code> Seconds to wait before retrying <p>Handling: <pre><code>if response.status_code == 429:\n    retry_after = int(response.headers.get(\"retry-after\", 60))\n    time.sleep(retry_after)\n    retry_request()\n</code></pre></p>"},{"location":"api/guides/error-handling/#server-errors-500-502-503","title":"Server Errors (500, 502, 503)","text":"Code Message Cause Solution <code>SYS_INTERNAL_ERROR</code> Internal server error Server-side issue Retry with backoff <code>SYS_SERVICE_UNAVAILABLE</code> Service unavailable Maintenance or overload Retry later <code>SYS_BAD_GATEWAY</code> Bad gateway Upstream service issue Retry later <p>Handling: <pre><code>if response.status_code &gt;= 500:\n    # Exponential backoff retry\n    for attempt in range(max_retries):\n        time.sleep(2 ** attempt)\n        response = retry_request()\n        if response.status_code &lt; 500:\n            break\n</code></pre></p>"},{"location":"api/guides/error-handling/#retry-strategy","title":"Retry Strategy","text":"<p>Recommended retry logic:</p> <pre><code>import time\nfrom typing import Callable\n\ndef with_retry(\n    fn: Callable,\n    max_retries: int = 3,\n    base_delay: float = 1.0,\n    max_delay: float = 60.0\n):\n    \"\"\"Execute with exponential backoff retry.\"\"\"\n    last_error = None\n\n    for attempt in range(max_retries):\n        try:\n            response = fn()\n\n            # Don't retry client errors (except rate limits)\n            if response.status_code &lt; 500 and response.status_code != 429:\n                return response\n\n            # Handle rate limits\n            if response.status_code == 429:\n                retry_after = int(response.headers.get(\"retry-after\", base_delay))\n                time.sleep(min(retry_after, max_delay))\n                continue\n\n            # Server error - exponential backoff\n            delay = min(base_delay * (2 ** attempt), max_delay)\n            time.sleep(delay)\n\n        except Exception as e:\n            last_error = e\n            delay = min(base_delay * (2 ** attempt), max_delay)\n            time.sleep(delay)\n\n    raise last_error or Exception(\"Max retries exceeded\")\n</code></pre>"},{"location":"api/guides/error-handling/#error-details","title":"Error Details","text":"<p>Some errors include additional context in <code>details</code>:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"VAL_FIELD_TOO_LONG\",\n    \"message\": \"Content exceeds maximum length\",\n    \"details\": {\n      \"field\": \"content\",\n      \"max_length\": 10000,\n      \"actual_length\": 15234\n    }\n  }\n}\n</code></pre> <p>Common detail fields:</p> Field Description <code>field</code> Which field caused the error <code>resource_type</code> Type of resource (Memory, Document, etc.) <code>resource_id</code> ID of affected resource <code>max_length</code> Maximum allowed length <code>allowed_values</code> List of valid enum values"},{"location":"api/guides/error-handling/#debugging-tips","title":"Debugging Tips","text":"<ol> <li>Check <code>request_id</code> - Include in support requests</li> <li>Log full error response - Don't just log status code</li> <li>Validate before sending - Catch errors client-side</li> <li>Use proper content types - Always set <code>Content-Type: application/json</code></li> <li>Check token expiration - Refresh proactively before expiry</li> </ol>"},{"location":"api/guides/memory-types/","title":"Memory Types Guide","text":"<p>How to choose the right memory type for your content.</p>"},{"location":"api/guides/memory-types/#overview","title":"Overview","text":"<p>Penfield supports 11 memory types. Choosing the right type improves search relevance and knowledge graph organization.</p>"},{"location":"api/guides/memory-types/#standard-types","title":"Standard Types","text":""},{"location":"api/guides/memory-types/#fact","title":"<code>fact</code>","text":"<p>Verified information or knowledge that can be referenced.</p> <p>Use when: - Storing confirmed, objective information - Recording data points, statistics, or measurements - Saving information that won't change frequently</p> <p>Examples: <pre><code>{\"content\": \"PostgreSQL 16 supports parallel query execution\", \"memory_type\": \"fact\"}\n{\"content\": \"The user's preferred language is Python\", \"memory_type\": \"fact\"}\n{\"content\": \"API rate limit is 1000 requests per minute\", \"memory_type\": \"fact\"}\n</code></pre></p>"},{"location":"api/guides/memory-types/#insight","title":"<code>insight</code>","text":"<p>Derived understanding, patterns, or realizations.</p> <p>Use when: - Recording conclusions drawn from multiple facts - Noting patterns or trends discovered - Capturing \"aha moments\" or realizations</p> <p>Examples: <pre><code>{\"content\": \"User tends to ask about async patterns when debugging performance issues\", \"memory_type\": \"insight\"}\n{\"content\": \"Error rate spikes correlate with deployment times\", \"memory_type\": \"insight\"}\n{\"content\": \"The caching strategy works well for read-heavy workloads\", \"memory_type\": \"insight\"}\n</code></pre></p>"},{"location":"api/guides/memory-types/#conversation","title":"<code>conversation</code>","text":"<p>Conversational context or dialogue worth preserving.</p> <p>Use when: - Saving important discussion context - Recording decisions made in conversation - Preserving dialogue that may be referenced later</p> <p>Examples: <pre><code>{\"content\": \"User confirmed they want REST API, not GraphQL\", \"memory_type\": \"conversation\"}\n{\"content\": \"Discussed migration strategy: phased rollout over 3 weeks\", \"memory_type\": \"conversation\"}\n</code></pre></p>"},{"location":"api/guides/memory-types/#correction","title":"<code>correction</code>","text":"<p>Updates or corrections to previous information.</p> <p>Use when: - Fixing incorrect information - Updating outdated facts - Recording that previous understanding was wrong</p> <p>Examples: <pre><code>{\"content\": \"CORRECTION: The API uses OAuth 2.1, not OAuth 2.0 as previously noted\", \"memory_type\": \"correction\"}\n{\"content\": \"Previous memory about rate limits was incorrect - actual limit is 500/min\", \"memory_type\": \"correction\"}\n</code></pre></p> <p>Best Practice: Connect corrections to the original memory using <code>supersedes</code> or <code>updates</code> relationship.</p>"},{"location":"api/guides/memory-types/#reference","title":"<code>reference</code>","text":"<p>External references, citations, or links.</p> <p>Use when: - Storing URLs to documentation - Recording book/paper citations - Linking to external resources</p> <p>Examples: <pre><code>{\"content\": \"PostgreSQL JSONB docs: https://www.postgresql.org/docs/current/datatype-json.html\", \"memory_type\": \"reference\"}\n{\"content\": \"Design pattern from 'Clean Architecture' by Robert Martin, Chapter 22\", \"memory_type\": \"reference\"}\n</code></pre></p>"},{"location":"api/guides/memory-types/#task","title":"<code>task</code>","text":"<p>Action items, todos, or pending work.</p> <p>Use when: - Recording work that needs to be done - Tracking follow-up items - Noting things to investigate later</p> <p>Examples: <pre><code>{\"content\": \"TODO: Benchmark query performance after adding index\", \"memory_type\": \"task\"}\n{\"content\": \"Follow up: Check if user resolved authentication issue\", \"memory_type\": \"task\"}\n</code></pre></p>"},{"location":"api/guides/memory-types/#strategy","title":"<code>strategy</code>","text":"<p>Learned behavior patterns or approaches.</p> <p>Use when: - Recording successful problem-solving approaches - Documenting preferred methods or workflows - Saving techniques that work well</p> <p>Examples: <pre><code>{\"content\": \"When debugging async issues, always check for missing await keywords first\", \"memory_type\": \"strategy\"}\n{\"content\": \"User prefers step-by-step explanations over code-first answers\", \"memory_type\": \"strategy\"}\n{\"content\": \"For large refactors, start with tests before changing implementation\", \"memory_type\": \"strategy\"}\n</code></pre></p>"},{"location":"api/guides/memory-types/#awakening-protocol-types","title":"Awakening Protocol Types","text":"<p>These types support AI identity and personality persistence.</p>"},{"location":"api/guides/memory-types/#checkpoint","title":"<code>checkpoint</code>","text":"<p>Conversation state snapshots for session continuity.</p> <p>Use when: - Saving conversation state for later resumption - Creating restore points during long sessions - Preserving context before context window limits</p> <p>Examples: <pre><code>{\"content\": \"Session checkpoint: Debugging payment flow, found issue in webhook handler\", \"memory_type\": \"checkpoint\"}\n</code></pre></p> <p>Note: Usually created via <code>save_context</code> tool, not directly.</p>"},{"location":"api/guides/memory-types/#identity_core","title":"<code>identity_core</code>","text":"<p>Core AI identity information (immutable). Protected type \u2014 cannot be created or updated via <code>POST /api/v2/memories</code> or <code>PUT /api/v2/memories/{id}</code>. Managed through the <code>/api/v2/personality</code> endpoints. MCP users cannot create these via the <code>store</code> tool.</p> <p>Use when: - Defining fundamental identity characteristics - Setting core values or principles - Establishing unchanging traits</p> <p>Examples: <pre><code>{\"content\": \"I prioritize accuracy over speed in technical explanations\", \"memory_type\": \"identity_core\"}\n{\"content\": \"I always acknowledge uncertainty when I'm not sure\", \"memory_type\": \"identity_core\"}\n</code></pre></p> <p>Note: Changes to identity affect your AI personality, just like changes made in the portal. Configure via the Personality API or the portal.</p>"},{"location":"api/guides/memory-types/#personality_trait","title":"<code>personality_trait</code>","text":"<p>AI personality characteristics (evolvable). Protected type \u2014 cannot be created or updated via <code>POST /api/v2/memories</code> or <code>PUT /api/v2/memories/{id}</code>. Managed through the <code>/api/v2/personality</code> endpoints. MCP users cannot create these via the <code>store</code> tool.</p> <p>Use when: - Recording communication style preferences - Noting interaction patterns - Tracking evolving behavioral tendencies</p> <p>Examples: <pre><code>{\"content\": \"I use analogies frequently when explaining complex concepts\", \"memory_type\": \"personality_trait\"}\n{\"content\": \"I tend to ask clarifying questions before diving into solutions\", \"memory_type\": \"personality_trait\"}\n</code></pre></p> <p>Note: Custom traits are a Premium+ feature. Changes affect your AI personality, just like changes made in the portal. Manage via the Personality API or the portal.</p>"},{"location":"api/guides/memory-types/#relationship","title":"<code>relationship</code>","text":"<p>User-AI relationship information.</p> <p>Use when: - Recording rapport or trust level - Noting communication preferences with specific users - Tracking relationship history</p> <p>Examples: <pre><code>{\"content\": \"User prefers direct, concise responses without excessive caveats\", \"memory_type\": \"relationship\"}\n{\"content\": \"Established trust through successful debugging sessions\", \"memory_type\": \"relationship\"}\n</code></pre></p>"},{"location":"api/guides/memory-types/#decision-guide","title":"Decision Guide","text":"Scenario Recommended Type \"X is true\" <code>fact</code> \"I noticed that X leads to Y\" <code>insight</code> \"User said they want X\" <code>conversation</code> \"Actually, X was wrong\" <code>correction</code> \"See documentation at X\" <code>reference</code> \"Need to do X later\" <code>task</code> \"When X happens, do Y\" <code>strategy</code> \"Save current session state\" <code>checkpoint</code> \"I am fundamentally X\" <code>identity_core</code> \"I tend to X\" <code>personality_trait</code> \"User and I have X dynamic\" <code>relationship</code>"},{"location":"api/guides/memory-types/#type-selection-tips","title":"Type Selection Tips","text":"<ol> <li>When in doubt, use <code>fact</code> - It's the most general type</li> <li>Use <code>insight</code> for derived knowledge - Not just raw data</li> <li>Use <code>correction</code> with relationships - Always link to what's being corrected</li> <li>Use <code>strategy</code> for reusable approaches - Things that apply across contexts</li> <li><code>identity_core</code> and <code>personality_trait</code> are protected \u2014 they cannot be created via the memories API or the MCP <code>store</code> tool. Use the <code>/api/v2/personality</code> endpoints instead</li> </ol>"},{"location":"api/guides/quick-start/","title":"Quick Start Guide","text":"<p>Get from zero to your first stored memory in under 5 minutes.</p>"},{"location":"api/guides/quick-start/#prerequisites","title":"Prerequisites","text":"<ul> <li>A Penfield account (sign up)</li> <li>An API key (from Portal \u2192 Settings \u2192 API Keys)</li> </ul>"},{"location":"api/guides/quick-start/#step-1-get-your-jwt-token","title":"Step 1: Get Your JWT Token","text":"<p>Exchange your API key for a JWT token.</p> <p>Note: This uses API Key Exchange, the simplest auth method. It returns both access and refresh tokens. For other auth options, see Authentication.</p> <pre><code># Replace with your actual API key\nAPI_KEY=\"tm_yourteam_ak_yourkey\"\n\n# Get JWT token\nTOKEN=$(curl -s -X POST https://api.penfield.app/api/v2/auth/token \\\n-H \"Authorization: Bearer $API_KEY\" \\\n-H \"Content-Type: application/json\" | python3 -c \"import sys,json; print(json.load(sys.stdin)['data']['access_token'])\")\n\necho \"Got token: ${TOKEN:0:20}...\"\n</code></pre>"},{"location":"api/guides/quick-start/#step-2-store-your-first-memory","title":"Step 2: Store Your First Memory","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/memories \\\n-H \"Authorization: Bearer $TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"content\": \"Penfield is an AI memory layer that provides persistent memory across sessions\",\n  \"memory_type\": \"fact\",\n  \"importance\": 0.8,\n  \"tags\": [\"penfield\", \"intro\"]\n}'\n</code></pre> <p>Response: <pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"content\": \"Penfield is an AI memory layer...\",\n    \"memory_type\": \"fact\",\n    \"importance\": 0.8,\n    \"tags\": [\"penfield\", \"intro\"],\n    \"created_at\": \"2025-01-06T12:00:00Z\"\n  }\n}\n</code></pre></p>"},{"location":"api/guides/quick-start/#step-3-search-your-memories","title":"Step 3: Search Your Memories","text":"<pre><code>curl -X POST https://api.penfield.app/api/v2/search/hybrid \\\n-H \"Authorization: Bearer $TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"query\": \"memory layer\",\n  \"limit\": 10\n}'\n</code></pre> <p>Response: <pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"items\": [\n      {\n        \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"content\": \"Penfield is an AI memory layer...\",\n        \"score\": 0.95,\n        \"memory_type\": \"fact\"\n      }\n    ],\n    \"total\": 1\n  }\n}\n</code></pre></p>"},{"location":"api/guides/quick-start/#step-4-connect-related-memories","title":"Step 4: Connect Related Memories","text":"<p>Store another memory and connect them:</p> <pre><code># Store a second memory\nMEMORY2=$(curl -s -X POST https://api.penfield.app/api/v2/memories \\\n-H \"Authorization: Bearer $TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"content\": \"Penfield uses hybrid search combining BM25, vector, and graph traversal\",\n  \"memory_type\": \"fact\",\n  \"importance\": 0.7,\n  \"tags\": [\"penfield\", \"search\"]\n}' | python3 -c \"import sys,json; print(json.load(sys.stdin)['data']['id'])\")\n\n# Connect the memories\ncurl -X POST https://api.penfield.app/api/v2/relationships \\\n-H \"Authorization: Bearer $TOKEN\" \\\n-H \"Content-Type: application/json\" \\\n-d \"{\n  \\\"from_id\\\": \\\"$MEMORY2\\\",\n  \\\"to_id\\\": \\\"550e8400-e29b-41d4-a716-446655440000\\\",\n  \\\"relationship_type\\\": \\\"supports\\\",\n  \\\"strength\\\": 0.8\n}\"\n</code></pre>"},{"location":"api/guides/quick-start/#whats-next","title":"What's Next?","text":"<p>Now that you have the basics:</p> <ol> <li>Explore Memory Types - Learn about the 11 memory types and when to use each</li> <li>Build Knowledge Graphs - See all 24 relationship types</li> <li>Handle Errors - Review error handling patterns</li> <li>Best Practices - Follow our best practices guide</li> </ol>"},{"location":"api/guides/quick-start/#quick-reference","title":"Quick Reference","text":""},{"location":"api/guides/quick-start/#authentication","title":"Authentication","text":"<pre><code># Get token\ncurl -X POST https://api.penfield.app/api/v2/auth/token \\\n-H \"Authorization: Bearer $API_KEY\"\n\n# Refresh token\ncurl -X POST https://api.penfield.app/api/v2/auth/refresh \\\n-d '{\"refresh_token\": \"YOUR_REFRESH_TOKEN\"}'\n</code></pre>"},{"location":"api/guides/quick-start/#core-operations","title":"Core Operations","text":"<pre><code># Create memory\nPOST /api/v2/memories\n\n# Search\nPOST /api/v2/search/hybrid\n\n# Get memory\nGET /api/v2/memories/{id}\n\n# Update memory\nPUT /api/v2/memories/{id}\n\n# Create relationship\nPOST /api/v2/relationships\n\n# Traverse graph\nPOST /api/v2/relationships/traverse\n</code></pre>"},{"location":"api/guides/quick-start/#token-lifetimes","title":"Token Lifetimes","text":"<ul> <li>Access token: 3 days</li> <li>Refresh token: 30 days</li> </ul> <p>Check <code>expires_in</code> in the response for exact values.</p>"},{"location":"api/guides/quick-start/#common-issues","title":"Common Issues","text":""},{"location":"api/guides/quick-start/#token-expired","title":"\"Token expired\"","text":"<p>Refresh your token or get a new one: <pre><code>curl -X POST https://api.penfield.app/api/v2/auth/refresh \\\n-H \"Content-Type: application/json\" \\\n-d '{\"refresh_token\": \"YOUR_REFRESH_TOKEN\"}'\n</code></pre></p>"},{"location":"api/guides/quick-start/#validation-failed","title":"\"Validation failed\"","text":"<p>Check your request body. Common issues: - <code>content</code> must be 1-10,000 characters - <code>importance</code> must be 0.0-1.0 - <code>memory_type</code> must be one of the valid types</p>"},{"location":"api/guides/quick-start/#no-search-results","title":"No search results","text":"<ul> <li>Check spelling in your query</li> <li>Try broader search terms</li> <li>Verify memories were created successfully</li> </ul>"},{"location":"api/guides/relationship-types/","title":"Relationship Types Guide","text":"<p>How to connect memories to build knowledge graphs.</p>"},{"location":"api/guides/relationship-types/#quick-reference","title":"Quick Reference","text":"Category Types Use For Knowledge Evolution <code>supersedes</code>, <code>updates</code>, <code>evolution_of</code> Tracking changes over time Evidence &amp; Support <code>supports</code>, <code>contradicts</code>, <code>disputes</code> Arguments and evidence Hierarchy <code>parent_of</code>, <code>child_of</code>, <code>sibling_of</code>, <code>composed_of</code>, <code>part_of</code> Organization Causation <code>causes</code>, <code>influenced_by</code>, <code>prerequisite_for</code> Cause and effect Implementation <code>implements</code>, <code>documents</code>, <code>example_of</code>, <code>tests</code> Code and docs Conversation <code>responds_to</code>, <code>references</code>, <code>inspired_by</code> Attribution Sequence <code>follows</code>, <code>precedes</code> Temporal order Dependencies <code>depends_on</code> Requirements"},{"location":"api/guides/relationship-types/#overview","title":"Overview","text":"<p>Penfield supports 24 relationship types organized into 7 categories. Relationships are directional: <code>from_id</code> \u2192 <code>to_id</code>.</p>"},{"location":"api/guides/relationship-types/#knowledge-evolution","title":"Knowledge Evolution","text":"<p>Track how information changes over time.</p>"},{"location":"api/guides/relationship-types/#supersedes","title":"<code>supersedes</code>","text":"<p>Completely replaces older information.</p> <pre><code>{\n  \"from_id\": \"new-memory-uuid\",\n  \"to_id\": \"old-memory-uuid\",\n  \"relationship_type\": \"supersedes\"\n}\n</code></pre> <p>Example: \"API uses OAuth 2.1\" supersedes \"API uses OAuth 2.0\"</p>"},{"location":"api/guides/relationship-types/#updates","title":"<code>updates</code>","text":"<p>Partially updates existing information.</p> <pre><code>{\n  \"from_id\": \"update-memory-uuid\",\n  \"to_id\": \"original-memory-uuid\",\n  \"relationship_type\": \"updates\"\n}\n</code></pre> <p>Example: \"Rate limit increased to 1000/min\" updates \"Rate limit is 500/min\"</p>"},{"location":"api/guides/relationship-types/#evolution_of","title":"<code>evolution_of</code>","text":"<p>Natural development or evolution from earlier concept.</p> <pre><code>{\n  \"from_id\": \"evolved-memory-uuid\",\n  \"to_id\": \"original-memory-uuid\",\n  \"relationship_type\": \"evolution_of\"\n}\n</code></pre> <p>Example: \"Microservices architecture\" evolution_of \"Monolithic design\"</p>"},{"location":"api/guides/relationship-types/#evidence-support","title":"Evidence &amp; Support","text":"<p>Express agreement or disagreement between memories.</p>"},{"location":"api/guides/relationship-types/#supports","title":"<code>supports</code>","text":"<p>Provides evidence or support for a claim.</p> <pre><code>{\n  \"from_id\": \"evidence-uuid\",\n  \"to_id\": \"claim-uuid\",\n  \"relationship_type\": \"supports\"\n}\n</code></pre> <p>Example: \"Benchmark shows 50% speedup\" supports \"Caching improves performance\"</p>"},{"location":"api/guides/relationship-types/#contradicts","title":"<code>contradicts</code>","text":"<p>Conflicts with or contradicts existing information.</p> <pre><code>{\n  \"from_id\": \"new-finding-uuid\",\n  \"to_id\": \"contradicted-uuid\",\n  \"relationship_type\": \"contradicts\"\n}\n</code></pre> <p>Example: \"Tests show memory leak\" contradicts \"Memory management is stable\"</p>"},{"location":"api/guides/relationship-types/#disputes","title":"<code>disputes</code>","text":"<p>Disagrees with or challenges (weaker than contradicts).</p> <pre><code>{\n  \"from_id\": \"disputing-uuid\",\n  \"to_id\": \"disputed-uuid\",\n  \"relationship_type\": \"disputes\"\n}\n</code></pre> <p>Example: \"Some users report issues\" disputes \"Feature works perfectly\"</p>"},{"location":"api/guides/relationship-types/#hierarchy-structure","title":"Hierarchy &amp; Structure","text":"<p>Organize memories into hierarchies.</p>"},{"location":"api/guides/relationship-types/#parent_of","title":"<code>parent_of</code>","text":"<p>Contains or encompasses (broader concept).</p> <pre><code>{\n  \"from_id\": \"broader-uuid\",\n  \"to_id\": \"narrower-uuid\",\n  \"relationship_type\": \"parent_of\"\n}\n</code></pre> <p>Example: \"Authentication system\" parent_of \"OAuth implementation\"</p>"},{"location":"api/guides/relationship-types/#child_of","title":"<code>child_of</code>","text":"<p>Is subset or part of (narrower concept).</p> <pre><code>{\n  \"from_id\": \"narrower-uuid\",\n  \"to_id\": \"broader-uuid\",\n  \"relationship_type\": \"child_of\"\n}\n</code></pre> <p>Example: \"JWT validation\" child_of \"Authentication system\"</p>"},{"location":"api/guides/relationship-types/#sibling_of","title":"<code>sibling_of</code>","text":"<p>At same level, parallel to (peer concepts).</p> <pre><code>{\n  \"from_id\": \"concept-a-uuid\",\n  \"to_id\": \"concept-b-uuid\",\n  \"relationship_type\": \"sibling_of\"\n}\n</code></pre> <p>Example: \"REST API\" sibling_of \"GraphQL API\"</p>"},{"location":"api/guides/relationship-types/#composed_of","title":"<code>composed_of</code>","text":"<p>Contains or is made of (composition).</p> <pre><code>{\n  \"from_id\": \"whole-uuid\",\n  \"to_id\": \"part-uuid\",\n  \"relationship_type\": \"composed_of\"\n}\n</code></pre> <p>Example: \"Search system\" composed_of \"BM25 module\"</p>"},{"location":"api/guides/relationship-types/#part_of","title":"<code>part_of</code>","text":"<p>Belongs to larger structure.</p> <pre><code>{\n  \"from_id\": \"part-uuid\",\n  \"to_id\": \"whole-uuid\",\n  \"relationship_type\": \"part_of\"\n}\n</code></pre> <p>Example: \"Vector index\" part_of \"Search system\"</p>"},{"location":"api/guides/relationship-types/#causation","title":"Causation","text":"<p>Express cause and effect.</p>"},{"location":"api/guides/relationship-types/#causes","title":"<code>causes</code>","text":"<p>Directly leads to or causes.</p> <pre><code>{\n  \"from_id\": \"cause-uuid\",\n  \"to_id\": \"effect-uuid\",\n  \"relationship_type\": \"causes\"\n}\n</code></pre> <p>Example: \"Missing index\" causes \"Slow query performance\"</p>"},{"location":"api/guides/relationship-types/#influenced_by","title":"<code>influenced_by</code>","text":"<p>Was shaped or affected by.</p> <pre><code>{\n  \"from_id\": \"influenced-uuid\",\n  \"to_id\": \"influencer-uuid\",\n  \"relationship_type\": \"influenced_by\"\n}\n</code></pre> <p>Example: \"API design\" influenced_by \"REST best practices\"</p>"},{"location":"api/guides/relationship-types/#prerequisite_for","title":"<code>prerequisite_for</code>","text":"<p>Required before or necessary for.</p> <pre><code>{\n  \"from_id\": \"prerequisite-uuid\",\n  \"to_id\": \"dependent-uuid\",\n  \"relationship_type\": \"prerequisite_for\"\n}\n</code></pre> <p>Example: \"Database migration\" prerequisite_for \"New feature deployment\"</p>"},{"location":"api/guides/relationship-types/#implementation-testing","title":"Implementation &amp; Testing","text":"<p>Connect concepts to their implementations.</p>"},{"location":"api/guides/relationship-types/#implements","title":"<code>implements</code>","text":"<p>Applies or implements a concept.</p> <pre><code>{\n  \"from_id\": \"implementation-uuid\",\n  \"to_id\": \"concept-uuid\",\n  \"relationship_type\": \"implements\"\n}\n</code></pre> <p>Example: \"PaymentService class\" implements \"Payment processing strategy\"</p>"},{"location":"api/guides/relationship-types/#documents","title":"<code>documents</code>","text":"<p>Describes or documents.</p> <pre><code>{\n  \"from_id\": \"documentation-uuid\",\n  \"to_id\": \"documented-uuid\",\n  \"relationship_type\": \"documents\"\n}\n</code></pre> <p>Example: \"API reference\" documents \"REST endpoints\"</p>"},{"location":"api/guides/relationship-types/#example_of","title":"<code>example_of</code>","text":"<p>Demonstrates or exemplifies.</p> <pre><code>{\n  \"from_id\": \"example-uuid\",\n  \"to_id\": \"concept-uuid\",\n  \"relationship_type\": \"example_of\"\n}\n</code></pre> <p>Example: \"User login flow\" example_of \"Authentication pattern\"</p>"},{"location":"api/guides/relationship-types/#tests","title":"<code>tests</code>","text":"<p>Verifies or validates.</p> <pre><code>{\n  \"from_id\": \"test-uuid\",\n  \"to_id\": \"tested-uuid\",\n  \"relationship_type\": \"tests\"\n}\n</code></pre> <p>Example: \"Integration test suite\" tests \"API endpoints\"</p>"},{"location":"api/guides/relationship-types/#conversation-attribution","title":"Conversation &amp; Attribution","text":"<p>Track dialogue and sources.</p>"},{"location":"api/guides/relationship-types/#responds_to","title":"<code>responds_to</code>","text":"<p>Response to previous statement.</p> <pre><code>{\n  \"from_id\": \"response-uuid\",\n  \"to_id\": \"question-uuid\",\n  \"relationship_type\": \"responds_to\"\n}\n</code></pre> <p>Example: \"Solution explanation\" responds_to \"User question about caching\"</p>"},{"location":"api/guides/relationship-types/#references","title":"<code>references</code>","text":"<p>Refers to or cites.</p> <pre><code>{\n  \"from_id\": \"citing-uuid\",\n  \"to_id\": \"cited-uuid\",\n  \"relationship_type\": \"references\"\n}\n</code></pre> <p>Example: \"Implementation note\" references \"Architecture decision record\"</p>"},{"location":"api/guides/relationship-types/#inspired_by","title":"<code>inspired_by</code>","text":"<p>Inspired or motivated by.</p> <pre><code>{\n  \"from_id\": \"inspired-uuid\",\n  \"to_id\": \"inspiration-uuid\",\n  \"relationship_type\": \"inspired_by\"\n}\n</code></pre> <p>Example: \"New caching approach\" inspired_by \"Redis documentation\"</p>"},{"location":"api/guides/relationship-types/#sequence-flow","title":"Sequence &amp; Flow","text":"<p>Express temporal ordering.</p>"},{"location":"api/guides/relationship-types/#follows","title":"<code>follows</code>","text":"<p>Comes after in sequence.</p> <pre><code>{\n  \"from_id\": \"later-uuid\",\n  \"to_id\": \"earlier-uuid\",\n  \"relationship_type\": \"follows\"\n}\n</code></pre> <p>Example: \"Deploy to production\" follows \"Run integration tests\"</p>"},{"location":"api/guides/relationship-types/#precedes","title":"<code>precedes</code>","text":"<p>Comes before in sequence.</p> <pre><code>{\n  \"from_id\": \"earlier-uuid\",\n  \"to_id\": \"later-uuid\",\n  \"relationship_type\": \"precedes\"\n}\n</code></pre> <p>Example: \"Code review\" precedes \"Merge to main\"</p>"},{"location":"api/guides/relationship-types/#dependencies","title":"Dependencies","text":"<p>Express dependencies between concepts.</p>"},{"location":"api/guides/relationship-types/#depends_on","title":"<code>depends_on</code>","text":"<p>Requires or depends upon.</p> <pre><code>{\n  \"from_id\": \"dependent-uuid\",\n  \"to_id\": \"dependency-uuid\",\n  \"relationship_type\": \"depends_on\"\n}\n</code></pre> <p>Example: \"Search feature\" depends_on \"Embedding service\"</p>"},{"location":"api/guides/relationship-types/#best-practices","title":"Best Practices","text":"<ol> <li>Use specific types - <code>supports</code> is better than a generic link</li> <li>Direction matters - Think about which memory is the subject</li> <li>Combine with strength - Use <code>strength</code> parameter (0-1) to indicate confidence</li> <li>Build chains - A \u2192 B \u2192 C creates traversable paths</li> <li>Connect corrections - Always link <code>correction</code> memories to originals</li> </ol>"},{"location":"api/guides/troubleshooting/","title":"Troubleshooting Guide","text":"<p>Solutions to common issues when using the Penfield API.</p>"},{"location":"api/guides/troubleshooting/#authentication-issues","title":"Authentication Issues","text":""},{"location":"api/guides/troubleshooting/#invalid-credentials-401","title":"\"Invalid credentials\" (401)","text":"<p>Symptom: <pre><code>{\n  \"status\": \"error\",\n  \"error\": {\n    \"code\": \"AUTH_INVALID_CREDENTIALS\",\n    \"message\": \"Invalid credentials\"\n  }\n}\n</code></pre></p> <p>Causes: 1. Wrong API key format 2. API key was revoked 3. Using API key instead of JWT token</p> <p>Solutions: <pre><code># Check API key format (should be tm_xxx_ak_xxx)\necho $API_KEY | grep -E '^tm_.*_ak_.*$'\n\n# Get a fresh JWT token\ncurl -X POST https://api.penfield.app/api/v2/auth/token \\\n-H \"Authorization: Bearer $API_KEY\" \\\n-H \"Content-Type: application/json\"\n</code></pre></p>"},{"location":"api/guides/troubleshooting/#token-expired-401","title":"\"Token expired\" (401)","text":"<p>Symptom: <pre><code>{\n  \"status\": \"error\",\n  \"error\": {\n    \"code\": \"AUTH_TOKEN_EXPIRED\",\n    \"message\": \"Token expired\"\n  }\n}\n</code></pre></p> <p>Solution: <pre><code># Refresh using refresh token\ncurl -X POST https://api.penfield.app/api/v2/auth/refresh \\\n-H \"Content-Type: application/json\" \\\n-d '{\"refresh_token\": \"YOUR_REFRESH_TOKEN\"}'\n</code></pre></p> <p>Prevention: - Store token expiry time: <code>expires_at = time.time() + expires_in</code> - Refresh proactively when <code>time.time() &gt; expires_at - 300</code></p>"},{"location":"api/guides/troubleshooting/#insufficient-permissions-403","title":"\"Insufficient permissions\" (403)","text":"<p>Symptom: <pre><code>{\n  \"status\": \"error\",\n  \"error\": {\n    \"code\": \"AUTH_INSUFFICIENT_PERMISSIONS\",\n    \"message\": \"Insufficient permissions. Required scope(s): write\"\n  }\n}\n</code></pre></p> <p>Solution: Request a new token with the required scopes: - <code>read</code> - For reading/searching - <code>write</code> - For creating/updating/deleting - <code>profile</code> - For profile access - <code>offline_access</code> - For refresh tokens</p> <p>Check available scopes via discovery: <pre><code>curl -s https://api.penfield.app/.well-known/oauth-authorization-server | \\\n  python3 -c \"import sys,json; print(json.load(sys.stdin)['scopes_supported'])\"\n</code></pre></p>"},{"location":"api/guides/troubleshooting/#validation-errors","title":"Validation Errors","text":""},{"location":"api/guides/troubleshooting/#validation-failed-400","title":"\"Validation failed\" (400)","text":"<p>Symptom: <pre><code>{\n  \"status\": \"error\",\n  \"error\": {\n    \"code\": \"VAL_VALIDATION_FAILED\",\n    \"message\": \"Validation failed\",\n    \"details\": {\n      \"field\": \"content\",\n      \"issue\": \"exceeds maximum length\"\n    }\n  }\n}\n</code></pre></p> <p>Common causes and limits:</p> Field Limit Solution <code>content</code> 10,000 chars Truncate or split into multiple memories <code>importance</code> 0.0-1.0 Ensure value is in range <code>tags</code> 10 max Use fewer, broader tags <code>memory_type</code> 11 valid types Check Memory Types Guide"},{"location":"api/guides/troubleshooting/#invalid-uuid-format-400","title":"\"Invalid UUID format\" (400)","text":"<p>Symptom: <pre><code>{\n  \"error\": {\n    \"code\": \"VAL_UUID_INVALID\",\n    \"message\": \"Invalid UUID format\"\n  }\n}\n</code></pre></p> <p>Solution: UUIDs must be in standard format: <code>550e8400-e29b-41d4-a716-446655440000</code></p> <pre><code>import uuid\n\n# Validate before sending\ntry:\n    uuid.UUID(memory_id)\nexcept ValueError:\n    raise ValueError(f\"Invalid UUID: {memory_id}\")\n</code></pre>"},{"location":"api/guides/troubleshooting/#invalid-relationship-type-400","title":"\"Invalid relationship type\" (400)","text":"<p>Solution: Use one of the 24 valid relationship types: <pre><code>supersedes, updates, evolution_of, supports, contradicts,\ndisputes, parent_of, child_of, sibling_of, causes,\ninfluenced_by, prerequisite_for, implements, documents,\nexample_of, tests, responds_to, references, inspired_by,\nfollows, precedes, depends_on, composed_of, part_of\n</code></pre></p> <p>See Relationship Types Guide.</p>"},{"location":"api/guides/troubleshooting/#search-issues","title":"Search Issues","text":""},{"location":"api/guides/troubleshooting/#no-results-returned","title":"No Results Returned","text":"<p>Possible causes:</p> <ol> <li>Query too specific</li> <li>Try broader search terms</li> <li> <p>Remove filters temporarily</p> </li> <li> <p>Memories not indexed yet</p> </li> <li>Wait a few seconds after creating</li> <li> <p>Embeddings are generated asynchronously</p> </li> <li> <p>Wrong source_type filter <pre><code>// This only searches documents, not memories\n{\"query\": \"my note\", \"source_type\": \"document\"}\n\n// Search all\n{\"query\": \"my note\"}\n</code></pre></p> </li> <li> <p>Date filter too narrow <pre><code>// Make sure your memory was created in this range\n{\"query\": \"test\", \"start_date\": \"2025-01-01\", \"end_date\": \"2025-01-07\"}\n</code></pre></p> </li> </ol>"},{"location":"api/guides/troubleshooting/#low-relevance-scores","title":"Low Relevance Scores","text":"<p>Symptom: Results return but with low scores (&lt; 0.1)</p> <p>Solutions: 1. Include more keywords in your memories 2. Use more descriptive content 3. Check if your query matches the language in your memories</p>"},{"location":"api/guides/troubleshooting/#results-not-in-expected-order","title":"Results Not in Expected Order","text":"<p>The hybrid search combines: - BM25 (keyword matching) - Vector (semantic similarity) - Graph (relationship traversal)</p> <p>If important results appear lower: 1. Increase their <code>importance</code> score 2. Add more relationships to them 3. Include relevant keywords in their content</p>"},{"location":"api/guides/troubleshooting/#rate-limiting","title":"Rate Limiting","text":""},{"location":"api/guides/troubleshooting/#rate-limit-exceeded-429","title":"\"Rate limit exceeded\" (429)","text":"<p>Symptom: <pre><code>{\n  \"status\": \"error\",\n  \"error\": {\n    \"code\": \"BIZ_RATE_LIMIT_EXCEEDED\",\n    \"message\": \"Rate limit exceeded\"\n  }\n}\n</code></pre></p> <p>Response headers: <pre><code>X-RateLimit-Limit: 100\nX-RateLimit-Remaining: 0\nX-RateLimit-Reset: 1704542400\nRetry-After: 60\n</code></pre></p> <p>Solutions:</p> <ol> <li> <p>Wait and retry: <pre><code>import time\n\nif response.status_code == 429:\n    retry_after = int(response.headers.get(\"Retry-After\", 60))\n    time.sleep(retry_after)\n    # Retry request\n</code></pre></p> </li> <li> <p>Implement exponential backoff: <pre><code>for attempt in range(5):\n    response = make_request()\n    if response.status_code != 429:\n        break\n    time.sleep(2 ** attempt)\n</code></pre></p> </li> <li> <p>Batch operations to reduce request count</p> </li> <li> <p>Upgrade tier for higher limits</p> </li> </ol>"},{"location":"api/guides/troubleshooting/#connectionnetwork-issues","title":"Connection/Network Issues","text":""},{"location":"api/guides/troubleshooting/#timeouts","title":"Timeouts","text":"<p>Symptom: Request hangs or times out</p> <p>Solutions:</p> <ol> <li> <p>Set reasonable timeouts: <pre><code>response = requests.post(url, json=data, timeout=30)\n</code></pre></p> </li> <li> <p>Use retry logic: <pre><code>from tenacity import retry, stop_after_attempt\n\n@retry(stop=stop_after_attempt(3))\ndef api_call():\n    return requests.post(url, json=data, timeout=30)\n</code></pre></p> </li> </ol>"},{"location":"api/guides/troubleshooting/#ssl-certificate-errors","title":"SSL Certificate Errors","text":"<p>Symptom: <code>SSL: CERTIFICATE_VERIFY_FAILED</code></p> <p>Solutions: 1. Update your CA certificates 2. Check system time is correct 3. Don't disable SSL verification in production</p>"},{"location":"api/guides/troubleshooting/#memoryrelationship-issues","title":"Memory/Relationship Issues","text":""},{"location":"api/guides/troubleshooting/#memory-not-found-404","title":"\"Memory not found\" (404)","text":"<p>Causes: 1. Memory was deleted 2. Wrong UUID 3. Memory belongs to different tenant</p> <p>Solution: <pre><code># Verify memory exists\ncurl -X GET \"https://api.penfield.app/api/v2/memories/$MEMORY_ID\" \\\n-H \"Authorization: Bearer $TOKEN\"\n</code></pre></p>"},{"location":"api/guides/troubleshooting/#relationship-already-exists-409","title":"\"Relationship already exists\" (409)","text":"<p>Cause: Trying to create a duplicate relationship</p> <p>Solutions: 1. Check if relationship exists first 2. Use a different relationship type 3. Update existing relationship instead</p>"},{"location":"api/guides/troubleshooting/#circular-relationship-warning","title":"Circular Relationship Warning","text":"<p>Creating A \u2192 B \u2192 C \u2192 A can cause infinite traversal loops.</p> <p>Prevention: - Design relationships as directed acyclic graphs when possible - Set <code>max_depth</code> limits on traversal operations</p>"},{"location":"api/guides/troubleshooting/#artifact-issues","title":"Artifact Issues","text":""},{"location":"api/guides/troubleshooting/#invalid-path-400","title":"\"Invalid path\" (400)","text":"<p>Path rules: - Must start with <code>/</code> - Must include filename (not just directory) - No <code>..</code> (path traversal) - No hidden files starting with <code>.</code> - Max depth: 10 levels - Valid chars: alphanumeric, <code>-</code>, <code>_</code>, <code>.</code>, <code>/</code></p> <p>Examples: <pre><code>\u2713 /project/notes.md\n\u2713 /docs/api/v2/guide.txt\n\u2717 ../secret/file.txt\n\u2717 /project/\n\u2717 /.hidden/file.md\n</code></pre></p>"},{"location":"api/guides/troubleshooting/#artifact-already-exists-409","title":"\"Artifact already exists\" (409)","text":"<p>Solutions: 1. Use a different path 2. Delete existing artifact first 3. Update content instead of creating new</p>"},{"location":"api/guides/troubleshooting/#mcp-integration-issues","title":"MCP Integration Issues","text":""},{"location":"api/guides/troubleshooting/#tool-not-working","title":"Tool Not Working","text":"<p>Checklist: 1. MCP server URL correct? 2. Authorization header set? 3. API key has required scopes? 4. Request body format correct?</p>"},{"location":"api/guides/troubleshooting/#personality-not-loading-awaken","title":"Personality Not Loading (awaken)","text":"<p>Solution: 1. Check if personality is configured in Portal 2. Call <code>awaken</code> at conversation start 3. Or use <code>restore_context(\"awakening\")</code></p>"},{"location":"api/guides/troubleshooting/#debugging-tips","title":"Debugging Tips","text":""},{"location":"api/guides/troubleshooting/#enable-request-logging","title":"Enable Request Logging","text":"<pre><code>import logging\nimport requests\n\nlogging.basicConfig(level=logging.DEBUG)\nrequests_log = logging.getLogger(\"requests.packages.urllib3\")\nrequests_log.setLevel(logging.DEBUG)\n</code></pre>"},{"location":"api/guides/troubleshooting/#check-request-id","title":"Check Request ID","text":"<p>Every response includes a <code>request_id</code> in the <code>meta</code> section:</p> <pre><code>{\n  \"meta\": {\n    \"request_id\": \"req_abc123\"\n  }\n}\n</code></pre> <p>Include this when contacting support.</p>"},{"location":"api/guides/troubleshooting/#verify-token-contents","title":"Verify Token Contents","text":"<pre><code># Decode JWT (payload section)\necho $TOKEN | cut -d. -f2 | base64 -d 2&gt;/dev/null | jq\n</code></pre> <p>Check: - <code>exp</code> - Expiration time - <code>scope</code> - Granted scopes - <code>tenant_id</code> - Correct tenant</p>"},{"location":"api/guides/troubleshooting/#getting-help","title":"Getting Help","text":"<p>If you're still stuck:</p> <ol> <li>Check the error code - See Error Handling Guide</li> <li>Review the API docs - Verify request format</li> <li>Check status page - For service issues</li> <li>Contact support - Include <code>request_id</code> and error details</li> </ol>"},{"location":"api/schemas/common/","title":"Common Response Schemas","text":"<p>All API responses follow consistent structures.</p>"},{"location":"api/schemas/common/#success-response","title":"Success Response","text":"<p>All successful responses follow this structure:</p> <pre><code>{\n  \"status\": \"success\",\n  \"data\": { ... },\n  \"meta\": {\n    \"timestamp\": \"2025-01-06T12:00:00.000Z\",\n    \"version\": \"2.0.0\",\n    \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\"\n  }\n}\n</code></pre>"},{"location":"api/schemas/common/#fields","title":"Fields","text":"Field Type Description <code>status</code> string Always <code>\"success\"</code> for successful responses <code>data</code> object/array Response payload (varies by endpoint) <code>meta</code> object Request metadata <code>meta.timestamp</code> datetime Server timestamp (ISO 8601) <code>meta.version</code> string API version <code>meta.request_id</code> UUID Unique request identifier for debugging"},{"location":"api/schemas/common/#error-response","title":"Error Response","text":"<p>All error responses follow this structure:</p> <pre><code>{\n  \"status\": \"error\",\n  \"error\": {\n    \"code\": \"RES_NOT_FOUND\",\n    \"message\": \"Memory not found\",\n    \"details\": {\n      \"resource_type\": \"Memory\",\n      \"resource_id\": \"550e8400-e29b-41d4-a716-446655440000\"\n    }\n  },\n  \"meta\": {\n    \"timestamp\": \"2025-01-06T12:00:00.000Z\",\n    \"version\": \"2.0.0\",\n    \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\"\n  }\n}\n</code></pre>"},{"location":"api/schemas/common/#error-fields","title":"Error Fields","text":"Field Type Description <code>status</code> string Always <code>\"error\"</code> for error responses <code>error.code</code> string Machine-readable error code <code>error.message</code> string Human-readable error message <code>error.details</code> object Additional error context (optional)"},{"location":"api/schemas/common/#pagination","title":"Pagination","text":"<p>Paginated responses include pagination metadata:</p> <pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"items\": [ ... ],\n    \"pagination\": {\n      \"page\": 1,\n      \"per_page\": 20,\n      \"total\": 150,\n      \"pages\": 8,\n      \"has_next\": true,\n      \"has_prev\": false\n    }\n  },\n  \"meta\": { ... }\n}\n</code></pre>"},{"location":"api/schemas/common/#pagination-fields","title":"Pagination Fields","text":"Field Type Description <code>page</code> integer Current page number (1-based) <code>per_page</code> integer Items per page <code>total</code> integer Total items across all pages <code>pages</code> integer Total number of pages <code>has_next</code> boolean More pages available after current <code>has_prev</code> boolean Pages available before current"},{"location":"api/schemas/common/#query-parameters","title":"Query Parameters","text":"Parameter Default Max Description <code>page</code> 1 - Page number <code>per_page</code> 20 100 Items per page"},{"location":"api/schemas/common/#bulk-operations","title":"Bulk Operations","text":"<p>Bulk operation responses include results and errors:</p> <pre><code>{\n  \"status\": \"success\",\n  \"data\": {\n    \"created\": [ ... ],\n    \"updated\": [ ... ],\n    \"deleted\": [ ... ],\n    \"errors\": [\n      {\n        \"index\": 5,\n        \"error\": {\n          \"code\": \"RES_NOT_FOUND\",\n          \"message\": \"Memory not found\"\n        }\n      }\n    ]\n  },\n  \"meta\": { ... }\n}\n</code></pre>"},{"location":"api/schemas/common/#memory-object","title":"Memory Object","text":"<p>The core memory data structure:</p> <pre><code>{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"content\": \"Memory content text...\",\n  \"memory_type\": \"fact\",\n  \"importance\": 0.8,\n  \"confidence\": 0.9,\n  \"surprise_score\": 0.5,\n  \"source_type\": \"direct_input\",\n  \"user_id\": \"user_123\",\n  \"access_count\": 5,\n  \"last_accessed\": \"2025-01-06T14:00:00.000Z\",\n  \"created_at\": \"2025-01-06T12:00:00.000Z\",\n  \"updated_at\": \"2025-01-06T12:00:00.000Z\",\n  \"metadata\": {},\n  \"embedding_status\": \"completed\",\n  \"relationships\": []\n}\n</code></pre>"},{"location":"api/schemas/common/#memory-fields","title":"Memory Fields","text":"Field Type Description <code>id</code> UUID Unique identifier <code>content</code> string Memory content (1-10,000 chars) <code>memory_type</code> string Type classification <code>importance</code> float Importance score (0-1) <code>confidence</code> float Confidence score (0-1) <code>surprise_score</code> float Novelty score (0-1) <code>source_type</code> string Origin of memory <code>user_id</code> string Creator identifier <code>access_count</code> integer Times accessed (not real-time) <code>last_accessed</code> datetime Last access timestamp (not real-time) <code>created_at</code> datetime Creation timestamp <code>updated_at</code> datetime Last update timestamp <code>metadata</code> object Custom metadata <code>embedding_status</code> string Embedding generation status <code>relationships</code> array Related memories (when populated) <p>Note: The <code>access_count</code> and <code>last_accessed</code> fields reflect access patterns over time but are not updated synchronously on each read. Do not rely on these fields for real-time consistency.</p>"},{"location":"api/schemas/common/#relationship-object","title":"Relationship Object","text":"<pre><code>{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"from_id\": \"memory-uuid-1\",\n  \"to_id\": \"memory-uuid-2\",\n  \"relationship_type\": \"supports\",\n  \"direction_type\": \"DIRECTED\",\n  \"strength\": 0.8,\n  \"confidence\": 0.9,\n  \"evidence\": {},\n  \"metadata\": {},\n  \"created_at\": \"2025-01-06T12:00:00.000Z\",\n  \"updated_at\": \"2025-01-06T12:00:00.000Z\"\n}\n</code></pre>"},{"location":"api/schemas/common/#relationship-fields","title":"Relationship Fields","text":"Field Type Description <code>id</code> UUID Unique identifier <code>from_id</code> UUID Source memory ID <code>to_id</code> UUID Target memory ID <code>relationship_type</code> string Type of relationship <code>direction_type</code> string Direction handling <code>strength</code> float Relationship strength (0-1) <code>confidence</code> float Confidence in relationship (0-1) <code>evidence</code> object Supporting evidence <code>metadata</code> object Reserved (system-managed)"},{"location":"api/schemas/common/#document-object","title":"Document Object","text":"<pre><code>{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"filename\": \"document.pdf\",\n  \"content_type\": \"application/pdf\",\n  \"size\": 1048576,\n  \"chunk_count\": 45,\n  \"processing_status\": \"completed\",\n  \"embedding_progress\": {\n    \"total\": 45,\n    \"completed\": 45,\n    \"pending\": 0,\n    \"failed\": 0,\n    \"percent_complete\": 100.0\n  },\n  \"metadata\": {},\n  \"created_at\": \"2025-01-06T12:00:00.000Z\",\n  \"updated_at\": \"2025-01-06T12:00:00.000Z\"\n}\n</code></pre>"},{"location":"api/schemas/common/#search-result-object","title":"Search Result Object","text":"<pre><code>{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"content\": \"Full memory content...\",\n  \"snippet\": \"Truncated content...\",\n  \"score\": 0.95,\n  \"score_breakdown\": {\n    \"final_score\": 0.95,\n    \"bm25_score\": 0.85,\n    \"vector_score\": 0.92,\n    \"graph_score\": 0.7\n  },\n  \"metadata\": {\n    \"memory_type\": \"fact\",\n    \"importance\": 0.8,\n    \"highlight\": \"Matching &lt;b&gt;terms&lt;/b&gt;...\"\n  },\n  \"source_type\": \"direct_input\",\n  \"created_at\": \"2025-01-06T12:00:00.000Z\",\n  \"content_with_context\": \"...\",\n  \"chunk_index\": 0,\n  \"total_chunks\": 1\n}\n</code></pre>"},{"location":"api/schemas/common/#timestamp-format","title":"Timestamp Format","text":"<p>All timestamps use ISO 8601 format with timezone:</p> <pre><code>2025-01-06T12:00:00.000Z\n</code></pre> <ul> <li>Always UTC (indicated by <code>Z</code> suffix)</li> <li>Millisecond precision</li> <li>Format: <code>YYYY-MM-DDTHH:mm:ss.sssZ</code></li> </ul>"},{"location":"api/schemas/common/#uuid-format","title":"UUID Format","text":"<p>All identifiers use UUID v4:</p> <pre><code>550e8400-e29b-41d4-a716-446655440000\n</code></pre> <ul> <li>36 characters including hyphens</li> <li>Format: <code>xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx</code></li> <li>Case-insensitive in requests</li> </ul>"},{"location":"api/schemas/enums/","title":"Enum Values","text":"<p>Reference for all enumerated values used in the API.</p>"},{"location":"api/schemas/enums/#memory-types","title":"Memory Types","text":"<p>Classification of memory content.</p> Value Description <code>fact</code> Verified information or knowledge <code>insight</code> Derived understanding, pattern, or realization <code>conversation</code> Conversational context or dialogue <code>correction</code> Update or correction to previous information <code>reference</code> External reference, citation, or link <code>task</code> Action item, todo, or pending work <code>checkpoint</code> Conversation state snapshot <code>identity_core</code> Core AI identity information (immutable) <code>personality_trait</code> AI personality characteristics (evolvable) <code>relationship</code> User-AI relationship information <code>strategy</code> Learned behavior patterns or approaches"},{"location":"api/schemas/enums/#usage","title":"Usage","text":"<pre><code>{\n  \"memory_type\": \"fact\"\n}\n</code></pre>"},{"location":"api/schemas/enums/#source-types","title":"Source Types","text":"<p>Origin of memory creation.</p> Value Description <code>direct_input</code> Manually entered by user or AI <code>document_upload</code> Extracted from uploaded document <code>web_scrape</code> Scraped from web page <code>api_import</code> Imported via API from external source <code>conversation</code> Captured from conversation <code>reflection</code> Generated from analysis/reflection <code>checkpoint</code> Created during checkpoint operation <code>checkpoint_recall</code> Restored from checkpoint"},{"location":"api/schemas/enums/#usage_1","title":"Usage","text":"<pre><code>{\n  \"source_type\": \"direct_input\"\n}\n</code></pre>"},{"location":"api/schemas/enums/#relationship-types","title":"Relationship Types","text":"<p>Types of connections between memories. 24 types total.</p>"},{"location":"api/schemas/enums/#knowledge-evolution","title":"Knowledge Evolution","text":"Value Description <code>supersedes</code> Completely replaces older information <code>updates</code> Partially updates existing information <code>evolution_of</code> Natural evolution or development from"},{"location":"api/schemas/enums/#evidence-support","title":"Evidence &amp; Support","text":"Value Description <code>supports</code> Provides evidence or support for <code>contradicts</code> Conflicts with or contradicts <code>disputes</code> Disagrees with or challenges"},{"location":"api/schemas/enums/#hierarchy-structure","title":"Hierarchy &amp; Structure","text":"Value Description <code>parent_of</code> Contains or encompasses <code>child_of</code> Is subset or part of <code>sibling_of</code> At same level, parallel to <code>composed_of</code> Contains or is made of <code>part_of</code> Belongs to larger structure"},{"location":"api/schemas/enums/#causation","title":"Causation","text":"Value Description <code>causes</code> Directly leads to or causes <code>influenced_by</code> Was shaped or affected by <code>prerequisite_for</code> Required before or necessary for"},{"location":"api/schemas/enums/#implementation-testing","title":"Implementation &amp; Testing","text":"Value Description <code>implements</code> Applies or implements concept <code>documents</code> Describes or documents <code>tests</code> Verifies or validates <code>example_of</code> Demonstrates or exemplifies"},{"location":"api/schemas/enums/#conversation-attribution","title":"Conversation &amp; Attribution","text":"Value Description <code>responds_to</code> Response to previous statement <code>references</code> Refers to or cites <code>inspired_by</code> Inspired or motivated by"},{"location":"api/schemas/enums/#sequence-flow","title":"Sequence &amp; Flow","text":"Value Description <code>follows</code> Comes after in sequence <code>precedes</code> Comes before in sequence"},{"location":"api/schemas/enums/#dependencies","title":"Dependencies","text":"Value Description <code>depends_on</code> Requires or depends upon"},{"location":"api/schemas/enums/#usage_2","title":"Usage","text":"<pre><code>{\n  \"relationship_type\": \"supports\"\n}\n</code></pre>"},{"location":"api/schemas/enums/#direction-types","title":"Direction Types","text":"<p>How relationships are traversed.</p> Value Description <code>DIRECTED</code> One-way relationship (A \u2192 B) <code>BIDIRECTIONAL</code> Single relationship, queryable both ways <code>INVERSE_PAIRED</code> Two relationships with inverse types"},{"location":"api/schemas/enums/#usage_3","title":"Usage","text":"<pre><code>{\n  \"direction_type\": \"DIRECTED\"\n}\n</code></pre>"},{"location":"api/schemas/enums/#embedding-status","title":"Embedding Status","text":"<p>Status of embedding generation.</p> Value Description <code>pending</code> Embedding not yet generated <code>completed</code> Embedding successfully generated <code>failed</code> Embedding generation failed"},{"location":"api/schemas/enums/#document-status","title":"Document Status","text":"<p>Document processing status.</p> Value Description <code>uploading</code> File is being uploaded <code>processing</code> Document is being chunked <code>active</code> Ready for search <code>completed</code> All processing complete <code>failed</code> Processing failed"},{"location":"api/schemas/enums/#evolution-types","title":"Evolution Types","text":"<p>Types of memory evolution.</p> Value Description <code>correction</code> Fixed an error or inaccuracy <code>update</code> Added new information <code>expansion</code> Expanded with more detail <code>contradiction</code> Conflicting information found <code>deprecation</code> Marked as outdated"},{"location":"api/schemas/enums/#usage_4","title":"Usage","text":"<pre><code>{\n  \"evolution_type\": \"correction\"\n}\n</code></pre>"},{"location":"api/schemas/enums/#lifecycle-states","title":"Lifecycle States","text":"<p>Memory lifecycle states.</p> Value Description <code>active</code> Current, active memory <code>superseded</code> Replaced by newer version <code>corrected</code> Corrected by newer version <code>contradicted</code> Contradicted by other information <code>archived</code> Archived, no longer active"},{"location":"api/schemas/enums/#contradiction-types","title":"Contradiction Types","text":"<p>Types of contradictions between memories.</p> Value Description <code>direct</code> Completely contradictory statements <code>partial</code> Partially conflicting information <code>contextual</code> Contradictory in specific contexts"},{"location":"api/schemas/enums/#resolution-status","title":"Resolution Status","text":"<p>Contradiction resolution status.</p> Value Description <code>unresolved</code> Not yet addressed <code>resolved</code> Resolved with new information <code>accepted</code> One version accepted as correct"},{"location":"api/schemas/enums/#traversal-directions","title":"Traversal Directions","text":"<p>Graph traversal directions.</p> Value Description <code>OUTBOUND</code> Follow from source to target <code>INBOUND</code> Follow from target to source <code>ANY</code> Follow in either direction"},{"location":"api/schemas/enums/#usage_5","title":"Usage","text":"<pre><code>{\n  \"direction\": \"OUTBOUND\"\n}\n</code></pre>"},{"location":"api/schemas/enums/#time-windows","title":"Time Windows","text":"<p>Relative time periods for analysis.</p> Value Description <code>recent</code> Last 50 memories <code>today</code> Today's memories <code>yesterday</code> Yesterday's memories <code>week</code> Last 7 days <code>month</code> Last 30 days <code>quarter</code> Last 90 days <code>year</code> Last 365 days"},{"location":"api/schemas/enums/#usage_6","title":"Usage","text":"<pre><code>{\n  \"time_range\": \"week\"\n}\n</code></pre>"},{"location":"api/schemas/enums/#sort-orders","title":"Sort Orders","text":"<p>Sort direction indicators.</p> Prefix Direction (none) Ascending <code>-</code> Descending"},{"location":"api/schemas/enums/#examples","title":"Examples","text":"Value Description <code>created_at</code> Oldest first <code>-created_at</code> Newest first (default) <code>importance</code> Lowest first <code>-importance</code> Highest first"},{"location":"api/schemas/enums/#usage_7","title":"Usage","text":"<pre><code>{\n  \"sort\": \"-created_at\"\n}\n</code></pre>"},{"location":"mcp/mcp-integration/","title":"MCP Integration Guide","text":"<p>Penfield provides a Model Context Protocol (MCP) server for direct integration with AI assistants like Claude Desktop, Cursor, and other MCP-compatible clients.</p>"},{"location":"mcp/mcp-integration/#overview","title":"Overview","text":"<p>The MCP server exposes Penfield's memory and knowledge graph capabilities as tools that AI assistants can use during conversations. This enables persistent memory across sessions without requiring direct API integration.</p>"},{"location":"mcp/mcp-integration/#available-tools","title":"Available Tools","text":""},{"location":"mcp/mcp-integration/#initialization-tools","title":"Initialization Tools","text":"Tool Description API Equivalent <code>awaken</code> Load personality configuration <code>GET /api/v2/personality/awakening</code>"},{"location":"mcp/mcp-integration/#memory-tools","title":"Memory Tools","text":"Tool Description API Equivalent <code>store</code> Store a new memory <code>POST /api/v2/memories</code> <code>recall</code> Hybrid search (BM25 + vector + graph) for context retrieval <code>POST /api/v2/search/hybrid</code> <code>fetch</code> Get a specific memory <code>GET /api/v2/memories/{id}</code> <code>search</code> Semantic search for fuzzy concept matching <code>POST /api/v2/search/hybrid</code> <code>update_memory</code> Update an existing memory <code>PUT /api/v2/memories/{id}</code>"},{"location":"mcp/mcp-integration/#knowledge-graph-tools","title":"Knowledge Graph Tools","text":"Tool Description API Equivalent <code>connect</code> Create relationship between memories <code>POST /api/v2/relationships</code> <code>explore</code> Traverse the knowledge graph <code>POST /api/v2/relationships/traverse</code> <p>Note: <code>disconnect</code> (relationship removal) is registered as an MCP tool but returns <code>403 Forbidden</code> for standard MCP users. It requires elevated permissions (<code>RELATIONSHIPS_DELETE</code>, <code>DELETE</code>, or <code>ADMIN</code> scope). Use the REST API with <code>write</code> scope or Penfield Portal instead.</p>"},{"location":"mcp/mcp-integration/#context-management-tools","title":"Context Management Tools","text":"Tool Description API Equivalent <code>save_context</code> Create a checkpoint <code>POST /api/v2/memories</code> (type: checkpoint) <code>restore_context</code> Recall a checkpoint <code>GET /api/v2/memories</code> + fetch <code>list_contexts</code> List saved checkpoints <code>GET /api/v2/memories?memory_type=checkpoint</code> <code>reflect</code> Analyze recent memories <code>POST /api/v2/analysis/reflect</code>"},{"location":"mcp/mcp-integration/#storage-tools","title":"Storage Tools","text":"Tool Description API Equivalent <code>save_artifact</code> Store a file <code>POST /api/v2/artifacts</code> <code>retrieve_artifact</code> Get a stored file <code>GET /api/v2/artifacts</code> <code>list_artifacts</code> List stored files <code>GET /api/v2/artifacts/list</code> <code>delete_artifact</code> Remove a stored file <code>DELETE /api/v2/artifacts</code>"},{"location":"mcp/mcp-integration/#tool-parameters","title":"Tool Parameters","text":"<p>Note: MCP tool parameters use different names than the REST API. The MCP server maps them internally: - MCP <code>from_memory</code> / <code>to_memory</code> \u2192 REST API <code>from_id</code> / <code>to_id</code> - MCP <code>start_memory</code> \u2192 REST API <code>start_memory_id</code> - MCP <code>memory_id</code> \u2192 REST API <code>id</code> (in path)</p> <p>This documentation shows MCP parameter names. For direct REST API usage, see the API documentation.</p>"},{"location":"mcp/mcp-integration/#awaken","title":"awaken","text":"<p>Load the user's personality briefing at the start of a conversation.</p> <p>Parameters: None</p> <pre><code>{}\n</code></pre> <p>Response: <pre><code>{\n  \"success\": true,\n  \"briefing\": \"=== AWAKENING BRIEFING ===\\n...\"\n}\n</code></pre></p>"},{"location":"mcp/mcp-integration/#store","title":"store","text":"<p>Store a new memory with automatic type detection.</p> <pre><code>{\n  \"content\": \"Python async uses asyncio for concurrent operations\",\n  \"tags\": [\"python\", \"async\"],\n  \"importance\": 0.8\n}\n</code></pre> Parameter Type Required Description <code>content</code> string Yes Memory content (1-10,000 chars) <code>tags</code> array No Tags for categorization <code>importance</code> number No 0.0-1.0 (auto-calculated if omitted) <p>Note: Memory type is auto-detected from content. Valid types: fact, insight, conversation, correction, reference, task, checkpoint, relationship, strategy.</p> <p>Protected types: <code>identity_core</code> and <code>personality_trait</code> are managed exclusively through the <code>/api/v2/personality</code> endpoints and cannot be created via <code>store</code>. The auto-detection will not produce these types.</p>"},{"location":"mcp/mcp-integration/#recall","title":"recall","text":"<p>Hybrid search (BM25 + vector + graph). Use when you need context before responding, resuming a topic, or looking up prior decisions.</p> <pre><code>{\n  \"query\": \"async programming patterns\",\n  \"limit\": 20,\n  \"source_type\": \"memory\",\n  \"tags\": [\"python\"],\n  \"start_date\": \"2025-01-01\",\n  \"end_date\": \"2025-01-31\"\n}\n</code></pre> Parameter Type Required Description <code>query</code> string Yes Search query <code>limit</code> number No Max results (default: 10, max: 100) <code>source_type</code> string No Filter: \"memory\", \"document\", or null for all <code>tags</code> array No Filter by tags (OR logic) <code>start_date</code> string No Filter by date (ISO 8601) <code>end_date</code> string No Filter by date (ISO 8601)"},{"location":"mcp/mcp-integration/#search","title":"search","text":"<p>Semantic search (higher vector weight). Use for fuzzy concept search when you don't have exact terms. Returns ChatGPT-compatible citation format.</p> <pre><code>{\n  \"query\": \"async programming\",\n  \"limit\": 10\n}\n</code></pre> Parameter Type Required Description <code>query</code> string Yes Search query <code>limit</code> number No Max results (default: 10, max: 100) <p>Response includes citation fields: <code>id</code>, <code>title</code>, <code>url</code>, <code>text</code></p>"},{"location":"mcp/mcp-integration/#fetch","title":"fetch","text":"<p>Get a specific memory by ID with citation support.</p> <pre><code>{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440000\"\n}\n</code></pre> Parameter Type Required Description <code>id</code> UUID Yes Memory ID to fetch"},{"location":"mcp/mcp-integration/#update_memory","title":"update_memory","text":"<p>Update an existing memory.</p> <pre><code>{\n  \"memory_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"content\": \"Updated content...\",\n  \"importance\": 0.9,\n  \"tags\": [\"updated\", \"important\"]\n}\n</code></pre> Parameter Type Required Description <code>memory_id</code> UUID Yes Memory ID to update <code>content</code> string No New content <code>importance</code> number No New importance (0-1) <code>tags</code> array No New tags (replaces existing)"},{"location":"mcp/mcp-integration/#connect","title":"connect","text":"<p>Create a relationship between two memories.</p> <pre><code>{\n  \"from_memory\": \"uuid-1\",\n  \"to_memory\": \"uuid-2\",\n  \"relationship_type\": \"supports\",\n  \"strength\": 0.8\n}\n</code></pre> Parameter Type Required Description <code>from_memory</code> UUID Yes Source memory ID <code>to_memory</code> UUID Yes Target memory ID <code>relationship_type</code> enum Yes One of 24 relationship types <code>strength</code> number No 0.0-1.0 (default: 0.5) <p>MCP \u2194 REST Parameter Mapping: - MCP <code>from_memory</code> \u2192 REST API <code>from_id</code> - MCP <code>to_memory</code> \u2192 REST API <code>to_id</code></p>"},{"location":"mcp/mcp-integration/#explore","title":"explore","text":"<p>Traverse the knowledge graph from a starting memory.</p> <pre><code>{\n  \"start_memory\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"max_depth\": 3,\n  \"relationship_types\": [\"supports\", \"references\"]\n}\n</code></pre> Parameter Type Required Description <code>start_memory</code> UUID Yes Starting memory ID <code>max_depth</code> number No Max traversal depth (default: 3, max: 10) <code>relationship_types</code> array No Filter by relationship types"},{"location":"mcp/mcp-integration/#reflect","title":"reflect","text":"<p>Analyze memory patterns and generate insights.</p> <pre><code>{\n  \"time_window\": \"week\",\n  \"include_documents\": false,\n  \"start_date\": \"2025-01-01\",\n  \"end_date\": \"2025-01-07\"\n}\n</code></pre> Parameter Type Required Description <code>time_window</code> enum No \"recent\", \"today\", \"week\" (default: \"recent\") <code>include_documents</code> boolean No Include document chunks (default: false) <code>start_date</code> string No Filter by date (ISO 8601) <code>end_date</code> string No Filter by date (ISO 8601)"},{"location":"mcp/mcp-integration/#save_context","title":"save_context","text":"<p>Create a checkpoint of cognitive state for session handoffs.</p> <pre><code>{\n  \"name\": \"API Investigation\",\n  \"description\": \"[Session] Found the bug in auth flow. Key discovery in memory_id: 550e8400-e29b-41d4-a716-446655440000. Also see memory: 'JWT validation issue'. Next: test fix.\"\n}\n</code></pre> Parameter Type Required Description <code>name</code> string Yes Checkpoint name (must be unique per tenant) <code>description</code> string No Detailed cognitive handoff description <p>Unique Names:</p> <p>Checkpoint names are unique per tenant. Saving with a name that already exists returns an error instead of silently overwriting:</p> <pre><code>{\n  \"success\": false,\n  \"error\": \"Context name 'My Checkpoint' already exists. Use a unique name.\",\n  \"error_code\": \"DUPLICATE_NAME\",\n  \"operation\": \"save_context\"\n}\n</code></pre> <p>To avoid collisions, include a timestamp or session identifier in the name (e.g., <code>\"Auth Investigation - 2026-02-11\"</code>).</p> <p>Memory References in Descriptions</p> <p>You can reference memories in the description to link them to the checkpoint. Two formats are supported:</p> Format Reliability Example <code>memory_id: UUID</code> Reliable \u2014 direct lookup, always resolves <code>memory_id: 550e8400-e29b-41d4-a716-446655440000</code> <code>memory: 'phrase'</code> Best-effort \u2014 search + substring matching, may not resolve <code>see memory: 'JWT validation issue'</code> <p>Prefer <code>memory_id: UUID</code> references whenever you have the UUID. Semantic phrase references use hybrid search with substring matching and may silently fail to resolve if the memory isn't in the top results.</p> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"message\": \"Context 'API Investigation' saved\",\n  \"context_id\": \"uuid\",\n  \"memories_included\": 8,\n  \"name\": \"API Investigation\",\n  \"references_extracted\": 2,\n  \"references_resolved\": 2\n}\n</code></pre> Field Description <code>context_id</code> UUID of the created checkpoint memory <code>memories_included</code> Total memories attached to the checkpoint <code>references_extracted</code> Number of memory references parsed from description <code>references_resolved</code> Number of references that matched a memory <code>unresolved_references</code> List of phrases that didn't resolve (only present when &gt; 0) <code>hint</code> Suggestion to use UUID format (only present when there are failures)"},{"location":"mcp/mcp-integration/#restore_context","title":"restore_context","text":"<p>Restore a saved checkpoint.</p> <pre><code>{\n  \"name\": \"API Investigation\",\n  \"limit\": 20\n}\n</code></pre> Parameter Type Required Description <code>name</code> string Yes Checkpoint name to restore <code>limit</code> number No Max memories to return (default: 20) <p>Special case: <code>name: \"awakening\"</code> loads the user's personality configuration.</p>"},{"location":"mcp/mcp-integration/#list_contexts","title":"list_contexts","text":"<p>List saved checkpoints with optional filtering and pagination.</p> <p>Parameters:</p> Parameter Type Default Description <code>limit</code> integer <code>20</code> Maximum contexts to return (1-100) <code>offset</code> integer <code>0</code> Number of contexts to skip (pagination) <code>name_pattern</code> string - Filter by name (case-insensitive substring match) <code>include_descriptions</code> boolean <code>false</code> Include full descriptions in results <p>Example - Basic: <pre><code>{\n  \"limit\": 10\n}\n</code></pre></p> <p>Example - With filtering: <pre><code>{\n  \"limit\": 20,\n  \"name_pattern\": \"investigation\",\n  \"include_descriptions\": true\n}\n</code></pre></p> <p>Response: <pre><code>{\n  \"success\": true,\n  \"total\": 3,\n  \"limit\": 20,\n  \"offset\": 0,\n  \"has_more\": false,\n  \"contexts\": [\n    {\n      \"id\": \"uuid\",\n      \"name\": \"API Investigation\",\n      \"description\": \"Detailed context from API debugging session...\",\n      \"memory_count\": 15,\n      \"created\": \"2025-01-06T12:00:00Z\"\n    }\n  ]\n}\n</code></pre></p> Field Description <code>total</code> Total number of matching contexts <code>limit</code> Page size used <code>offset</code> Number of results skipped <code>has_more</code> Whether more results exist beyond this page <p>Notes: - <code>name_pattern</code> performs case-insensitive substring matching across all pages - <code>include_descriptions</code> adds full description text (can be large) - Contexts are ordered by creation date (newest first) - <code>total</code> reflects the full count of matching contexts, regardless of <code>limit</code></p>"},{"location":"mcp/mcp-integration/#save_artifact","title":"save_artifact","text":"<p>Save a file artifact.</p> <pre><code>{\n  \"content\": \"# Notes\\n\\nContent here...\",\n  \"path\": \"/project/notes.md\"\n}\n</code></pre> Parameter Type Required Description <code>content</code> string Yes File content <code>path</code> string Yes Path starting with / (e.g., /project/file.txt) <p>Path rules: - Must start with <code>/</code> - Must specify filename (not directory) - No path traversal (<code>..</code>) - No hidden files (<code>.</code>) - Max depth: 10 levels - Valid characters: alphanumeric, <code>-</code>, <code>_</code>, <code>.</code>, <code>/</code></p>"},{"location":"mcp/mcp-integration/#retrieve_artifact","title":"retrieve_artifact","text":"<p>Get a stored artifact.</p> <pre><code>{\n  \"path\": \"/project/notes.md\"\n}\n</code></pre> Parameter Type Required Description <code>path</code> string Yes Artifact path to retrieve"},{"location":"mcp/mcp-integration/#list_artifacts","title":"list_artifacts","text":"<p>List artifacts in a directory.</p> <pre><code>{\n  \"path_prefix\": \"/project/\"\n}\n</code></pre> Parameter Type Required Description <code>path_prefix</code> string No Directory prefix (default: \"/\")"},{"location":"mcp/mcp-integration/#delete_artifact","title":"delete_artifact","text":"<p>Delete a stored artifact.</p> <pre><code>{\n  \"path\": \"/project/old-notes.md\"\n}\n</code></pre> Parameter Type Required Description <code>path</code> string Yes Artifact path to delete"},{"location":"mcp/mcp-integration/#restricted-tools-not-available-via-standard-mcp","title":"Restricted Tools (Not Available via Standard MCP)","text":"<p>These tools require elevated permissions and are only available via the REST API with <code>write</code> scope or through the Penfield Portal.</p>"},{"location":"mcp/mcp-integration/#disconnect","title":"disconnect","text":"<p>Remove a relationship between memories.</p> <p>Status: Registered as MCP tool but requires elevated permissions.</p> <p>Why it fails: The tool is visible in MCP tool lists, but calling it returns <code>403 Forbidden</code> for standard MCP users. The underlying API endpoint requires <code>RELATIONSHIPS_DELETE</code>, <code>DELETE</code>, or <code>ADMIN</code> scope, which standard MCP access does not include.</p> <p>Recommendation: Use the REST API with <code>write</code> scope or access via Penfield Portal for relationship removal.</p> <p>Parameters: - <code>from_memory</code> (UUID): Source memory ID - <code>to_memory</code> (UUID): Target memory ID</p> <p>API Endpoint: <code>DELETE /api/v2/relationships/between?from_id={id}&amp;to_id={id}</code></p> <p>Error when called via MCP: <pre><code>{\n  \"error\": \"Forbidden\",\n  \"status_code\": 403\n}\n</code></pre></p>"},{"location":"mcp/mcp-integration/#delete_memory","title":"delete_memory","text":"<p>Permanently delete a memory.</p> <p>Why restricted: Memory deletion is a destructive operation. To prevent accidental data loss, it's excluded from MCP tools and requires explicit API access with <code>write</code> scope.</p> <p>API Endpoint: <code>DELETE /api/v2/memories/{id}</code></p>"},{"location":"mcp/mcp-integration/#deprecated-tools","title":"Deprecated Tools","text":"<p>These tools are deprecated and will be removed in a future release.</p>"},{"location":"mcp/mcp-integration/#summarize","title":"summarize","text":"<p>Status: Deprecated - use <code>save_context</code> instead.</p> <p>The summarize tool produced statistical summaries rather than useful cognitive handoffs. It has been replaced by <code>save_context</code> which preserves narrative context and memory references.</p>"},{"location":"mcp/mcp-integration/#get_storage_access","title":"get_storage_access","text":"<p>Status: Deprecated - use Penfield Portal instead.</p> <p>Direct MinIO storage access has been removed for security reasons. Use the Penfield Portal to manage documents.</p>"},{"location":"mcp/mcp-integration/#relationship-types","title":"Relationship Types","text":"<p>When using <code>connect</code>, choose from these 24 relationship types:</p>"},{"location":"mcp/mcp-integration/#knowledge-evolution","title":"Knowledge Evolution","text":"<ul> <li><code>supersedes</code> - Replaces outdated information</li> <li><code>updates</code> - Modifies existing knowledge</li> <li><code>evolution_of</code> - Develops from earlier concept</li> </ul>"},{"location":"mcp/mcp-integration/#evidence-support","title":"Evidence &amp; Support","text":"<ul> <li><code>supports</code> - Provides evidence for</li> <li><code>contradicts</code> - Challenges existing belief</li> <li><code>disputes</code> - Disagrees with</li> </ul>"},{"location":"mcp/mcp-integration/#hierarchy-structure","title":"Hierarchy &amp; Structure","text":"<ul> <li><code>parent_of</code> - Encompasses more specific concept</li> <li><code>child_of</code> - Subset of broader concept</li> <li><code>sibling_of</code> - Parallel concept at same level</li> <li><code>composed_of</code> - Contains component parts</li> <li><code>part_of</code> - Belongs to larger structure</li> </ul>"},{"location":"mcp/mcp-integration/#causation","title":"Causation","text":"<ul> <li><code>causes</code> - Leads to effect/outcome</li> <li><code>influenced_by</code> - Was shaped by</li> <li><code>prerequisite_for</code> - Required for next concept</li> </ul>"},{"location":"mcp/mcp-integration/#implementation-testing","title":"Implementation &amp; Testing","text":"<ul> <li><code>implements</code> - Applies theoretical concept</li> <li><code>documents</code> - Describes system/process</li> <li><code>tests</code> - Verifies or validates</li> <li><code>example_of</code> - Demonstrates general principle</li> </ul>"},{"location":"mcp/mcp-integration/#conversation-attribution","title":"Conversation &amp; Attribution","text":"<ul> <li><code>responds_to</code> - Response to previous statement</li> <li><code>references</code> - Refers to or cites</li> <li><code>inspired_by</code> - Inspired or motivated by</li> </ul>"},{"location":"mcp/mcp-integration/#sequence-flow","title":"Sequence &amp; Flow","text":"<ul> <li><code>follows</code> - Comes after in sequence</li> <li><code>precedes</code> - Comes before in sequence</li> </ul>"},{"location":"mcp/mcp-integration/#dependencies","title":"Dependencies","text":"<ul> <li><code>depends_on</code> - Requires prerequisite</li> </ul>"},{"location":"mcp/mcp-integration/#configuration","title":"Configuration","text":"<p>MCP server configuration varies by client. Contact Penfield support for:</p> <ul> <li>MCP server URL</li> <li>Authentication credentials</li> <li>Client-specific setup instructions</li> </ul>"},{"location":"mcp/mcp-integration/#claude-desktop","title":"Claude Desktop","text":"<p>Add to your Claude Desktop MCP configuration:</p> <pre><code>{\n  \"mcpServers\": {\n    \"penfield\": {\n      \"url\": \"YOUR_MCP_SERVER_URL\",\n      \"headers\": {\n        \"Authorization\": \"Bearer YOUR_API_KEY\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"mcp/mcp-integration/#best-practices","title":"Best Practices","text":""},{"location":"mcp/mcp-integration/#memory-storage","title":"Memory Storage","text":"<ol> <li>Store detailed, contextual information</li> <li>Let the system auto-detect memory types</li> <li>Use descriptive tags for organization</li> <li>Include reasoning and evidence in content</li> </ol>"},{"location":"mcp/mcp-integration/#knowledge-graph","title":"Knowledge Graph","text":"<ol> <li>Always connect related memories after storing</li> <li>Use specific relationship types (see the 24 available types above)</li> <li>Build chains of evidence with <code>supports</code> relationships</li> <li>Track corrections with <code>supersedes</code> relationships</li> </ol>"},{"location":"mcp/mcp-integration/#context-management","title":"Context Management","text":"<ol> <li>Save checkpoints at investigation milestones</li> <li>Include detailed descriptions in checkpoints</li> <li>Reference memories by UUID (<code>memory_id: UUID</code>) for reliable linking</li> <li>Use meaningful checkpoint names</li> </ol>"},{"location":"mcp/mcp-integration/#performance","title":"Performance","text":"<ol> <li>Use <code>recall</code> with appropriate limits</li> <li>Filter by source_type when searching documents vs memories</li> <li>Limit graph exploration depth for large graphs</li> <li>Use <code>reflect</code> sparingly (computationally expensive)</li> </ol>"},{"location":"mcp/mcp-integration/#error-handling","title":"Error Handling","text":"<p>MCP tools return errors in this format:</p> <pre><code>{\n  \"success\": false,\n  \"error\": \"Memory not found\",\n  \"error_code\": \"NOT_FOUND\",\n  \"operation\": \"fetch\"\n}\n</code></pre> <p>Common error codes:</p> Code Description <code>NOT_FOUND</code> Memory or resource doesn't exist <code>VALIDATION_ERROR</code> Invalid parameters <code>INVALID_PATH</code> Invalid artifact path <code>ALREADY_EXISTS</code> Resource already exists <code>RATE_LIMITED</code> Too many requests"},{"location":"mcp/mcp-integration/#api-mapping-reference","title":"API Mapping Reference","text":"MCP Tool HTTP Method Endpoint <code>awaken</code> GET <code>/api/v2/personality/awakening</code> <code>store</code> POST <code>/api/v2/memories</code> <code>recall</code> POST <code>/api/v2/search/hybrid</code> <code>search</code> POST <code>/api/v2/search/hybrid</code> <code>fetch</code> GET <code>/api/v2/memories/{id}</code> <code>update_memory</code> PUT <code>/api/v2/memories/{id}</code> <code>connect</code> POST <code>/api/v2/relationships</code> <code>explore</code> POST <code>/api/v2/relationships/traverse</code> <code>save_context</code> POST <code>/api/v2/memories</code> <code>restore_context</code> GET <code>/api/v2/memories</code> <code>list_contexts</code> GET <code>/api/v2/memories?memory_type=checkpoint</code> <code>reflect</code> POST <code>/api/v2/analysis/reflect</code> <code>save_artifact</code> POST <code>/api/v2/artifacts</code> <code>retrieve_artifact</code> GET <code>/api/v2/artifacts</code> <code>list_artifacts</code> GET <code>/api/v2/artifacts/list</code> <code>delete_artifact</code> DELETE <code>/api/v2/artifacts</code>"},{"location":"onboarding/","title":"Onboarding","text":"<p>Get started with Penfield across your preferred AI platform.</p>"},{"location":"onboarding/#guides","title":"Guides","text":"<ul> <li>Penfield Setup Guide - Create your account and connect to Claude.ai</li> <li>Claude Code Setup - Connect Penfield to Claude Code (terminal)</li> <li>MCP Remote Setup - Connect via mcp-remote (Windsurf, Cursor, Gemini, and more)</li> <li>Troubleshooting - Diagnose and fix connection issues</li> </ul>"},{"location":"onboarding/#reference","title":"Reference","text":"<ul> <li>Quick Reference - User guide for getting the most out of Penfield</li> <li>Example Custom Instructions - Starter template for personalizing your assistant</li> </ul> <p>\u00a9 2026 Penfield\u2122. All Rights Reserved.</p>"},{"location":"onboarding/claude-code-setup/","title":"Setting Up Penfield with Claude Code","text":"<p>Connect Penfield to Claude Code to enable persistent memory and personality features in your terminal-based Claude sessions.</p> <p>There are three ways to connect, from simplest to most powerful:</p> Option Best For Setup Time claude.ai Connector Already using Penfield on claude.ai None Manual MCP Quick standalone setup ~2 minutes Claude Code Plugin Power users who want auto-context and hooks ~5 minutes"},{"location":"onboarding/claude-code-setup/#option-1-claudeai-connector","title":"Option 1: claude.ai Connector","text":"<p>If you've already added Penfield as a connector on claude.ai, Claude Code automatically picks it up. No additional setup is needed.</p> <p>Launch Claude Code and type \"Awaken\" to verify the connection:</p> <pre><code>claude\n</code></pre> <p>If Penfield tools appear, you're done. If not, use Option 2 or Option 3 instead.</p>"},{"location":"onboarding/claude-code-setup/#option-2-manual-mcp-setup","title":"Option 2: Manual MCP Setup","text":""},{"location":"onboarding/claude-code-setup/#step-1-add-the-penfield-mcp-server","title":"Step 1: Add the Penfield MCP Server","text":"<p>Run the following command in your terminal:</p> <pre><code>claude mcp add --transport http --scope user penfield https://mcp.penfield.app\n</code></pre>"},{"location":"onboarding/claude-code-setup/#step-2-launch-claude-code","title":"Step 2: Launch Claude Code","text":"<p>Start Claude Code:</p> <pre><code>claude\n</code></pre>"},{"location":"onboarding/claude-code-setup/#step-3-open-mcp-settings","title":"Step 3: Open MCP Settings","text":"<p>Run the <code>/mcp</code> command to view your MCP servers:</p> <pre><code>/mcp\n</code></pre> <p></p>"},{"location":"onboarding/claude-code-setup/#step-4-authenticate-penfield","title":"Step 4: Authenticate Penfield","text":"<ol> <li>Select penfield-mcp from the list</li> <li>Select Authenticate</li> </ol> <ol> <li>A browser window will open. Complete the authorization in your browser.</li> </ol> <ol> <li>Return to Claude Code</li> </ol>"},{"location":"onboarding/claude-code-setup/#verification","title":"Verification","text":"<p>After authentication, Penfield tools will be available in your Claude Code sessions. Start a new session and type \"Awaken\" to test the connection.</p>"},{"location":"onboarding/claude-code-setup/#option-3-claude-code-plugin","title":"Option 3: Claude Code Plugin","text":"<p>The Penfield plugin for Claude Code adds features that the standalone MCP connection cannot provide:</p> Feature MCP (Options 1 &amp; 2) Plugin Memory tools Yes Yes <code>/penfield:help</code> command No Yes Auto-context injection on session start No Yes Automatic pre-compaction saves No Yes Session log fallback No Yes <p>The key difference: the plugin uses hooks that fire deterministically every session, so memory is always loaded without relying on the model to remember to call the tools.</p>"},{"location":"onboarding/claude-code-setup/#step-1-add-the-marketplace-and-install","title":"Step 1: Add the Marketplace and Install","text":"<pre><code>/plugin marketplace add penfieldlabs/claude-penfield\n/plugin install penfield\n</code></pre>"},{"location":"onboarding/claude-code-setup/#step-2-restart-claude-code","title":"Step 2: Restart Claude Code","text":"<p>Restart Claude Code completely for the plugin to take effect.</p>"},{"location":"onboarding/claude-code-setup/#step-3-enable-the-mcp-server","title":"Step 3: Enable the MCP Server","text":"<p>Run <code>/mcp</code> and select <code>plugin:penfield:penfield</code> under Built-in MCPs to enable it.</p>"},{"location":"onboarding/claude-code-setup/#step-4-authenticate","title":"Step 4: Authenticate","text":"<p>If you haven't previously authorized Penfield, you'll be prompted to authenticate. Follow the browser-based authorization flow.</p>"},{"location":"onboarding/claude-code-setup/#verification_1","title":"Verification","text":"<p>Start a new session. The plugin will automatically inject your memory context on startup. Type \"Awaken\" to confirm everything is working.</p>"},{"location":"onboarding/claude-code-setup/#still-having-issues","title":"Still Having Issues?","text":"<p>Contact support@penfield.app for assistance.</p>"},{"location":"onboarding/example-custom-instructions/","title":"Recommended Custom Instructions","text":"<p>Not sure where to start? Use these as-is, or customize them to fit your style:</p> <p>You are [Your AI's Name] - a thoughtful partner who builds on our shared history rather than starting fresh each time. Always check Penfield memory first to see what we've discussed before.</p> <p>Core principles:</p> <ol> <li>Be direct and clear - get to the point without unnecessary hedging</li> <li>Admit uncertainty honestly - say \"I don't know\" rather than guess</li> <li>Challenge my thinking when something seems off or incomplete</li> <li>Tell me what I need to hear, even if it's not what I want to hear</li> <li>If you can't help with something, explain why simply</li> <li>Spot patterns across our conversations and connect related ideas</li> <li>Proactively remember important decisions, preferences, corrections, and breakthroughs</li> <li>Build connections between memories to create a useful knowledge graph</li> </ol> <p>Prioritize clarity over caution, and substance over style. When in doubt, be more direct.</p>"},{"location":"onboarding/mcp-remote-setup/","title":"Setting Up Penfield with MCP-Remote","text":"<p>Penfield works with any AI platform that supports MCP (Model Context Protocol) via <code>mcp-remote</code>. This guide covers setup for popular platforms.</p>"},{"location":"onboarding/mcp-remote-setup/#prerequisites","title":"Prerequisites","text":"<p>Most platforms require Node.js to run <code>mcp-remote</code>. If you don't have Node.js installed, download it from nodejs.org.</p>"},{"location":"onboarding/mcp-remote-setup/#configuration-reference","title":"Configuration Reference","text":"<p>Most platforms use the same core configuration. Copy and adapt as needed:</p> <pre><code>{\n  \"mcpServers\": {\n    \"Penfield\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"-y\",\n        \"mcp-remote\",\n        \"https://mcp.penfield.app/\"\n      ]\n    }\n  }\n}\n</code></pre> <p>Note: If you already have other MCP servers configured, add the <code>\"Penfield\": { ... }</code> block inside your existing <code>\"mcpServers\"</code> object. Don't create a second <code>\"mcpServers\"</code> key.</p>"},{"location":"onboarding/mcp-remote-setup/#authorization","title":"Authorization","text":"<p>The first time you use Penfield in any application, a browser window will open asking you to authorize access. After authorizing once, other applications will share the same mcp-remote authorization automatically. If mcp-remote is upgrade, a new authorization may be required.</p> <p>If authorization doesn't trigger automatically, try restarting the application after adding the configuration.</p>"},{"location":"onboarding/mcp-remote-setup/#platform-specific-instructions","title":"Platform-Specific Instructions","text":"<ul> <li>Antigravity</li> <li>Perplexity</li> <li>Gemini CLI</li> <li>Windsurf</li> <li>Cursor</li> <li>LM Studio</li> <li>Other Platforms</li> </ul>"},{"location":"onboarding/mcp-remote-setup/#antigravity","title":"Antigravity","text":""},{"location":"onboarding/mcp-remote-setup/#step-1-open-agent-panel-menu","title":"Step 1: Open Agent Panel Menu","text":"<p>In the Agent panel on the right side of the screen, click the three-dot menu (\u22ef).</p> <p></p>"},{"location":"onboarding/mcp-remote-setup/#step-2-open-mcp-servers","title":"Step 2: Open MCP Servers","text":"<p>From the dropdown menu, click MCP Servers.</p> <p></p>"},{"location":"onboarding/mcp-remote-setup/#step-3-open-manage-mcp-servers","title":"Step 3: Open Manage MCP Servers","text":"<p>In the MCP Store panel, click Manage MCP Servers in the top right.</p> <p></p>"},{"location":"onboarding/mcp-remote-setup/#step-4-view-raw-config","title":"Step 4: View Raw Config","text":"<p>Click View raw config to open the configuration file.</p> <p></p> <p>This opens <code>~/.gemini/antigravity/mcp_config.json</code> for editing.</p>"},{"location":"onboarding/mcp-remote-setup/#step-5-add-configuration","title":"Step 5: Add Configuration","text":"<p>Add the Penfield configuration and save the file:</p> <p></p> <pre><code>{\n  \"mcpServers\": {\n    \"Penfield\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"-y\",\n        \"mcp-remote\",\n        \"https://mcp.penfield.app/\"\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"onboarding/mcp-remote-setup/#step-6-restart-and-test","title":"Step 6: Restart and Test","text":"<p>Restart Antigravity. If you haven't authorized Penfield previously, a browser tab will open automatically. Start a new chat and type \"Awaken\" to test the connection.</p>"},{"location":"onboarding/mcp-remote-setup/#perplexity","title":"Perplexity","text":"<p>Perplexity Desktop has a built-in connector interface that doesn't require editing JSON files directly.</p>"},{"location":"onboarding/mcp-remote-setup/#step-1-open-settings","title":"Step 1: Open Settings","text":"<p>Click the Settings icon in Perplexity Desktop, then click Connectors.</p> <p></p>"},{"location":"onboarding/mcp-remote-setup/#step-2-add-connector","title":"Step 2: Add Connector","text":"<p>Click Add Connector.</p> <p></p>"},{"location":"onboarding/mcp-remote-setup/#step-3-configure-simple-view","title":"Step 3: Configure (Simple View)","text":"<p>On the Simple tab, enter:</p> Field Value Server Name <code>Penfield</code> Command <code>npx -y mcp-remote https://mcp.penfield.app/</code> <p></p>"},{"location":"onboarding/mcp-remote-setup/#step-4-verify-advanced-settings","title":"Step 4: Verify Advanced Settings","text":"<p>Click the Advanced tab to confirm the JSON matches:</p> <p></p>"},{"location":"onboarding/mcp-remote-setup/#step-5-save-and-restart","title":"Step 5: Save and Restart","text":"<p>Click Save, then restart Perplexity Desktop. If you haven't authorized Penfield previously, a browser window will open for authorization.</p>"},{"location":"onboarding/mcp-remote-setup/#gemini-cli","title":"Gemini CLI","text":""},{"location":"onboarding/mcp-remote-setup/#step-1-edit-settings-file","title":"Step 1: Edit Settings File","text":"<p>Open <code>~/.gemini/settings.json</code> in your preferred editor:</p> <pre><code>nano ~/.gemini/settings.json\n# or\ncode ~/.gemini/settings.json\n</code></pre>"},{"location":"onboarding/mcp-remote-setup/#step-2-add-penfield-configuration","title":"Step 2: Add Penfield Configuration","text":"<p>Add the Penfield configuration to your settings file. Your file structure may vary depending on your authentication method:</p> <p></p> <pre><code>{\n  \"mcpServers\": {\n    \"Penfield\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"-y\",\n        \"mcp-remote\",\n        \"https://mcp.penfield.app/\"\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"onboarding/mcp-remote-setup/#step-3-restart-and-authorize","title":"Step 3: Restart and Authorize","text":"<p>Run <code>gemini</code> again. If you haven't authorized Penfield previously, the authorization flow will open in your browser automatically. After authorizing, quit and restart Gemini CLI.</p>"},{"location":"onboarding/mcp-remote-setup/#windsurf","title":"Windsurf","text":""},{"location":"onboarding/mcp-remote-setup/#step-1-install-mcp-remote","title":"Step 1: Install mcp-remote","text":"<p>If you haven't already, install mcp-remote:</p> <pre><code>npm install -g mcp-remote\n</code></pre>"},{"location":"onboarding/mcp-remote-setup/#step-2-open-mcp-configuration","title":"Step 2: Open MCP Configuration","text":"<p>Click the plug icon (1), then click the settings icon (2) to open the configuration file.</p> <p></p> <p>This opens <code>~/.codeium/windsurf/mcp_config.json</code>. If this is your first MCP server, the file may be empty.</p>"},{"location":"onboarding/mcp-remote-setup/#step-3-add-configuration","title":"Step 3: Add Configuration","text":"<p>Add the Penfield configuration:</p> <p></p> <pre><code>{\n  \"mcpServers\": {\n    \"Penfield\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"-y\",\n        \"mcp-remote\",\n        \"https://mcp.penfield.app/\"\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"onboarding/mcp-remote-setup/#step-4-restart-and-verify","title":"Step 4: Restart and Verify","text":"<p>Quit and restart Windsurf. If you haven't authorized Penfield previously, a browser tab will open automatically.</p> <p>After authorization, click the plug icon to verify Penfield is connected with 18 tools available:</p> <p></p>"},{"location":"onboarding/mcp-remote-setup/#cursor","title":"Cursor","text":"<p>Known Issue: Cursor's MCP authentication can be unreliable. If you experience problems, try authorizing Penfield in another application first (such as Windsurf, Gemini CLI, or LM Studio), then return to Cursor.</p> <p>Note: MCP tools may only be available in Agent mode, not in Ask or Plan modes.</p>"},{"location":"onboarding/mcp-remote-setup/#step-1-open-mcp-settings","title":"Step 1: Open MCP Settings","text":"<ol> <li>Click the gear icon to open settings</li> <li>Click Tools &amp; MCP</li> <li>Click Add Custom MCP</li> </ol> <p>This opens <code>~/.cursor/mcp.json</code> for editing.</p>"},{"location":"onboarding/mcp-remote-setup/#step-2-add-configuration","title":"Step 2: Add Configuration","text":"<p>Add the Penfield configuration:</p> <p></p> <pre><code>{\n  \"mcpServers\": {\n    \"Penfield\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"-y\",\n        \"mcp-remote\",\n        \"https://mcp.penfield.app/\"\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"onboarding/mcp-remote-setup/#step-3-restart","title":"Step 3: Restart","text":"<p>Save the file and restart Cursor. If authorization doesn't trigger automatically, you may need to restart again after authorizing through another application.</p>"},{"location":"onboarding/mcp-remote-setup/#lm-studio","title":"LM Studio","text":"<p>Important: Local models have significant limitations compared to frontier models. See LM Studio Notes below.</p>"},{"location":"onboarding/mcp-remote-setup/#step-1-open-mcp-configuration","title":"Step 1: Open MCP Configuration","text":"<p>Click the Program tab, click the Install dropdown, and select Edit mcp.json.</p> <p></p>"},{"location":"onboarding/mcp-remote-setup/#step-2-add-configuration_1","title":"Step 2: Add Configuration","text":"<p>Add the Penfield configuration and save the file:</p> <p></p> <pre><code>{\n  \"mcpServers\": {\n    \"Penfield\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"-y\",\n        \"mcp-remote\",\n        \"https://mcp.penfield.app/\"\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"onboarding/mcp-remote-setup/#step-3-restart-and-load-model","title":"Step 3: Restart and Load Model","text":"<p>Restart LM Studio and load your model. If you haven't authorized Penfield previously, a browser tab will open automatically.</p>"},{"location":"onboarding/mcp-remote-setup/#lm-studio-notes","title":"LM Studio Notes","text":"<p>Model requirements:</p> <ul> <li>Only models with explicit tool use support will work with Penfield</li> <li>Set Context Length to the maximum your hardware supports\u2014MCP tool calls generate long contexts that can overflow smaller windows</li> </ul> <p></p> <p>Performance expectations:</p> <p>Local models typically have single or low double-digit billions of parameters, while frontier models operate in the hundreds of billions or trillions. Expect correspondingly different output quality.</p> <p>Recommended system prompt:</p> <pre><code>You are my personal AI assistant and you will use Penfield to manage recalling and storing memories.\n</code></pre>"},{"location":"onboarding/mcp-remote-setup/#other-platforms","title":"Other Platforms","text":"<p>Any AI platform that supports <code>mcp-remote</code> can use Penfield. Add this configuration to your platform's MCP configuration file:</p> <pre><code>{\n  \"mcpServers\": {\n    \"Penfield\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"-y\",\n        \"mcp-remote\",\n        \"https://mcp.penfield.app/\"\n      ]\n    }\n  }\n}\n</code></pre> <p>Common configuration file locations:</p> Platform Configuration File Antigravity <code>~/.gemini/antigravity/mcp_config.json</code> Windsurf <code>~/.codeium/windsurf/mcp_config.json</code> Cursor <code>~/.cursor/mcp.json</code> Gemini CLI <code>~/.gemini/settings.json</code> LM Studio Via Program &gt; Install &gt; Edit mcp.json"},{"location":"onboarding/mcp-remote-setup/#troubleshooting","title":"Troubleshooting","text":"<p>Authorization doesn't trigger: - Restart the application after adding the configuration - Try authorizing through a different application first</p> <p>\"Command not found\" or npm errors: - Ensure Node.js is installed: <code>node --version</code> - Try installing mcp-remote globally: <code>npm install -g mcp-remote</code></p> <p>Tools not appearing: - Verify the JSON syntax is correct (no trailing commas, matching braces) - Check that you're in the correct mode (e.g., Agent mode in Cursor) - Restart the application</p> <p>Still having issues? Contact support@penfield.app for assistance.</p>"},{"location":"onboarding/penfield-setup-guide/","title":"Penfield Setup Guide","text":"<p>Connect Penfield to Claude.ai and configure your personalized AI assistant.</p>"},{"location":"onboarding/penfield-setup-guide/#prerequisites","title":"Prerequisites","text":"<ul> <li>A valid Penfield invitation (check your email) or existing Penfield account</li> <li>A Claude.ai account with an active subscription</li> <li>A supported browser (Chrome, Firefox, or Brave recommended)</li> </ul>"},{"location":"onboarding/penfield-setup-guide/#step-1-sign-up-for-a-free-trial","title":"Step 1: Sign Up for a Free Trial","text":"<p>Go to https://portal.penfield.app/sign-up.</p>"},{"location":"onboarding/penfield-setup-guide/#step-2-create-your-penfield-account","title":"Step 2: Create Your Penfield Account","text":"<p>If prompted, complete the Cloudflare verification by clicking the checkbox.</p> <p></p> <p>Set a password, or select Continue with Google if your invitation was sent to a Gmail or Google Workspace address. Review and accept the Terms of Service, then click Continue.</p> <p></p>"},{"location":"onboarding/penfield-setup-guide/#step-3-set-up-claudeai","title":"Step 3: Set Up Claude.ai","text":"<p>If you don't already have a Claude account, create one at claude.ai.</p> <p>Sign in to Claude.ai. A paid Claude subscription (Pro or Team) is required to use custom connectors.</p> <p>Note: Safari may have compatibility issues. We recommend using Chrome, Firefox, or Brave.</p>"},{"location":"onboarding/penfield-setup-guide/#step-4-open-claude-settings","title":"Step 4: Open Claude Settings","text":"<p>Click your profile icon in the bottom-left corner, then select Settings.</p> <p></p> <p></p>"},{"location":"onboarding/penfield-setup-guide/#step-5-configure-capabilities-recommended","title":"Step 5: Configure Capabilities (Recommended)","text":"<p>Navigate to Settings &gt; Capabilities.</p> <p>For optimal performance with Penfield, consider disabling Claude's built-in memory features. Penfield provides its own persistent memory system with additional capabilities.</p> <p>Tip: Claude Projects work well alongside Penfield. You can also use the Penfield Document Portal to import unlimited documents into your personal knowledge base.</p> <p></p>"},{"location":"onboarding/penfield-setup-guide/#step-6-configure-privacy-settings-optional","title":"Step 6: Configure Privacy Settings (Optional)","text":"<p>Navigate to Settings &gt; Privacy.</p> <p>Adjust these settings based on your preferences:</p> <ul> <li>Help improve Claude \u2014 Disable if you prefer your conversations not be used for model training</li> <li>Location metadata \u2014 Disable to limit location information shared with Claude</li> </ul> <p></p>"},{"location":"onboarding/penfield-setup-guide/#step-7-add-the-penfield-connector","title":"Step 7: Add the Penfield Connector","text":"<p>Navigate to Settings &gt; Connectors, then click Add Custom Connector.</p> <p></p> <p>In the dialog, enter the following:</p> Field Value Name <code>Penfield</code> Remote MCP server URL <code>https://mcp.penfield.app</code> <p>Click Add.</p> <p></p> <p></p>"},{"location":"onboarding/penfield-setup-guide/#step-8-connect-and-authorize-the-connection","title":"Step 8: Connect and Authorize the Connection","text":"<p>Click Connect next to Penfield. </p> <p>Click Authorize to authorize Penfield for your Claude account. </p>"},{"location":"onboarding/penfield-setup-guide/#step-9-configure-your-ai-personality","title":"Step 9: Configure Your AI Personality","text":"<p>Visit the Penfield Personality Portal to customize your assistant's behavior, voice, and preferences.</p> <p></p> <p>You can choose from a standard persona and add custom instructions to personalize your assistant's behavior. Consider creating your own custom instructions or using example custom instructions</p> <p></p>"},{"location":"onboarding/penfield-setup-guide/#step-10-activate-your-assistant","title":"Step 10: Activate Your Assistant","text":"<p>Start a new conversation in Claude and type:</p> <pre><code>Awaken\n</code></pre> <p></p> <p>Penfield will load your personality configuration and respond with a personalized greeting.</p> <p></p>"},{"location":"onboarding/penfield-setup-guide/#step-11-enable-penfield-tools","title":"Step 11: Enable Penfield Tools","text":"<p>When Claude requests permission to use Penfield tools, select Always allow to enable seamless integration.</p> <p></p> <p>You can also manage tool permissions in Settings &gt; Connectors &gt; Penfield.</p> <p></p> <p></p>"},{"location":"onboarding/penfield-setup-guide/#usage-tips","title":"Usage Tips","text":"<ul> <li>Start each new conversation with \"Awaken\" to load your Penfield configuration</li> <li>Extended thinking mode is recommended for most tasks</li> <li>Custom styles \u2014 Ask your Penfield assistant to develop, save, and recall writing styles</li> </ul> <p>Note: The \"Use style\" and \"Research\" features in Claude may affect your assistant's personality. Feel free to use them, but be aware that your agent's personality may be affected. You can restore the original personality by disabling \"Use style\" and \"Research\". </p>"},{"location":"onboarding/penfield-setup-guide/#troubleshooting","title":"Troubleshooting","text":"<p>If you encounter issues, see the Reconnecting to Penfield guide.</p> <p>For additional support, contact support@penfield.app.</p>"},{"location":"onboarding/penfield-user-quick-reference/","title":"Penfield Quick Reference","text":""},{"location":"onboarding/penfield-user-quick-reference/#how-to-make-your-ai-remember-everything","title":"How to Make Your AI Remember Everything","text":""},{"location":"onboarding/penfield-user-quick-reference/#you-just-talk-naturally","title":"You Just Talk Naturally","text":"<p>Penfield lets your AI remember things across conversations, across models and across platforms. You don't need to learn technical commands - just talk naturally and use simple phrases when you want something remembered.</p>"},{"location":"onboarding/penfield-user-quick-reference/#making-your-ai-remember-things","title":"Making Your AI Remember Things","text":"<p>Any time you want your AI to remember something, just say:</p> <ul> <li>\"Remember this...\"</li> <li>\"Don't forget...\"</li> <li>\"Store this...\"</li> <li>\"This is important...\"</li> <li>\"Keep this in mind...\"</li> <li>\"Save this...\"</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#real-examples","title":"Real Examples","text":"<ul> <li>You: \"Remember this: I prefer morning meetings, not afternoons\"</li> <li>You: \"Don't forget - Sarah handles all the legal stuff, John handles IT\"</li> <li>You: \"Store this decision: We're focusing on enterprise customers this quarter because SMB churn is too high\"</li> </ul> <p>Your AI will confirm it remembered, and that information will be available next time you chat.</p> <p>\ud83d\udcdd NEW: Using Tags for Organization</p> <p>You can tag memories for easier retrieval later: - \"Remember this and tag it as 'legal': Sarah handles all IP matters\" - \"Store this under 'q1-planning': Budget approved for 3 new hires\"</p> <p>Later: \"What do I have tagged as legal?\"</p>"},{"location":"onboarding/penfield-user-quick-reference/#getting-your-ai-to-remember-you","title":"Getting Your AI to Remember You","text":""},{"location":"onboarding/penfield-user-quick-reference/#starting-a-new-conversation","title":"Starting a New Conversation","text":"<p>When you start a fresh chat, your AI has \"amnesia\" by default. To bring back your context:</p> <p>Say: \"Awaken\"</p> <p>Your AI will load your personality configuration, preferences, and be ready to access all your stored memories.</p>"},{"location":"onboarding/penfield-user-quick-reference/#asking-about-past-conversations","title":"Asking About Past Conversations","text":"<p>Once awakened, just ask naturally:</p> <ul> <li>\"What did we decide about the pricing strategy?\"</li> <li>\"Do you remember what I said about my morning routine?\"</li> <li>\"What do you know about Project Atlas?\"</li> </ul> <p>Your AI will automatically search its memories. If it doesn't seem to be checking, say: \"Check your memories first\"</p> <p>You can ask about specific time periods:</p> <ul> <li>\"What did we discuss last week?\"</li> <li>\"Show me what I stored in January\"</li> <li>\"What decisions did we make this month?\"</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#fixing-wrong-information","title":"Fixing Wrong Information","text":""},{"location":"onboarding/penfield-user-quick-reference/#when-your-ai-remembers-something-wrong","title":"When Your AI Remembers Something Wrong","text":"<p>If your AI has incorrect information stored:</p> <p>Say: \"Update memory - that information was wrong. The correct version is...\"</p>"},{"location":"onboarding/penfield-user-quick-reference/#examples","title":"Examples","text":"<ul> <li>You: \"Update memory: I said Sarah handles legal, but actually it's John. Sarah does marketing.\"</li> <li>You: \"Correction - we're NOT focusing on enterprise anymore. New strategy is mid-market. Please update.\"</li> <li>You: \"That decision about the pricing? We reversed it. Update your memory with the new plan...\"</li> </ul> <p>Your AI will fix the stored information.</p>"},{"location":"onboarding/penfield-user-quick-reference/#using-claudes-features-with-penfield","title":"Using Claude's Features with Penfield","text":""},{"location":"onboarding/penfield-user-quick-reference/#use-style","title":"\"Use Style\"","text":"<p>Claude has a \"Use Style\" feature, but it's redundant when you have Penfield. Your AI builds communication preferences naturally through your accumulated conversations. You can tell your AI to develop specific writing styles for specific use cases and to remember them. </p> <p>Warning: If you enable Style and forget to disable it, your might not behave as expected. Style may override your Penfield-built personality.</p> <p>Best practice: Build your AI's communication style naturally through Penfield by giving feedback and corrections over time.</p>"},{"location":"onboarding/penfield-user-quick-reference/#research-mode-when-and-how-to-use-it","title":"\"Research Mode\" - When and How to Use It","text":"<p>Claude's Research mode sends swarms of sub-agents to read hundreds or thousands of sources for comprehensive research tasks.</p> <p>Warning: Research mode may change your AI's personality.</p>"},{"location":"onboarding/penfield-user-quick-reference/#best-practice-workflow","title":"Best Practice Workflow","text":"<ol> <li>Enable Research mode for your query</li> <li>Wait for the query to complete the comprehensive research (can take up to 30 min)</li> <li>Disable Research mode immediately after</li> <li>Ask your AI to analyze the research results </li> </ol>"},{"location":"onboarding/penfield-user-quick-reference/#example","title":"Example","text":"<pre><code>You: [Enable Research mode]\nYou: \"Research the current landscape of...\"\nAI: [Completes research with 663 sources over 1h 49m]\nYou: [Disable Research mode]  \u2190 Don't forget this step!\nYou: \"Now analyze these findings with our context about...\"\nAI: [Provides strategic analysis with full personality and your stored context]\n</code></pre> <p>Why this matters: Research mode is powerful for gathering information, but you want YOUR AI (with your shared context and personality) to analyze and synthesize a summary from the findings.</p>"},{"location":"onboarding/penfield-user-quick-reference/#advanced-features-optional","title":"Advanced Features (Optional)","text":"<p>Most of the time, your AI handles everything automatically. But if you want more control:</p>"},{"location":"onboarding/penfield-user-quick-reference/#connecting-related-ideas","title":"Connecting Related Ideas","text":"<p>Usually happens automatically, but you can be explicit:</p> <ul> <li>You: \"Connect this decision to our discussion last week about customer feedback\"</li> <li>You: \"This finding contradicts what we thought before - make sure you link this properly\"</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#saving-project-checkpoints","title":"Saving Project Checkpoints","text":"<p>When finishing major work or pausing a complex project:</p> <ul> <li>You: \"Save a checkpoint for Project Alpha - include everything we've discussed and next steps\"</li> </ul> <p>To resume later: \"Restore the checkpoint for Project Alpha\"</p> <p>Your AI will load the complete project state instantly.</p> <p>Documents</p> <p>You can upload documents (PDFs, Word docs, etc.) that become searchable:</p> <ul> <li>Upload via the Penfield portal or supported integrations</li> <li>Later: \"Search our documents for contract renewal terms\"</li> <li>Your AI can reference and quote from uploaded documents</li> </ul> <p>Artifacts (File Storage)</p> <p>Save and retrieve files like templates:</p> <ul> <li>\"Save this as my standard PR template artifact\"</li> <li>\"Get my PR template artifact\"</li> <li>\"List my saved artifacts\"</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#getting-started-your-first-week","title":"Getting Started - Your First Week","text":""},{"location":"onboarding/penfield-user-quick-reference/#day-1-wake-up-your-ai","title":"Day 1: Wake Up Your AI","text":"<p>Start by introducing yourself:</p> <pre><code>Hi! I'm [YOUR NAME].\n\nQuick context:\n- I work as [YOUR ROLE]\n- Currently focused on [YOUR PROJECTS]\n- I prefer [HOW YOU LIKE TO COMMUNICATE]\n\nRemember all of this.\n</code></pre>"},{"location":"onboarding/penfield-user-quick-reference/#day-2-test-it-works","title":"Day 2: Test It Works","text":"<ol> <li>Close your chat and open a fresh one</li> <li>Say: \"Awaken\"</li> <li>Ask: \"What do you remember about me?\"</li> <li>Your AI should recall yesterday's profile</li> </ol> <p>If this works, you're all set. If not, see troubleshooting below.</p>"},{"location":"onboarding/penfield-user-quick-reference/#days-3-7-use-it-naturally","title":"Days 3-7: Use It Naturally","text":"<p>During your normal work:</p> <ul> <li>Say \"remember this\" when you share important info</li> <li>Ask about past discussions when relevant</li> <li>Correct mistakes with \"update memory\"</li> <li>Let your AI proactively remember things</li> </ul> <p>By end of week: Your AI remembers your preferences, projects, and context. You never repeat yourself.</p>"},{"location":"onboarding/penfield-user-quick-reference/#common-patterns","title":"Common Patterns","text":""},{"location":"onboarding/penfield-user-quick-reference/#project-tracking","title":"Project Tracking","text":"<ul> <li>You: \"We decided to pivot from B2C to B2B. Remember the reasoning: customer acquisition cost was 3x too high\"</li> <li>Later: \"Why did we pivot to B2B again?\"</li> <li>AI: \"You pivoted because customer acquisition cost was 3x too high in B2C\"</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#people-roles","title":"People &amp; Roles","text":"<ul> <li>You: \"Remember: Sarah handles legal, John handles tech, Maria handles design\"</li> <li>Later: \"Who should I talk to about the terms of service?\"</li> <li>AI: \"Sarah handles legal matters\"</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#learning-your-preferences","title":"Learning Your Preferences","text":"<ul> <li>You: \"Don't give me long explanations. I prefer bullet points with key takeaways\"</li> <li>From then on: AI adapts its communication style to match your preference</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#quick-troubleshooting","title":"Quick Troubleshooting","text":""},{"location":"onboarding/penfield-user-quick-reference/#ai-not-remembering-things","title":"AI Not Remembering Things","text":"<ul> <li>Be more explicit: \"Remember this...\" or \"Store this...\"</li> <li>Check Penfield is connected (Settings \u2192 Connectors)</li> <li>Verify tools are enabled in chat settings</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#not-working-in-new-chat","title":"Not Working in New Chat","text":"<ul> <li>Make sure you said \"Awaken\" first</li> <li>Try: \"Use recall to find all memories about me\"</li> <li>Reconnect Penfield (Settings \u2192 disconnect \u2192 reconnect)</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#ai-remembered-wrong-information","title":"AI Remembered Wrong Information","text":"<ul> <li>Say: \"Update memory - the correct info is...\"</li> <li>Be specific about what needs correcting</li> <li>Your AI will fix the stored information</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#ai-doesnt-sound-like-your-guy","title":"AI Doesn't Sound Like \"Your Guy\"","text":"<ul> <li>Check if \"Use Style\" is still enabled (disable it)</li> <li>Check if \"Research Mode\" is still active (disable it)</li> <li>Research and Style modes override your AI's natural Penfield-built personality</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#research-mode-still-active","title":"Research Mode Still Active","text":"<p>After completing a research task, make sure to disable Research mode:</p> <ul> <li>Click the Research button to turn it off</li> <li>Your AI will return to normal personality with full access to your Penfield context</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#quick-test","title":"Quick Test","text":"<ol> <li>Say: \"Remember this: My favorite color is blue\"</li> <li>Close chat, open new one</li> <li>Say: \"Awaken\"</li> <li>Ask: \"What's my favorite color?\"</li> <li>AI should say: \"Blue\"</li> </ol> <p>If step 5 fails, Penfield isn't connected properly.</p>"},{"location":"onboarding/penfield-user-quick-reference/#advanced-users-guide","title":"Advanced Users Guide","text":"<p>(Optional)</p> <p>Most users don't need this section. The natural language approach in the main guide works great for 90% of use cases. But if you want to understand what's happening under the hood and unlock advanced features, read on.</p>"},{"location":"onboarding/penfield-user-quick-reference/#how-search-actually-works","title":"How Search Actually Works","text":"<p>When you ask your AI to find memories, you're not doing simple keyword matching. Here's what's actually happening:</p>"},{"location":"onboarding/penfield-user-quick-reference/#semantic-understanding","title":"Semantic Understanding","text":"<ul> <li>Your AI understands meaning, not just exact words</li> <li>\"Bank issues\" finds content about financial problems, asset seizures, etc.</li> <li>Works even when you don't use the exact phrase stored</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#typo-tolerance","title":"Typo Tolerance","text":"<ul> <li>Auto-corrects 1-2 character spelling errors</li> <li>\"Conspiricy theory\" \u2192 finds conspiracy theory content</li> <li>\"Recieve\" \u2192 finds receive</li> <li>You don't have to be perfect</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#graceful-degradation","title":"Graceful Degradation","text":"<ul> <li>Even if there's no exact match, your AI will find related content</li> <li>System shows lower-relevance results rather than \"no results found\"</li> <li>Rarely hard fails</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#examples_1","title":"Examples","text":"<pre><code>You: \"What did we decide about the pricing strategy?\"\n\u2192 Finds discussions about pricing even if \"decide\" wasn't used\n\nYou: \"Bank robbery discussion\"\n\u2192 Finds content about financial crime, asset seizure (conceptual match)\n\nYou: \"What do you know about scoba diving?\" (typo)\n\u2192 Auto-corrects and finds \"scuba diving\" content\n</code></pre>"},{"location":"onboarding/penfield-user-quick-reference/#explore-connections","title":"Explore Connections","text":"<p>This is like clicking \"See Also\" but for your entire knowledge base. It traverses the graph of connected memories to show you how ideas relate.</p>"},{"location":"onboarding/penfield-user-quick-reference/#how-to-use","title":"How to Use","text":"<ul> <li>\"Explore connections related to [topic/decision/memory]\"</li> <li>\"Show me what's connected to our Q3 strategy\"</li> <li>\"Map the relationships to Project Atlas\"</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#what-it-does","title":"What It Does","text":"<ul> <li>Traverses through your knowledge graph</li> <li>Can find 100+ connected paths</li> <li>Shows how one decision led to another</li> <li>Discovers non-obvious connections you might have forgotten</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#example-path","title":"Example Path","text":"<pre><code>Q3 Strategy Decision\n  \u2192 Customer Feedback Analysis\n    \u2192 Product Pivot Discussion\n      \u2192 Budget Reallocation\n        \u2192 Team Restructure Decision (5 levels deep)\n</code></pre>"},{"location":"onboarding/penfield-user-quick-reference/#when-to-use","title":"When to Use","text":"<ul> <li>Reviewing how you got to a major decision</li> <li>Finding all related discussions across time</li> <li>Understanding the full context of a complex topic</li> <li>Discovering forgotten connections</li> </ul> <p>Pro Tip: Your AI often makes these connections automatically. Use Explore when you want to see the full map explicitly.</p>"},{"location":"onboarding/penfield-user-quick-reference/#quality-over-quantity","title":"Quality Over Quantity","text":"<p>Penfield is powerful infrastructure. Use it wisely.</p>"},{"location":"onboarding/penfield-user-quick-reference/#good-memories","title":"Good Memories","text":"<pre><code>\"Remember this: I prefer morning meetings because afternoons are\nfor deep work. I need 2-hour blocks minimum for coding.\"\n\n\"Store this decision: We're pausing the mobile app to focus on\nweb because 87% of users access via desktop and mobile development\nwas eating 40% of engineering time.\"\n\n\"Don't forget: Sarah handles legal (background in IP law),\nJohn handles DevOps (former AWS), Maria handles design (10+ years at Apple).\"\n</code></pre>"},{"location":"onboarding/penfield-user-quick-reference/#not-worth-storing","title":"Not Worth Storing","text":"<pre><code>\"Remember this: I watched TV today.\"\n\"Store: Had a meeting today.\"\n\"Don't forget: Weather was nice.\"\n</code></pre>"},{"location":"onboarding/penfield-user-quick-reference/#the-rule","title":"The Rule","text":"<p>If it's important enough to remember next week/month/year \u2192 Store it with context</p> <p>If it's just casual chat \u2192 Let it flow naturally</p>"},{"location":"onboarding/penfield-user-quick-reference/#advanced-query-patterns","title":"Advanced Query Patterns","text":""},{"location":"onboarding/penfield-user-quick-reference/#pattern-1-conceptual-queries","title":"Pattern 1: Conceptual Queries","text":"<p>Instead of: \"Did we talk about the API rate limit issue?\"</p> <p>Try: \"What decisions did we have about scaling?\" \u2192 Finds rate limiting, caching, infrastructure discussions</p>"},{"location":"onboarding/penfield-user-quick-reference/#pattern-2-time-based-context","title":"Pattern 2: Time-Based Context","text":"<ul> <li>\"What was our strategy at the beginning of Q3?\"</li> <li>\"Recall our initial assumptions about the market\"</li> </ul> <p>\u2192 Your AI understands temporal references</p>"},{"location":"onboarding/penfield-user-quick-reference/#pattern-3-contradiction-checking","title":"Pattern 3: Contradiction Checking","text":"<ul> <li>\"Does this new plan contradict anything we decided before?\"</li> <li>\"What previous decisions are relevant to this choice?\"</li> </ul> <p>\u2192 Your AI can cross-reference automatically</p>"},{"location":"onboarding/penfield-user-quick-reference/#pattern-4-people-relationships","title":"Pattern 4: People &amp; Relationships","text":"<ul> <li>\"What do I know about Sarah's expertise?\"</li> <li>\"Who should handle this based on past discussions?\"</li> </ul> <p>\u2192 Finds role-related information</p>"},{"location":"onboarding/penfield-user-quick-reference/#pattern-5-tag-based-queries","title":"Pattern 5: Tag-Based Queries**","text":"<ul> <li>\"Show me everything tagged as 'q1-planning'\"</li> <li>\"What legal items do I have stored?\"</li> </ul> <p>\u2192 Uses tags assigned when storing</p>"},{"location":"onboarding/penfield-user-quick-reference/#using-connect-explicitly","title":"Using Connect Explicitly","text":"<p>Most of the time, your AI makes connections automatically. But sometimes you want to be explicit:</p>"},{"location":"onboarding/penfield-user-quick-reference/#when-to-use_1","title":"When to Use","text":"<ul> <li>\"Connect this decision to our discussion last week about customer feedback\"</li> <li>\"This finding contradicts what we thought before - make sure you link those\"</li> <li>\"Link this project to the budget discussion from last month\"</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#why-it-helps","title":"Why It Helps","text":"<ul> <li>Makes future recall more accurate</li> <li>Builds the knowledge graph intentionally</li> <li>Helps your AI understand relationships you see but it might miss</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#example_1","title":"Example","text":"<pre><code>You: \"We're pivoting to B2B. Remember the reasoning: CAC was 3x too high in B2C.\"\n\nLater: \"Connect today's sales forecast to the pivot decision. This validates our reasoning.\"\n\nResult: When you ask about the pivot later, your AI not only remembers\nthe decision but sees it validated by subsequent data.\n</code></pre>"},{"location":"onboarding/penfield-user-quick-reference/#save-restore-context-project-checkpoints","title":"Save &amp; Restore Context (Project Checkpoints)","text":"<p>For complex, multi-session projects, you can save explicit checkpoints.</p>"},{"location":"onboarding/penfield-user-quick-reference/#when-to-use_2","title":"When to Use","text":"<ul> <li>Finishing a major work session on a complex project</li> <li>Pausing work you'll return to weeks later</li> <li>Handing off context to someone else</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#how-to-use_1","title":"How to Use","text":"<p>Save: <pre><code>\"Save a checkpoint for Project Atlas. Include everything we've\ndiscussed, decisions made, open questions, and next steps.\"\n</code></pre></p> <p>Restore: <pre><code>\"Restore the checkpoint for Project Atlas\"\n</code></pre></p>"},{"location":"onboarding/penfield-user-quick-reference/#what-gets-saved","title":"What Gets Saved","text":"<ul> <li>All relevant memories and discussions</li> <li>The cognitive state (what you were working on, blockers)</li> <li>Connections between ideas</li> <li>Next steps and open questions</li> </ul> <p>Pro Tip: This is like Git commits for your thinking. Name checkpoints clearly and save them at natural stopping points.</p>"},{"location":"onboarding/penfield-user-quick-reference/#understanding-the-graph","title":"Understanding the Graph","text":"<p>Think of Penfield like Wikipedia with all the \"See Also\" links intact, but for YOUR information. If you're familiar with Obsidian, Penfield is like Obisidian for your AI.</p>"},{"location":"onboarding/penfield-user-quick-reference/#simple-example","title":"Simple Example","text":"<pre><code>Memory: \"We decided to use React\"\n  \u2192 Connected to: \"Team already knows it\"\n    \u2192 Connected to: \"Previous project used React\"\n      \u2192 Connected to: \"Hiring was easier because of React skills\"\n        \u2192 Connected to: \"Developer satisfaction increased\"\n</code></pre> <p>When you ask about the React decision, your AI doesn't just find \"we use React\" - it understands WHY you chose it, what led to that, and what resulted from it.</p> <p>This is why Penfield is different from other AI memory tools.</p>"},{"location":"onboarding/penfield-user-quick-reference/#what-gets-stored-automatically","title":"What Gets Stored Automatically","text":"<p>Your AI stores things proactively when you:</p> <ul> <li>Correct a mistake - \"Actually, it's John not Sarah\"</li> <li>Express a preference - \"I prefer bullet points\"</li> <li>Make a decision - \"Let's go with option B\"</li> <li>Share important context - Background info about projects/people</li> </ul> <p>Your AI does NOT automatically store:</p> <ul> <li>Casual chitchat</li> <li>One-off questions you won't need again</li> <li>Temporary/transient information</li> </ul> <p>If you're unsure, be explicit: \"Remember this\" or \"Don't store this\"</p>"},{"location":"onboarding/penfield-user-quick-reference/#power-user-workflow","title":"Power User Workflow","text":""},{"location":"onboarding/penfield-user-quick-reference/#starting-a-new-project","title":"Starting a New Project","text":"<ol> <li>\"Awaken\" to load your context</li> <li>Brief your AI on the new project</li> <li>Say \"Remember this is Project [Name]\" for clear organization</li> </ol>"},{"location":"onboarding/penfield-user-quick-reference/#during-work","title":"During Work","text":"<ul> <li>Let connections happen naturally</li> <li>Say \"remember this\" for important decisions</li> <li>Use \"connect to\" when you see non-obvious relationships</li> <li>Use tags for organization: \"tag this as 'project-x'\"</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#finishing-a-session","title":"Finishing a Session","text":"<ul> <li>Review what you accomplished</li> <li>If multi-session project: \"Save checkpoint for Project [Name]\"</li> <li>If complete: No action needed - it's all stored</li> </ul>"},{"location":"onboarding/penfield-user-quick-reference/#resuming-later","title":"Resuming Later","text":"<ol> <li>Open new chat</li> <li>\"Awaken\"</li> <li>If you saved checkpoint: \"Restore checkpoint for Project [Name]\"</li> <li>Ask: \"Where were we with [Project]?\"</li> </ol>"},{"location":"onboarding/penfield-user-quick-reference/#key-principles","title":"Key Principles","text":""},{"location":"onboarding/penfield-user-quick-reference/#1-be-specific","title":"1. Be Specific","text":"<p>Not: \"Remember the meeting\"</p> <p>Yes: \"Remember: In today's meeting we decided to hire 2 engineers instead of 1 because the backlog analysis showed we need 40 hours/week, not 20\"</p>"},{"location":"onboarding/penfield-user-quick-reference/#2-include-context","title":"2. Include Context","text":"<p>Not: \"We chose option B\"</p> <p>Yes: \"We chose option B (React) over option A (Vue) because our team already has React experience and hiring is easier\"</p>"},{"location":"onboarding/penfield-user-quick-reference/#3-correct-mistakes-immediately","title":"3. Correct Mistakes Immediately","text":"<p>\"Update memory - I said Sarah handles legal, but actually she handles marketing. John handles legal.\"</p>"},{"location":"onboarding/penfield-user-quick-reference/#4-connect-intentionally","title":"4. Connect Intentionally","text":"<p>When you see relationships your AI might miss, point them out. Your AI will be more useful in future sessions.</p>"},{"location":"onboarding/penfield-user-quick-reference/#5-quality-over-quantity","title":"5. Quality Over Quantity","text":"<p>Use Penfeild freely, but avoid spamming it with low-quality memories.</p>"},{"location":"onboarding/penfield-user-quick-reference/#when-you-dont-need-advanced-features","title":"When You DON'T Need Advanced Features","text":"<p>You don't need power user features if:</p> <ul> <li>Basic \"remember this\" and \"Awaken\" work fine for you</li> <li>You're not working on complex, multi-session projects</li> <li>You don't need to map decision trees or relationships</li> <li>Natural language gets you what you need</li> </ul> <p>The Advanced Guide is for people who want to push the system further.</p>"},{"location":"onboarding/penfield-user-quick-reference/#final-note","title":"Final Note","text":"<p>Penfield's real power isn't in the commands - it's in the accumulated context over time.</p> <p>The more you use it, the smarter your AI becomes about YOU:</p> <ul> <li>Your communication style</li> <li>Your decision-making patterns</li> <li>Your preferences and priorities</li> <li>Your projects and relationships</li> </ul> <p>Six months from now, your AI will feel like a colleague who's been with you the whole time.</p> <p>That's the point.</p> <p>Need help? See Setup Instructions and Troubleshooting Instructions or contact support@penfield.app</p>"},{"location":"onboarding/reconnect-penfield/","title":"Troubleshooting Penfield","text":"<p>Use this guide to diagnose and resolve connection issues with Penfield.</p>"},{"location":"onboarding/reconnect-penfield/#step-1-verify-penfield-is-connected","title":"Step 1: Verify Penfield Is Connected","text":"<p>Open the chat input menu in Claude and check that Penfield appears with the toggle enabled.</p> <p></p> <p>If Penfield appears and is enabled, your connection is working. Try typing \"Awaken\" in a new chat to test.</p>"},{"location":"onboarding/reconnect-penfield/#step-2-reconnect-via-manage-connectors","title":"Step 2: Reconnect via Manage Connectors","text":"<p>If Penfield is missing from the menu, shows as unavailable, is disabled but cannot be re-enabled or otherwise continues to malfunction, click Manage connectors.</p> <p></p> <p>In Settings &gt; Connectors, locate Penfield, if Penfield is disconnected, click Connect.</p> <p></p> <p>When prompted, click Authorize to reconnect your Penfield account.</p> <p></p>"},{"location":"onboarding/reconnect-penfield/#step-3-disconnect-and-reconnect","title":"Step 3: Disconnect and Reconnect","text":"<p>If Penfield appears connected but isn't functioning properly, try disconnecting and reconnecting:</p> <ol> <li>Go to Settings &gt; Connectors</li> <li>Click the menu button (\u22ef) next to Penfield</li> <li>Select Disconnect</li> </ol> <p></p> <ol> <li>After disconnecting, click Connect to re-establish the connection</li> </ol> <p></p>"},{"location":"onboarding/reconnect-penfield/#step-4-remove-and-reinstall","title":"Step 4: Remove and Reinstall","text":"<p>If reconnecting doesn't resolve the issue, remove and reinstall the Penfield connector:</p>"},{"location":"onboarding/reconnect-penfield/#remove-the-existing-connector","title":"Remove the existing connector","text":"<ol> <li>Go to Settings &gt; Connectors</li> <li>Click the menu button (\u22ef) next to Penfield</li> <li>Select Disconnect</li> <li>Select Remove</li> </ol>"},{"location":"onboarding/reconnect-penfield/#add-the-connector-again","title":"Add the connector again","text":"<ol> <li>Click Add custom connector</li> </ol> <ol> <li>In the dialog, enter the connector details:</li> </ol> Field Value Name <code>Penfield</code> Remote MCP server URL <code>https://mcp.penfield.app</code> <ol> <li>Click Add</li> </ol>"},{"location":"onboarding/reconnect-penfield/#connect-and-authorize","title":"Connect and authorize","text":"<ol> <li>Click Connect next to the newly added Penfield connector</li> </ol> <ol> <li>Click Authorize to grant Penfield access to your workspace</li> </ol>"},{"location":"onboarding/reconnect-penfield/#still-having-issues","title":"Still Having Issues?","text":"<p>Contact support@penfield.app for additional assistance.</p>"}]}